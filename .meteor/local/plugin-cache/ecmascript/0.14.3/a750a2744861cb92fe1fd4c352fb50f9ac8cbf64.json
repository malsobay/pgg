{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/tilenbabnik/Desktop/pgg/packages/empirica:core/ui/components/admin/AdminPlayers.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"packages/empirica:core/ui/components/admin/AdminPlayers.jsx","filename":"/Users/tilenbabnik/Desktop/pgg/packages/empirica:core/ui/components/admin/AdminPlayers.jsx","passPerPreset":false,"envName":"development","cwd":"/Users/tilenbabnik/Desktop/pgg","root":"/Users/tilenbabnik/Desktop/pgg","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.9.2","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/tilenbabnik/Desktop/pgg/packages/empirica:core/ui/components/admin/AdminPlayers.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/empirica:core/ui/components/admin/AdminPlayers.jsx"}},"code":"var _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 0);\n\nvar _createSuper;\n\nmodule.link(\"@babel/runtime/helpers/createSuper\", {\n  default: function (v) {\n    _createSuper = v;\n  }\n}, 1);\n\nvar _inheritsLoose;\n\nmodule.link(\"@babel/runtime/helpers/inheritsLoose\", {\n  default: function (v) {\n    _inheritsLoose = v;\n  }\n}, 2);\nmodule.export({\n  \"default\": function () {\n    return AdminPlayers;\n  }\n});\nvar React;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  }\n}, 0);\nvar moment;\nmodule.link(\"moment\", {\n  \"default\": function (v) {\n    moment = v;\n  }\n}, 1);\nvar Link;\nmodule.link(\"react-router-dom\", {\n  Link: function (v) {\n    Link = v;\n  }\n}, 2);\nvar Button, FormGroup, HTMLSelect, Intent, NonIdealState, Tag, HTMLTable, Classes;\nmodule.link(\"@blueprintjs/core\", {\n  Button: function (v) {\n    Button = v;\n  },\n  FormGroup: function (v) {\n    FormGroup = v;\n  },\n  HTMLSelect: function (v) {\n    HTMLSelect = v;\n  },\n  Intent: function (v) {\n    Intent = v;\n  },\n  NonIdealState: function (v) {\n    NonIdealState = v;\n  },\n  Tag: function (v) {\n    Tag = v;\n  },\n  HTMLTable: function (v) {\n    HTMLTable = v;\n  },\n  Classes: function (v) {\n    Classes = v;\n  }\n}, 3);\nvar IconNames;\nmodule.link(\"@blueprintjs/icons\", {\n  IconNames: function (v) {\n    IconNames = v;\n  }\n}, 4);\nvar AdminPageHeader;\nmodule.link(\"./AdminHeading.jsx\", {\n  AdminPageHeader: function (v) {\n    AdminPageHeader = v;\n  }\n}, 5);\nvar AlertToaster, SuccessToaster;\nmodule.link(\"../Toasters.jsx\", {\n  AlertToaster: function (v) {\n    AlertToaster = v;\n  },\n  SuccessToaster: function (v) {\n    SuccessToaster = v;\n  }\n}, 6);\nvar retireGameFullPlayers, retireSinglePlayer;\nmodule.link(\"../../../api/players/methods\", {\n  retireGameFullPlayers: function (v) {\n    retireGameFullPlayers = v;\n  },\n  retireSinglePlayer: function (v) {\n    retireSinglePlayer = v;\n  }\n}, 7);\nvar exitStatuses;\nmodule.link(\"../../../api/players/players.js\", {\n  exitStatuses: function (v) {\n    exitStatuses = v;\n  }\n}, 8);\n\nvar AdminPlayers = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(AdminPlayers, _React$Component);\n\n  var _super = _createSuper(AdminPlayers);\n\n  function AdminPlayers() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      retiredReason: exitStatuses[0],\n      players: [],\n      searchParam: {\n        id: \"\",\n        createdAt: \"\",\n        status: \"\",\n        exitStatus: \"\"\n      }\n    };\n\n    _this.handleChange = function (event) {\n      var retiredReason = event.currentTarget.value;\n\n      _this.setState({\n        retiredReason: retiredReason\n      });\n    };\n\n    _this.handleRetirePlayers = function (event) {\n      event.preventDefault();\n      var retiredReason = _this.state.retiredReason;\n      retireGameFullPlayers.call({\n        retiredReason: retiredReason\n      }, function (err, playersAffected) {\n        if (err) {\n          AlertToaster.show({\n            message: \"Failed to retire players: \" + err\n          });\n        } else {\n          SuccessToaster.show({\n            message: playersAffected + \" players affected\"\n          });\n        }\n      });\n    };\n\n    _this.handleRetireSinglePlayer = function (event, playerId) {\n      event.preventDefault();\n      retireSinglePlayer.call({\n        playerId: playerId\n      }, function (err, _) {\n        if (err) {\n          AlertToaster.show({\n            message: \"Failed to retire player: \" + err\n          });\n        } else {\n          SuccessToaster.show({\n            message: \"Succeed to retire player\"\n          });\n        }\n      });\n    };\n\n    _this.handleColumnHeaderChange = function (event, key) {\n      var _objectSpread2;\n\n      var value = event.currentTarget.value;\n\n      _this.setState({\n        searchParam: _objectSpread({}, _this.state.searchParam, (_objectSpread2 = {}, _objectSpread2[key] = value, _objectSpread2))\n      }, _this.filterPlayers);\n    };\n\n    _this.filterPlayers = function () {\n      var _this$state$searchPar = _this.state.searchParam,\n          createdAt = _this$state$searchPar.createdAt,\n          id = _this$state$searchPar.id,\n          status = _this$state$searchPar.status,\n          exitStatus = _this$state$searchPar.exitStatus;\n      var players = _this.props.players;\n\n      _this.setState({\n        players: players.filter(function (p) {\n          // Filter id\n          if (!id) {\n            return true;\n          }\n\n          return p.id.includes(id);\n        }).filter(function (p) {\n          // Filter status\n          if (!status) {\n            return true;\n          }\n\n          switch (status) {\n            case \"online\":\n              return p.online && p.idle === false;\n\n            case \"offline\":\n              return !p.online;\n\n            case \"idle\":\n              return p.idle;\n\n            default:\n              return true;\n          }\n        }).filter(function (p) {\n          // Filter createdAt\n          if (!createdAt) {\n            return true;\n          }\n\n          var fromNow = moment(p.createdAt).fromNow();\n          return fromNow.includes(createdAt);\n        }).filter(function (p) {\n          // Filter exitStatus\n          if (!exitStatus) {\n            return true;\n          }\n\n          return p.exitStatus ? p.exitStatus.includes(exitStatus) : false;\n        })\n      });\n    };\n\n    return _this;\n  }\n\n  var _proto = AdminPlayers.prototype;\n\n  _proto.componentDidMount = function () {\n    function componentDidMount() {\n      var players = this.props.players;\n      this.setState({\n        players: players\n      });\n    }\n\n    return componentDidMount;\n  }();\n\n  _proto.componentDidUpdate = function () {\n    function componentDidUpdate(prevProps) {\n      var players = this.props.players;\n\n      if (prevProps.players.length !== players.length) {\n        this.setState({\n          players: players\n        });\n      }\n    }\n\n    return componentDidUpdate;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      var _this2 = this;\n\n      var retired = this.props.retired;\n      var _this$state = this.state,\n          retiredReason = _this$state.retiredReason,\n          players = _this$state.players,\n          searchParam = _this$state.searchParam;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"players\"\n      }, /*#__PURE__*/React.createElement(AdminPageHeader, {\n        icon: IconNames.PERSON\n      }, retired ? \"Retired Players\" : \"Players\"), this.props.players.length === 0 ? /*#__PURE__*/React.createElement(\"p\", null, retired ? \"No retired players.\" : \"No players yet.\") : /*#__PURE__*/React.createElement(HTMLTable, {\n        striped: true\n      }, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, \"#\"), /*#__PURE__*/React.createElement(\"th\", null, /*#__PURE__*/React.createElement(\"input\", {\n        className: Classes.INPUT,\n        value: searchParam.id,\n        type: \"text\",\n        placeholder: \"ID\",\n        onChange: function (e) {\n          return _this2.handleColumnHeaderChange(e, \"id\");\n        }\n      })), /*#__PURE__*/React.createElement(\"th\", null, /*#__PURE__*/React.createElement(\"input\", {\n        className: Classes.INPUT,\n        value: searchParam.status,\n        type: \"text\",\n        placeholder: \"Status\",\n        onChange: function (e) {\n          return _this2.handleColumnHeaderChange(e, \"status\");\n        }\n      })), /*#__PURE__*/React.createElement(\"th\", null, /*#__PURE__*/React.createElement(\"input\", {\n        className: Classes.INPUT,\n        value: searchParam.createdAt,\n        type: \"text\",\n        placeholder: \"First Registered\",\n        onChange: function (e) {\n          return _this2.handleColumnHeaderChange(e, \"createdAt\");\n        }\n      })), /*#__PURE__*/React.createElement(\"th\", null, /*#__PURE__*/React.createElement(\"input\", {\n        className: Classes.INPUT,\n        value: searchParam.exitStatus,\n        type: \"text\",\n        placeholder: \"Exit Status\",\n        onChange: function (e) {\n          return _this2.handleColumnHeaderChange(e, \"exitStatus\");\n        }\n      })), /*#__PURE__*/React.createElement(\"th\", null))), /*#__PURE__*/React.createElement(\"tbody\", null, _.map(players, function (player) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: player._id\n        }, /*#__PURE__*/React.createElement(\"td\", null, player.index), /*#__PURE__*/React.createElement(\"td\", null, player.id), /*#__PURE__*/React.createElement(\"td\", null, /*#__PURE__*/React.createElement(Tag, {\n          intent: player.online ? player.idle ? Intent.WARNING : Intent.SUCCESS : Intent.DANGER\n        }, player.online ? player.idle ? \"idle\" : \"online\" : \"offline\")), /*#__PURE__*/React.createElement(\"td\", {\n          title: moment(player.createdAt).format()\n        }, moment(player.createdAt).fromNow()), /*#__PURE__*/React.createElement(\"td\", null, player.exitStatus), /*#__PURE__*/React.createElement(\"td\", null, !player.retireAt && /*#__PURE__*/React.createElement(Button, {\n          text: \"Retire\",\n          className: Classes.SMALL,\n          minimal: true,\n          icon: IconNames.LOG_OUT,\n          intent: Intent.DANGER,\n          onClick: function (e) {\n            return _this2.handleRetireSinglePlayer(e, player._id);\n          }\n        })));\n      }))), retired ? /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(Link, {\n        to: \"/admin/players\"\n      }, \"Back to Active Players\")) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(Link, {\n        to: \"/admin/players/retired\"\n      }, \"View Retired Players\")), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"h4\", null, \"Retire Players\"), /*#__PURE__*/React.createElement(FormGroup, {\n        label: \"Exit Status\",\n        labelFor: \"retire\"\n      }, /*#__PURE__*/React.createElement(HTMLSelect, {\n        name: \"retire\",\n        id: \"retire\",\n        onChange: this.handleChange,\n        value: retiredReason\n      }, _.map(exitStatuses, function (name) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: name,\n          value: name\n        }, name);\n      })), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(Button, {\n        intent: Intent.PRIMARY,\n        onClick: this.handleRetirePlayers\n      }, \"Retire Players with exitStatus \", /*#__PURE__*/React.createElement(\"strong\", null, retiredReason)))));\n    }\n\n    return render;\n  }();\n\n  return AdminPlayers;\n}(React.Component);","map":{"version":3,"sources":["packages/empirica:core/ui/components/admin/AdminPlayers.jsx"],"names":["_objectSpread","module","link","default","v","_createSuper","_inheritsLoose","export","AdminPlayers","React","moment","Link","Button","FormGroup","HTMLSelect","Intent","NonIdealState","Tag","HTMLTable","Classes","IconNames","AdminPageHeader","AlertToaster","SuccessToaster","retireGameFullPlayers","retireSinglePlayer","exitStatuses","state","retiredReason","players","searchParam","id","createdAt","status","exitStatus","handleChange","event","currentTarget","value","setState","handleRetirePlayers","preventDefault","call","err","playersAffected","show","message","handleRetireSinglePlayer","playerId","_","handleColumnHeaderChange","key","filterPlayers","props","filter","p","includes","online","idle","fromNow","componentDidMount","componentDidUpdate","prevProps","length","render","retired","PERSON","INPUT","e","map","player","_id","index","WARNING","SUCCESS","DANGER","format","retireAt","SMALL","LOG_OUT","name","PRIMARY","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport moment from \"moment\";\nimport { Link } from \"react-router-dom\";\n\nimport {\n  Button,\n  FormGroup,\n  HTMLSelect,\n  Intent,\n  NonIdealState,\n  Tag,\n  HTMLTable,\n  Classes\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { AdminPageHeader } from \"./AdminHeading.jsx\";\nimport { AlertToaster, SuccessToaster } from \"../Toasters.jsx\";\nimport {\n  retireGameFullPlayers,\n  retireSinglePlayer\n} from \"../../../api/players/methods\";\nimport { exitStatuses } from \"../../../api/players/players.js\";\n\nexport default class AdminPlayers extends React.Component {\n  state = {\n    retiredReason: exitStatuses[0],\n    players: [],\n    searchParam: { id: \"\", createdAt: \"\", status: \"\", exitStatus: \"\" }\n  };\n\n  componentDidMount() {\n    const { players } = this.props;\n    this.setState({\n      players: players\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    const { players } = this.props;\n\n    if (prevProps.players.length !== players.length) {\n      this.setState({\n        players: players\n      });\n    }\n  }\n\n  handleChange = event => {\n    const retiredReason = event.currentTarget.value;\n    this.setState({\n      retiredReason\n    });\n  };\n\n  handleRetirePlayers = event => {\n    event.preventDefault();\n    const { retiredReason } = this.state;\n    retireGameFullPlayers.call({ retiredReason }, (err, playersAffected) => {\n      if (err) {\n        AlertToaster.show({ message: `Failed to retire players: ${err}` });\n      } else {\n        SuccessToaster.show({ message: `${playersAffected} players affected` });\n      }\n    });\n  };\n\n  handleRetireSinglePlayer = (event, playerId) => {\n    event.preventDefault();\n    retireSinglePlayer.call({ playerId }, (err, _) => {\n      if (err) {\n        AlertToaster.show({ message: `Failed to retire player: ${err}` });\n      } else {\n        SuccessToaster.show({\n          message: `Succeed to retire player`\n        });\n      }\n    });\n  };\n\n  handleColumnHeaderChange = (event, key) => {\n    const value = event.currentTarget.value;\n\n    this.setState(\n      {\n        searchParam: { ...this.state.searchParam, [key]: value }\n      },\n      this.filterPlayers\n    );\n  };\n\n  filterPlayers = () => {\n    const {\n      searchParam: { createdAt, id, status, exitStatus }\n    } = this.state;\n    const { players } = this.props;\n\n    this.setState({\n      players: players\n        .filter(p => {\n          // Filter id\n          if (!id) {\n            return true;\n          }\n\n          return p.id.includes(id);\n        })\n        .filter(p => {\n          // Filter status\n          if (!status) {\n            return true;\n          }\n\n          switch (status) {\n            case \"online\":\n              return p.online && p.idle === false;\n\n            case \"offline\":\n              return !p.online;\n\n            case \"idle\":\n              return p.idle;\n\n            default:\n              return true;\n          }\n        })\n        .filter(p => {\n          // Filter createdAt\n          if (!createdAt) {\n            return true;\n          }\n\n          const fromNow = moment(p.createdAt).fromNow();\n          return fromNow.includes(createdAt);\n        })\n        .filter(p => {\n          // Filter exitStatus\n          if (!exitStatus) {\n            return true;\n          }\n\n          return p.exitStatus ? p.exitStatus.includes(exitStatus) : false;\n        })\n    });\n  };\n\n  render() {\n    const { retired } = this.props;\n    const { retiredReason, players, searchParam } = this.state;\n\n    return (\n      <div className=\"players\">\n        <AdminPageHeader icon={IconNames.PERSON}>\n          {retired ? \"Retired Players\" : \"Players\"}\n        </AdminPageHeader>\n\n        {this.props.players.length === 0 ? (\n          <p>{retired ? \"No retired players.\" : \"No players yet.\"}</p>\n        ) : (\n          <HTMLTable striped>\n            <thead>\n              <tr>\n                <th>#</th>\n                <th>\n                  <input\n                    className={Classes.INPUT}\n                    value={searchParam.id}\n                    type=\"text\"\n                    placeholder=\"ID\"\n                    onChange={e => this.handleColumnHeaderChange(e, \"id\")}\n                  />\n                </th>\n                <th>\n                  <input\n                    className={Classes.INPUT}\n                    value={searchParam.status}\n                    type=\"text\"\n                    placeholder=\"Status\"\n                    onChange={e => this.handleColumnHeaderChange(e, \"status\")}\n                  />\n                </th>\n                <th>\n                  <input\n                    className={Classes.INPUT}\n                    value={searchParam.createdAt}\n                    type=\"text\"\n                    placeholder=\"First Registered\"\n                    onChange={e =>\n                      this.handleColumnHeaderChange(e, \"createdAt\")\n                    }\n                  />\n                </th>\n                <th>\n                  <input\n                    className={Classes.INPUT}\n                    value={searchParam.exitStatus}\n                    type=\"text\"\n                    placeholder=\"Exit Status\"\n                    onChange={e =>\n                      this.handleColumnHeaderChange(e, \"exitStatus\")\n                    }\n                  />\n                </th>\n                <th />\n              </tr>\n            </thead>\n            <tbody>\n              {_.map(players, player => (\n                <tr key={player._id}>\n                  <td>{player.index}</td>\n                  <td>{player.id}</td>\n                  <td>\n                    <Tag\n                      intent={\n                        player.online\n                          ? player.idle\n                            ? Intent.WARNING\n                            : Intent.SUCCESS\n                          : Intent.DANGER\n                      }\n                    >\n                      {player.online\n                        ? player.idle\n                          ? \"idle\"\n                          : \"online\"\n                        : \"offline\"}\n                    </Tag>\n                  </td>\n                  <td title={moment(player.createdAt).format()}>\n                    {moment(player.createdAt).fromNow()}\n                  </td>\n                  <td>{player.exitStatus}</td>\n                  <td>\n                    {!player.retireAt && (\n                      <Button\n                        text={\"Retire\"}\n                        className={Classes.SMALL}\n                        minimal\n                        icon={IconNames.LOG_OUT}\n                        intent={Intent.DANGER}\n                        onClick={e =>\n                          this.handleRetireSinglePlayer(e, player._id)\n                        }\n                      />\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </HTMLTable>\n        )}\n\n        {retired ? (\n          <p>\n            <br />\n            <Link to=\"/admin/players\">Back to Active Players</Link>\n          </p>\n        ) : (\n          <>\n            <br />\n\n            <p>\n              <br />\n              <Link to=\"/admin/players/retired\">View Retired Players</Link>\n            </p>\n\n            <br />\n\n            <br />\n\n            <h4>Retire Players</h4>\n\n            <FormGroup label=\"Exit Status\" labelFor=\"retire\">\n              <HTMLSelect\n                name=\"retire\"\n                id=\"retire\"\n                onChange={this.handleChange}\n                value={retiredReason}\n              >\n                {_.map(exitStatuses, name => (\n                  <option key={name} value={name}>\n                    {name}\n                  </option>\n                ))}\n              </HTMLSelect>\n              <br />\n              <br />\n              <Button\n                intent={Intent.PRIMARY}\n                onClick={this.handleRetirePlayers}\n              >\n                Retire Players with exitStatus <strong>{retiredReason}</strong>\n              </Button>\n            </FormGroup>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n"]},"sourceType":"module","hash":"a750a2744861cb92fe1fd4c352fb50f9ac8cbf64"}
