{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/tilenbabnik/Desktop/pgg/packages/empirica:core/ui/components/Public.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"packages/empirica:core/ui/components/Public.jsx","filename":"/Users/tilenbabnik/Desktop/pgg/packages/empirica:core/ui/components/Public.jsx","passPerPreset":false,"envName":"development","cwd":"/Users/tilenbabnik/Desktop/pgg","root":"/Users/tilenbabnik/Desktop/pgg","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.9.2","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/tilenbabnik/Desktop/pgg/packages/empirica:core/ui/components/Public.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/empirica:core/ui/components/Public.jsx"}},"code":"let _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n\n}, 0);\n\nlet _objectWithoutProperties;\n\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n\n}, 1);\nmodule.export({\n  default: () => Public\n});\nlet Button, Classes, Dialog, Icon, Intent, NavbarHeading;\nmodule.link(\"@blueprintjs/core\", {\n  Button(v) {\n    Button = v;\n  },\n\n  Classes(v) {\n    Classes = v;\n  },\n\n  Dialog(v) {\n    Dialog = v;\n  },\n\n  Icon(v) {\n    Icon = v;\n  },\n\n  Intent(v) {\n    Intent = v;\n  },\n\n  NavbarHeading(v) {\n    NavbarHeading = v;\n  }\n\n}, 0);\nlet IconNames;\nmodule.link(\"@blueprintjs/icons\", {\n  IconNames(v) {\n    IconNames = v;\n  }\n\n}, 1);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 2);\nlet Helmet;\nmodule.link(\"react-helmet\", {\n  Helmet(v) {\n    Helmet = v;\n  }\n\n}, 3);\nlet Link;\nmodule.link(\"react-router-dom\", {\n  Link(v) {\n    Link = v;\n  }\n\n}, 4);\nlet GameContainer;\nmodule.link(\"../containers/GameContainer.jsx\", {\n  default(v) {\n    GameContainer = v;\n  }\n\n}, 5);\nlet removePlayerId;\nmodule.link(\"../containers/IdentifiedContainer.jsx\", {\n  removePlayerId(v) {\n    removePlayerId = v;\n  }\n\n}, 6);\nlet CoreWrapper;\nmodule.link(\"./Helpers.jsx\", {\n  CoreWrapper(v) {\n    CoreWrapper = v;\n  }\n\n}, 7);\nlet Loading;\nmodule.link(\"./Loading.jsx\", {\n  default(v) {\n    Loading = v;\n  }\n\n}, 8);\nlet NewPlayer;\nmodule.link(\"./NewPlayer.jsx\", {\n  default(v) {\n    NewPlayer = v;\n  }\n\n}, 9);\nlet NoBatchOriginal;\nmodule.link(\"./NoBatch.jsx\", {\n  default(v) {\n    NoBatchOriginal = v;\n  }\n\n}, 10);\nconst showOpenAdmin = Meteor.isDevelopment;\nconst showOpenAltPlayer = Meteor.isDevelopment || Meteor.settings.public.debug_resetSession;\nconst showReset = Meteor.isDevelopment || Meteor.settings.public.debug_newPlayer;\nconst loadDocTitle = document.title;\n\nclass Public extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isAboutOpen: false\n    };\n\n    this.handleToggleAbout = () => this.setState({\n      isAboutOpen: !this.state.isAboutOpen\n    });\n\n    this.handleOpenAdmin = event => {\n      event.preventDefault();\n\n      if (!showOpenAdmin) {\n        return;\n      }\n\n      window.open(\"/admin\", \"_blank\");\n    };\n\n    this.handleReset = event => {\n      event.preventDefault();\n\n      if (!showOpenAltPlayer) {\n        return;\n      }\n\n      removePlayerId();\n    };\n\n    this.handleOpenAltPlayer = event => {\n      event.preventDefault();\n\n      if (!showReset) {\n        return;\n      } // check to see if a playerId is required\n\n\n      const {\n        playerIdParam,\n        playerIdParamExclusive\n      } = Meteor.settings.public;\n      const playerIdParamRequired = playerIdParam && playerIdParamExclusive;\n      const randPlayerIdKey = Math.random().toString(36).substring(2, 15); // if playerId is required, add that to URL\n      // otherwise, produce URL with just playerIdKey\n\n      if (playerIdParamRequired) {\n        const randId = Math.random().toString(36).substring(2, 15);\n        window.open(\"/?playerIdKey=\".concat(randPlayerIdKey, \"&\").concat(playerIdParam, \"=\").concat(randId), \"_blank\");\n      } else {\n        window.open(\"/?playerIdKey=\".concat(randPlayerIdKey), \"_blank\");\n      }\n    };\n  }\n\n  render() {\n    const _this$props = this.props,\n          {\n      loading,\n      renderPublic,\n      playerIdKey,\n      Header,\n      NewPlayer: CustomNewPlayer,\n      About,\n      NoBatch\n    } = _this$props,\n          rest = _objectWithoutProperties(_this$props, [\"loading\", \"renderPublic\", \"playerIdKey\", \"Header\", \"NewPlayer\", \"About\", \"NoBatch\"]);\n\n    const {\n      player\n    } = rest; // const AboutComp = About || AboutOriginal;\n\n    const AboutComp = About || null;\n    const NoBatchComp = NoBatch || NoBatchOriginal;\n\n    if (loading) {\n      return /*#__PURE__*/React.createElement(Loading, null);\n    }\n\n    if (!renderPublic) {\n      return /*#__PURE__*/React.createElement(NoBatchComp, null);\n    }\n\n    const adminProps = {\n      showOpenAltPlayer: showOpenAltPlayer,\n      onOpenAltPlayer: this.handleOpenAltPlayer,\n      showReset: showReset,\n      onReset: this.handleReset,\n      showReset: showReset,\n      about: AboutComp,\n      showAbout: Boolean(AboutComp),\n      onToggleAbout: this.handleToggleAbout\n    };\n    let content;\n\n    if (!player) {\n      content = /*#__PURE__*/React.createElement(CoreWrapper, null, /*#__PURE__*/React.createElement(NewPlayer, _extends({}, rest, adminProps, {\n        CustomNewPlayer: CustomNewPlayer\n      })));\n    } else {\n      content = /*#__PURE__*/React.createElement(GameContainer, _extends({}, rest, adminProps));\n    }\n\n    let title = loadDocTitle;\n\n    if (playerIdKey) {\n      title += \" (\".concat(playerIdKey, \")\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"grid\"\n    }, /*#__PURE__*/React.createElement(Helmet, null, /*#__PURE__*/React.createElement(\"title\", null, title)), Header !== undefined ? /*#__PURE__*/React.createElement(Header, adminProps) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header navbar\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"navbarGroup\"\n    }, /*#__PURE__*/React.createElement(NavbarHeading, null, /*#__PURE__*/React.createElement(Link, {\n      className: [Classes.BUTTON, Classes.LARGE, Classes.MINIMAL, Classes.BUTTON].join(\" \"),\n      to: \"/\"\n    }, /*#__PURE__*/React.createElement(Icon, {\n      icon: IconNames.EXCHANGE\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: Classes.BUTTON_TEXT\n    }, \"Empirica\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"navbarGroup\"\n    }, showOpenAltPlayer ? /*#__PURE__*/React.createElement(Button, {\n      text: \"New Player\",\n      minimal: true,\n      icon: IconNames.PERSON,\n      onClick: this.handleOpenAltPlayer\n    }) : \"\", showReset ? /*#__PURE__*/React.createElement(Button, {\n      text: \"Reset current session\",\n      minimal: true,\n      icon: IconNames.REPEAT,\n      onClick: this.handleReset\n    }) : \"\", showOpenAdmin ? /*#__PURE__*/React.createElement(Button, {\n      text: \"Open Admin\",\n      minimal: true,\n      icon: IconNames.PLAY,\n      onClick: this.handleOpenAdmin\n    }) : \"\", AboutComp ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n      text: \"About\",\n      minimal: true,\n      icon: IconNames.info_sign,\n      onClick: this.handleToggleAbout\n    }), /*#__PURE__*/React.createElement(Dialog, {\n      icon: IconNames.INBOX,\n      isOpen: this.state.isAboutOpen,\n      onClose: this.handleToggleAbout,\n      title: \"About\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: Classes.DIALOG_BODY\n    }, /*#__PURE__*/React.createElement(AboutComp, null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: Classes.DIALOG_FOOTER\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: Classes.DIALOG_FOOTER_ACTIONS\n    }, /*#__PURE__*/React.createElement(Button, {\n      text: \"Close\",\n      intent: Intent.PRIMARY,\n      onClick: this.handleToggleAbout\n    }))))) : null)), /*#__PURE__*/React.createElement(\"main\", null, content));\n  }\n\n}","map":{"version":3,"sources":["packages/empirica:core/ui/components/Public.jsx"],"names":["_extends","module","link","default","v","_objectWithoutProperties","export","Public","Button","Classes","Dialog","Icon","Intent","NavbarHeading","IconNames","React","Helmet","Link","GameContainer","removePlayerId","CoreWrapper","Loading","NewPlayer","NoBatchOriginal","showOpenAdmin","Meteor","isDevelopment","showOpenAltPlayer","settings","public","debug_resetSession","showReset","debug_newPlayer","loadDocTitle","document","title","Component","state","isAboutOpen","handleToggleAbout","setState","handleOpenAdmin","event","preventDefault","window","open","handleReset","handleOpenAltPlayer","playerIdParam","playerIdParamExclusive","playerIdParamRequired","randPlayerIdKey","Math","random","toString","substring","randId","render","props","loading","renderPublic","playerIdKey","Header","CustomNewPlayer","About","NoBatch","rest","player","AboutComp","NoBatchComp","adminProps","onOpenAltPlayer","onReset","about","showAbout","Boolean","onToggleAbout","content","undefined","BUTTON","LARGE","MINIMAL","join","EXCHANGE","BUTTON_TEXT","PERSON","REPEAT","PLAY","info_sign","INBOX","DIALOG_BODY","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","PRIMARY"],"mappings":"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","sourcesContent":["const showOpenAdmin = Meteor.isDevelopment;\nconst showOpenAltPlayer =\n  Meteor.isDevelopment || Meteor.settings.public.debug_resetSession;\nconst showReset =\n  Meteor.isDevelopment || Meteor.settings.public.debug_newPlayer;\n\nimport {\n  Button,\n  Classes,\n  Dialog,\n  Icon,\n  Intent,\n  NavbarHeading\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport React from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { Link } from \"react-router-dom\";\nimport GameContainer from \"../containers/GameContainer.jsx\";\nimport { removePlayerId } from \"../containers/IdentifiedContainer.jsx\";\nimport { CoreWrapper } from \"./Helpers.jsx\";\nimport Loading from \"./Loading.jsx\";\nimport NewPlayer from \"./NewPlayer.jsx\";\nimport NoBatchOriginal from \"./NoBatch.jsx\";\n\nconst loadDocTitle = document.title;\n\nexport default class Public extends React.Component {\n  state = { isAboutOpen: false };\n\n  handleToggleAbout = () =>\n    this.setState({ isAboutOpen: !this.state.isAboutOpen });\n\n  handleOpenAdmin = event => {\n    event.preventDefault();\n\n    if (!showOpenAdmin) {\n      return;\n    }\n    window.open(\"/admin\", \"_blank\");\n  };\n\n  handleReset = event => {\n    event.preventDefault();\n\n    if (!showOpenAltPlayer) {\n      return;\n    }\n    removePlayerId();\n  };\n\n  handleOpenAltPlayer = event => {\n    event.preventDefault();\n\n    if (!showReset) {\n      return;\n    }\n\n    // check to see if a playerId is required\n    const { playerIdParam, playerIdParamExclusive } = Meteor.settings.public;\n    const playerIdParamRequired = playerIdParam && playerIdParamExclusive;\n\n    const randPlayerIdKey = Math.random()\n      .toString(36)\n      .substring(2, 15);\n\n    // if playerId is required, add that to URL\n    // otherwise, produce URL with just playerIdKey\n    if (playerIdParamRequired) {\n      const randId = Math.random()\n        .toString(36)\n        .substring(2, 15);\n      window.open(\n        `/?playerIdKey=${randPlayerIdKey}&${playerIdParam}=${randId}`,\n        \"_blank\"\n      );\n    } else {\n      window.open(`/?playerIdKey=${randPlayerIdKey}`, \"_blank\");\n    }\n  };\n\n  render() {\n    const {\n      loading,\n      renderPublic,\n      playerIdKey,\n      Header,\n      NewPlayer: CustomNewPlayer,\n      About,\n      NoBatch,\n      ...rest\n    } = this.props;\n    const { player } = rest;\n    // const AboutComp = About || AboutOriginal;\n    const AboutComp = About || null;\n    const NoBatchComp = NoBatch || NoBatchOriginal;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (!renderPublic) {\n      return <NoBatchComp />;\n    }\n\n    const adminProps = {\n      showOpenAltPlayer: showOpenAltPlayer,\n      onOpenAltPlayer: this.handleOpenAltPlayer,\n      showReset: showReset,\n      onReset: this.handleReset,\n      showReset: showReset,\n      about: AboutComp,\n      showAbout: Boolean(AboutComp),\n      onToggleAbout: this.handleToggleAbout\n    };\n\n    let content;\n    if (!player) {\n      content = (\n        <CoreWrapper>\n          <NewPlayer\n            {...rest}\n            {...adminProps}\n            CustomNewPlayer={CustomNewPlayer}\n          />\n        </CoreWrapper>\n      );\n    } else {\n      content = <GameContainer {...rest} {...adminProps} />;\n    }\n\n    let title = loadDocTitle;\n    if (playerIdKey) {\n      title += ` (${playerIdKey})`;\n    }\n\n    return (\n      <div className=\"grid\">\n        <Helmet>\n          <title>{title}</title>\n        </Helmet>\n\n        {Header !== undefined ? (\n          <Header {...adminProps} />\n        ) : (\n          <div className=\"header navbar\">\n            <div className=\"navbarGroup\">\n              <NavbarHeading>\n                <Link\n                  className={[\n                    Classes.BUTTON,\n                    Classes.LARGE,\n                    Classes.MINIMAL,\n                    Classes.BUTTON\n                  ].join(\" \")}\n                  to=\"/\"\n                >\n                  <Icon icon={IconNames.EXCHANGE} />\n                  <span className={Classes.BUTTON_TEXT}>Empirica</span>\n                </Link>\n              </NavbarHeading>\n            </div>\n\n            <div className=\"navbarGroup\">\n              {showOpenAltPlayer ? (\n                <Button\n                  text=\"New Player\"\n                  minimal\n                  icon={IconNames.PERSON}\n                  onClick={this.handleOpenAltPlayer}\n                />\n              ) : (\n                \"\"\n              )}\n              {showReset ? (\n                <Button\n                  text=\"Reset current session\"\n                  minimal\n                  icon={IconNames.REPEAT}\n                  onClick={this.handleReset}\n                />\n              ) : (\n                \"\"\n              )}\n\n              {showOpenAdmin ? (\n                <Button\n                  text=\"Open Admin\"\n                  minimal\n                  icon={IconNames.PLAY}\n                  onClick={this.handleOpenAdmin}\n                />\n              ) : (\n                \"\"\n              )}\n\n              {AboutComp ? (\n                <>\n                  <Button\n                    text=\"About\"\n                    minimal\n                    icon={IconNames.info_sign}\n                    onClick={this.handleToggleAbout}\n                  />\n\n                  <Dialog\n                    icon={IconNames.INBOX}\n                    isOpen={this.state.isAboutOpen}\n                    onClose={this.handleToggleAbout}\n                    title=\"About\"\n                  >\n                    <div className={Classes.DIALOG_BODY}>\n                      <AboutComp />\n                    </div>\n\n                    <div className={Classes.DIALOG_FOOTER}>\n                      <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                        <Button\n                          text=\"Close\"\n                          intent={Intent.PRIMARY}\n                          onClick={this.handleToggleAbout}\n                        />\n                      </div>\n                    </div>\n                  </Dialog>\n                </>\n              ) : null}\n            </div>\n          </div>\n        )}\n\n        <main>{content}</main>\n      </div>\n    );\n  }\n}\n"]},"sourceType":"module","hash":"47d817641ba472acfdab91cb47f2201042db5b0f"}
