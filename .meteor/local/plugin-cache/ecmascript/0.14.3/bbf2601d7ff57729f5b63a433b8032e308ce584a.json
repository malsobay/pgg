{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/tilenbabnik/Desktop/pgg/packages/empirica:core/ui/components/Public.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"packages/empirica:core/ui/components/Public.jsx","filename":"/Users/tilenbabnik/Desktop/pgg/packages/empirica:core/ui/components/Public.jsx","passPerPreset":false,"envName":"development","cwd":"/Users/tilenbabnik/Desktop/pgg","root":"/Users/tilenbabnik/Desktop/pgg","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.9.2","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/tilenbabnik/Desktop/pgg/packages/empirica:core/ui/components/Public.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/empirica:core/ui/components/Public.jsx"}},"code":"var _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 0);\n\nvar _objectWithoutProperties;\n\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 1);\n\nvar _createSuper;\n\nmodule.link(\"@babel/runtime/helpers/createSuper\", {\n  default: function (v) {\n    _createSuper = v;\n  }\n}, 2);\n\nvar _inheritsLoose;\n\nmodule.link(\"@babel/runtime/helpers/inheritsLoose\", {\n  default: function (v) {\n    _inheritsLoose = v;\n  }\n}, 3);\nmodule.export({\n  \"default\": function () {\n    return Public;\n  }\n});\nvar Button, Classes, Dialog, Icon, Intent, NavbarHeading;\nmodule.link(\"@blueprintjs/core\", {\n  Button: function (v) {\n    Button = v;\n  },\n  Classes: function (v) {\n    Classes = v;\n  },\n  Dialog: function (v) {\n    Dialog = v;\n  },\n  Icon: function (v) {\n    Icon = v;\n  },\n  Intent: function (v) {\n    Intent = v;\n  },\n  NavbarHeading: function (v) {\n    NavbarHeading = v;\n  }\n}, 0);\nvar IconNames;\nmodule.link(\"@blueprintjs/icons\", {\n  IconNames: function (v) {\n    IconNames = v;\n  }\n}, 1);\nvar React;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  }\n}, 2);\nvar Helmet;\nmodule.link(\"react-helmet\", {\n  Helmet: function (v) {\n    Helmet = v;\n  }\n}, 3);\nvar Link;\nmodule.link(\"react-router-dom\", {\n  Link: function (v) {\n    Link = v;\n  }\n}, 4);\nvar GameContainer;\nmodule.link(\"../containers/GameContainer.jsx\", {\n  \"default\": function (v) {\n    GameContainer = v;\n  }\n}, 5);\nvar removePlayerId;\nmodule.link(\"../containers/IdentifiedContainer.jsx\", {\n  removePlayerId: function (v) {\n    removePlayerId = v;\n  }\n}, 6);\nvar CoreWrapper;\nmodule.link(\"./Helpers.jsx\", {\n  CoreWrapper: function (v) {\n    CoreWrapper = v;\n  }\n}, 7);\nvar Loading;\nmodule.link(\"./Loading.jsx\", {\n  \"default\": function (v) {\n    Loading = v;\n  }\n}, 8);\nvar NewPlayer;\nmodule.link(\"./NewPlayer.jsx\", {\n  \"default\": function (v) {\n    NewPlayer = v;\n  }\n}, 9);\nvar NoBatchOriginal;\nmodule.link(\"./NoBatch.jsx\", {\n  \"default\": function (v) {\n    NoBatchOriginal = v;\n  }\n}, 10);\nvar showOpenAdmin = Meteor.isDevelopment;\nvar showOpenAltPlayer = Meteor.isDevelopment || Meteor.settings.public.debug_resetSession;\nvar showReset = Meteor.isDevelopment || Meteor.settings.public.debug_newPlayer;\nvar loadDocTitle = document.title;\n\nvar Public = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Public, _React$Component);\n\n  var _super = _createSuper(Public);\n\n  function Public() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      isAboutOpen: false\n    };\n\n    _this.handleToggleAbout = function () {\n      return _this.setState({\n        isAboutOpen: !_this.state.isAboutOpen\n      });\n    };\n\n    _this.handleOpenAdmin = function (event) {\n      event.preventDefault();\n\n      if (!showOpenAdmin) {\n        return;\n      }\n\n      window.open(\"/admin\", \"_blank\");\n    };\n\n    _this.handleReset = function (event) {\n      event.preventDefault();\n\n      if (!showOpenAltPlayer) {\n        return;\n      }\n\n      removePlayerId();\n    };\n\n    _this.handleOpenAltPlayer = function (event) {\n      event.preventDefault();\n\n      if (!showReset) {\n        return;\n      } // check to see if a playerId is required\n\n\n      var _Meteor$settings$publ = Meteor.settings.public,\n          playerIdParam = _Meteor$settings$publ.playerIdParam,\n          playerIdParamExclusive = _Meteor$settings$publ.playerIdParamExclusive;\n      var playerIdParamRequired = playerIdParam && playerIdParamExclusive;\n      var randPlayerIdKey = Math.random().toString(36).substring(2, 15); // if playerId is required, add that to URL\n      // otherwise, produce URL with just playerIdKey\n\n      if (playerIdParamRequired) {\n        var randId = Math.random().toString(36).substring(2, 15);\n        window.open(\"/?playerIdKey=\" + randPlayerIdKey + \"&\" + playerIdParam + \"=\" + randId, \"_blank\");\n      } else {\n        window.open(\"/?playerIdKey=\" + randPlayerIdKey, \"_blank\");\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = Public.prototype;\n\n  _proto.render = function () {\n    function render() {\n      var _this$props = this.props,\n          loading = _this$props.loading,\n          renderPublic = _this$props.renderPublic,\n          playerIdKey = _this$props.playerIdKey,\n          Header = _this$props.Header,\n          CustomNewPlayer = _this$props.NewPlayer,\n          About = _this$props.About,\n          NoBatch = _this$props.NoBatch,\n          rest = _objectWithoutProperties(_this$props, [\"loading\", \"renderPublic\", \"playerIdKey\", \"Header\", \"NewPlayer\", \"About\", \"NoBatch\"]);\n\n      var player = rest.player; // const AboutComp = About || AboutOriginal;\n\n      var AboutComp = About || null;\n      var NoBatchComp = NoBatch || NoBatchOriginal;\n\n      if (loading) {\n        return /*#__PURE__*/React.createElement(Loading, null);\n      }\n\n      if (!renderPublic) {\n        return /*#__PURE__*/React.createElement(NoBatchComp, null);\n      }\n\n      var adminProps = {\n        showOpenAltPlayer: showOpenAltPlayer,\n        onOpenAltPlayer: this.handleOpenAltPlayer,\n        showReset: showReset,\n        onReset: this.handleReset,\n        showReset: showReset,\n        about: AboutComp,\n        showAbout: Boolean(AboutComp),\n        onToggleAbout: this.handleToggleAbout\n      };\n      var content;\n\n      if (!player) {\n        content = /*#__PURE__*/React.createElement(CoreWrapper, null, /*#__PURE__*/React.createElement(NewPlayer, _extends({}, rest, adminProps, {\n          CustomNewPlayer: CustomNewPlayer\n        })));\n      } else {\n        content = /*#__PURE__*/React.createElement(GameContainer, _extends({}, rest, adminProps));\n      }\n\n      var title = loadDocTitle;\n\n      if (playerIdKey) {\n        title += \" (\" + playerIdKey + \")\";\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"grid\"\n      }, /*#__PURE__*/React.createElement(Helmet, null, /*#__PURE__*/React.createElement(\"title\", null, title)), Header !== undefined ? /*#__PURE__*/React.createElement(Header, adminProps) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"header navbar\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"navbarGroup\"\n      }, /*#__PURE__*/React.createElement(NavbarHeading, null, /*#__PURE__*/React.createElement(Link, {\n        className: [Classes.BUTTON, Classes.LARGE, Classes.MINIMAL, Classes.BUTTON].join(\" \"),\n        to: \"/\"\n      }, /*#__PURE__*/React.createElement(Icon, {\n        icon: IconNames.EXCHANGE\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: Classes.BUTTON_TEXT\n      }, \"Empirica\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"navbarGroup\"\n      }, showOpenAltPlayer ? /*#__PURE__*/React.createElement(Button, {\n        text: \"New Player\",\n        minimal: true,\n        icon: IconNames.PERSON,\n        onClick: this.handleOpenAltPlayer\n      }) : \"\", showReset ? /*#__PURE__*/React.createElement(Button, {\n        text: \"Reset current session\",\n        minimal: true,\n        icon: IconNames.REPEAT,\n        onClick: this.handleReset\n      }) : \"\", showOpenAdmin ? /*#__PURE__*/React.createElement(Button, {\n        text: \"Open Admin\",\n        minimal: true,\n        icon: IconNames.PLAY,\n        onClick: this.handleOpenAdmin\n      }) : \"\", AboutComp ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n        text: \"About\",\n        minimal: true,\n        icon: IconNames.info_sign,\n        onClick: this.handleToggleAbout\n      }), /*#__PURE__*/React.createElement(Dialog, {\n        icon: IconNames.INBOX,\n        isOpen: this.state.isAboutOpen,\n        onClose: this.handleToggleAbout,\n        title: \"About\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: Classes.DIALOG_BODY\n      }, /*#__PURE__*/React.createElement(AboutComp, null)), /*#__PURE__*/React.createElement(\"div\", {\n        className: Classes.DIALOG_FOOTER\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: Classes.DIALOG_FOOTER_ACTIONS\n      }, /*#__PURE__*/React.createElement(Button, {\n        text: \"Close\",\n        intent: Intent.PRIMARY,\n        onClick: this.handleToggleAbout\n      }))))) : null)), /*#__PURE__*/React.createElement(\"main\", null, content));\n    }\n\n    return render;\n  }();\n\n  return Public;\n}(React.Component);","map":{"version":3,"sources":["packages/empirica:core/ui/components/Public.jsx"],"names":["_extends","module","link","default","v","_objectWithoutProperties","_createSuper","_inheritsLoose","export","Public","Button","Classes","Dialog","Icon","Intent","NavbarHeading","IconNames","React","Helmet","Link","GameContainer","removePlayerId","CoreWrapper","Loading","NewPlayer","NoBatchOriginal","showOpenAdmin","Meteor","isDevelopment","showOpenAltPlayer","settings","public","debug_resetSession","showReset","debug_newPlayer","loadDocTitle","document","title","state","isAboutOpen","handleToggleAbout","setState","handleOpenAdmin","event","preventDefault","window","open","handleReset","handleOpenAltPlayer","playerIdParam","playerIdParamExclusive","playerIdParamRequired","randPlayerIdKey","Math","random","toString","substring","randId","render","props","loading","renderPublic","playerIdKey","Header","CustomNewPlayer","About","NoBatch","rest","player","AboutComp","NoBatchComp","adminProps","onOpenAltPlayer","onReset","about","showAbout","Boolean","onToggleAbout","content","undefined","BUTTON","LARGE","MINIMAL","join","EXCHANGE","BUTTON_TEXT","PERSON","REPEAT","PLAY","info_sign","INBOX","DIALOG_BODY","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","PRIMARY","Component"],"mappings":"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","sourcesContent":["const showOpenAdmin = Meteor.isDevelopment;\nconst showOpenAltPlayer =\n  Meteor.isDevelopment || Meteor.settings.public.debug_resetSession;\nconst showReset =\n  Meteor.isDevelopment || Meteor.settings.public.debug_newPlayer;\n\nimport {\n  Button,\n  Classes,\n  Dialog,\n  Icon,\n  Intent,\n  NavbarHeading\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport React from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { Link } from \"react-router-dom\";\nimport GameContainer from \"../containers/GameContainer.jsx\";\nimport { removePlayerId } from \"../containers/IdentifiedContainer.jsx\";\nimport { CoreWrapper } from \"./Helpers.jsx\";\nimport Loading from \"./Loading.jsx\";\nimport NewPlayer from \"./NewPlayer.jsx\";\nimport NoBatchOriginal from \"./NoBatch.jsx\";\n\nconst loadDocTitle = document.title;\n\nexport default class Public extends React.Component {\n  state = { isAboutOpen: false };\n\n  handleToggleAbout = () =>\n    this.setState({ isAboutOpen: !this.state.isAboutOpen });\n\n  handleOpenAdmin = event => {\n    event.preventDefault();\n\n    if (!showOpenAdmin) {\n      return;\n    }\n    window.open(\"/admin\", \"_blank\");\n  };\n\n  handleReset = event => {\n    event.preventDefault();\n\n    if (!showOpenAltPlayer) {\n      return;\n    }\n    removePlayerId();\n  };\n\n  handleOpenAltPlayer = event => {\n    event.preventDefault();\n\n    if (!showReset) {\n      return;\n    }\n\n    // check to see if a playerId is required\n    const { playerIdParam, playerIdParamExclusive } = Meteor.settings.public;\n    const playerIdParamRequired = playerIdParam && playerIdParamExclusive;\n\n    const randPlayerIdKey = Math.random()\n      .toString(36)\n      .substring(2, 15);\n\n    // if playerId is required, add that to URL\n    // otherwise, produce URL with just playerIdKey\n    if (playerIdParamRequired) {\n      const randId = Math.random()\n        .toString(36)\n        .substring(2, 15);\n      window.open(\n        `/?playerIdKey=${randPlayerIdKey}&${playerIdParam}=${randId}`,\n        \"_blank\"\n      );\n    } else {\n      window.open(`/?playerIdKey=${randPlayerIdKey}`, \"_blank\");\n    }\n  };\n\n  render() {\n    const {\n      loading,\n      renderPublic,\n      playerIdKey,\n      Header,\n      NewPlayer: CustomNewPlayer,\n      About,\n      NoBatch,\n      ...rest\n    } = this.props;\n    const { player } = rest;\n    // const AboutComp = About || AboutOriginal;\n    const AboutComp = About || null;\n    const NoBatchComp = NoBatch || NoBatchOriginal;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (!renderPublic) {\n      return <NoBatchComp />;\n    }\n\n    const adminProps = {\n      showOpenAltPlayer: showOpenAltPlayer,\n      onOpenAltPlayer: this.handleOpenAltPlayer,\n      showReset: showReset,\n      onReset: this.handleReset,\n      showReset: showReset,\n      about: AboutComp,\n      showAbout: Boolean(AboutComp),\n      onToggleAbout: this.handleToggleAbout\n    };\n\n    let content;\n    if (!player) {\n      content = (\n        <CoreWrapper>\n          <NewPlayer\n            {...rest}\n            {...adminProps}\n            CustomNewPlayer={CustomNewPlayer}\n          />\n        </CoreWrapper>\n      );\n    } else {\n      content = <GameContainer {...rest} {...adminProps} />;\n    }\n\n    let title = loadDocTitle;\n    if (playerIdKey) {\n      title += ` (${playerIdKey})`;\n    }\n\n    return (\n      <div className=\"grid\">\n        <Helmet>\n          <title>{title}</title>\n        </Helmet>\n\n        {Header !== undefined ? (\n          <Header {...adminProps} />\n        ) : (\n          <div className=\"header navbar\">\n            <div className=\"navbarGroup\">\n              <NavbarHeading>\n                <Link\n                  className={[\n                    Classes.BUTTON,\n                    Classes.LARGE,\n                    Classes.MINIMAL,\n                    Classes.BUTTON\n                  ].join(\" \")}\n                  to=\"/\"\n                >\n                  <Icon icon={IconNames.EXCHANGE} />\n                  <span className={Classes.BUTTON_TEXT}>Empirica</span>\n                </Link>\n              </NavbarHeading>\n            </div>\n\n            <div className=\"navbarGroup\">\n              {showOpenAltPlayer ? (\n                <Button\n                  text=\"New Player\"\n                  minimal\n                  icon={IconNames.PERSON}\n                  onClick={this.handleOpenAltPlayer}\n                />\n              ) : (\n                \"\"\n              )}\n              {showReset ? (\n                <Button\n                  text=\"Reset current session\"\n                  minimal\n                  icon={IconNames.REPEAT}\n                  onClick={this.handleReset}\n                />\n              ) : (\n                \"\"\n              )}\n\n              {showOpenAdmin ? (\n                <Button\n                  text=\"Open Admin\"\n                  minimal\n                  icon={IconNames.PLAY}\n                  onClick={this.handleOpenAdmin}\n                />\n              ) : (\n                \"\"\n              )}\n\n              {AboutComp ? (\n                <>\n                  <Button\n                    text=\"About\"\n                    minimal\n                    icon={IconNames.info_sign}\n                    onClick={this.handleToggleAbout}\n                  />\n\n                  <Dialog\n                    icon={IconNames.INBOX}\n                    isOpen={this.state.isAboutOpen}\n                    onClose={this.handleToggleAbout}\n                    title=\"About\"\n                  >\n                    <div className={Classes.DIALOG_BODY}>\n                      <AboutComp />\n                    </div>\n\n                    <div className={Classes.DIALOG_FOOTER}>\n                      <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                        <Button\n                          text=\"Close\"\n                          intent={Intent.PRIMARY}\n                          onClick={this.handleToggleAbout}\n                        />\n                      </div>\n                    </div>\n                  </Dialog>\n                </>\n              ) : null}\n            </div>\n          </div>\n        )}\n\n        <main>{content}</main>\n      </div>\n    );\n  }\n}\n"]},"sourceType":"module","hash":"bbf2601d7ff57729f5b63a433b8032e308ce584a"}
