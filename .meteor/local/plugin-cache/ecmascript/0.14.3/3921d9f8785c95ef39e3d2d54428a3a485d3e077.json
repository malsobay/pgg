{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/tilenbabnik/Desktop/pgg/packages/tmeasday:check-npm-versions/check-npm-versions.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"packages/tmeasday:check-npm-versions/check-npm-versions.js","filename":"/Users/tilenbabnik/Desktop/pgg/packages/tmeasday:check-npm-versions/check-npm-versions.js","passPerPreset":false,"envName":"development","cwd":"/Users/tilenbabnik/Desktop/pgg","root":"/Users/tilenbabnik/Desktop/pgg","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.9.2","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/tilenbabnik/Desktop/pgg/packages/tmeasday:check-npm-versions/check-npm-versions.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/tmeasday:check-npm-versions/check-npm-versions.js"}},"code":"!function (module1) {\n  module1.export({\n    checkNpmVersions: function () {\n      return checkNpmVersions;\n    }\n  });\n  var semver;\n  module1.link(\"semver\", {\n    \"default\": function (v) {\n      semver = v;\n    }\n  }, 0);\n\n  // Returns:\n  //   - true      if a version of the package in the range is installed\n  //   - false     if no version is installed\n  //   - version#  if incompatible version is installed\n  var compatibleVersionIsInstalled = function (name, range) {\n    try {\n      var installedVersion = require(name + \"/package.json\").version;\n\n      if (semver.satisfies(installedVersion, range)) {\n        return true;\n      } else {\n        return installedVersion;\n      }\n    } catch (e) {\n      // XXX add something to the tool to make this more reliable\n      var message = e.toString(); // One message comes out of the install npm package the other from npm directly\n\n      if (message.match(\"Cannot find module\") || message.match(\"Can't find npm module\")) {\n        return false;\n      } else {\n        throw e;\n      }\n    }\n  };\n\n  var checkNpmVersions = function (packages, packageName) {\n    var failures = {};\n    Object.keys(packages).forEach(function (name) {\n      var range = packages[name];\n      var failure = compatibleVersionIsInstalled(name, range);\n\n      if (failure !== true) {\n        failures[name] = failure;\n      }\n    });\n\n    if (Object.keys(failures).length === 0) {\n      return true;\n    }\n\n    var errors = [];\n    Object.keys(failures).forEach(function (name) {\n      var installed = failures[name];\n      var requirement = name + \"@\" + packages[name];\n\n      if (installed) {\n        errors.push(\" - \" + name + \"@\" + installed + \" installed, \" + requirement + \" needed\");\n      } else {\n        errors.push(\" - \" + name + \"@\" + packages[name] + \" not installed.\");\n      }\n    });\n    var qualifier = packageName ? \"(for \" + packageName + \") \" : '';\n    console.warn(\"WARNING: npm peer requirements \" + qualifier + \"not installed:\\n\" + errors.join('\\n') + \"\\n\\nRead more about installing npm peer dependencies:\\n  http://guide.meteor.com/using-packages.html#peer-npm-dependencies\\n\");\n  };\n}.call(this, module);","map":{"version":3,"sources":["packages/tmeasday:check-npm-versions/check-npm-versions.js"],"names":["module1","export","checkNpmVersions","semver","link","v","compatibleVersionIsInstalled","name","range","installedVersion","require","version","satisfies","e","message","toString","match","packages","packageName","failures","Object","keys","forEach","failure","length","errors","installed","requirement","push","qualifier","console","warn","join"],"mappings":";AAAAA,EAAAA,OAAO,CAACC,MAAR,CAAe;AAACC,IAAAA,gBAAgB,EAAC,YAAU;AAAC,aAAOA,gBAAP;AAAwB;AAArD,GAAf;AAAuE,MAAIC,MAAJ;AAAWH,EAAAA,OAAO,CAACI,IAAR,CAAa,QAAb,EAAsB;AAAC,eAAQ,UAASC,CAAT,EAAW;AAACF,MAAAA,MAAM,GAACE,CAAP;AAAS;AAA9B,GAAtB,EAAsD,CAAtD;;AAElF;AACA;AACA;AACA;AACA,MAAMC,4BAA4B,GAAG,UAACC,IAAD,EAAOC,KAAP,EAAiB;AACpD,QAAI;AACF,UAAMC,gBAAgB,GAAGC,OAAO,CAAIH,IAAJ,mBAAP,CAAgCI,OAAzD;;AACA,UAAIR,MAAM,CAACS,SAAP,CAAiBH,gBAAjB,EAAmCD,KAAnC,CAAJ,EAA+C;AAC7C,eAAO,IAAP;AACD,OAFD,MAEO;AACL,eAAOC,gBAAP;AACD;AACF,KAPD,CAOE,OAAOI,CAAP,EAAU;AACV;AACA,UAAMC,OAAO,GAAGD,CAAC,CAACE,QAAF,EAAhB,CAFU,CAGV;;AACA,UAAID,OAAO,CAACE,KAAR,CAAc,oBAAd,KAAuCF,OAAO,CAACE,KAAR,CAAc,uBAAd,CAA3C,EAAmF;AACjF,eAAO,KAAP;AACD,OAFD,MAEO;AACL,cAAMH,CAAN;AACD;AACF;AACF,GAlBD;;AAoBO,MAAMX,gBAAgB,GAAG,UAACe,QAAD,EAAWC,WAAX,EAA2B;AACzD,QAAMC,QAAQ,GAAG,EAAjB;AAEAC,IAAAA,MAAM,CAACC,IAAP,CAAYJ,QAAZ,EAAsBK,OAAtB,CAA8B,UAACf,IAAD,EAAU;AACtC,UAAMC,KAAK,GAAGS,QAAQ,CAACV,IAAD,CAAtB;AACA,UAAMgB,OAAO,GAAGjB,4BAA4B,CAACC,IAAD,EAAOC,KAAP,CAA5C;;AAEA,UAAIe,OAAO,KAAK,IAAhB,EAAsB;AACpBJ,QAAAA,QAAQ,CAACZ,IAAD,CAAR,GAAiBgB,OAAjB;AACD;AACF,KAPD;;AASA,QAAIH,MAAM,CAACC,IAAP,CAAYF,QAAZ,EAAsBK,MAAtB,KAAiC,CAArC,EAAwC;AACtC,aAAO,IAAP;AACD;;AAED,QAAMC,MAAM,GAAG,EAAf;AAEAL,IAAAA,MAAM,CAACC,IAAP,CAAYF,QAAZ,EAAsBG,OAAtB,CAA8B,UAACf,IAAD,EAAU;AACtC,UAAMmB,SAAS,GAAGP,QAAQ,CAACZ,IAAD,CAA1B;AACA,UAAMoB,WAAW,GAAMpB,IAAN,SAAcU,QAAQ,CAACV,IAAD,CAAvC;;AAEA,UAAImB,SAAJ,EAAe;AACbD,QAAAA,MAAM,CAACG,IAAP,SAAkBrB,IAAlB,SAA0BmB,SAA1B,oBAAkDC,WAAlD;AACD,OAFD,MAEO;AACLF,QAAAA,MAAM,CAACG,IAAP,SAAkBrB,IAAlB,SAA0BU,QAAQ,CAACV,IAAD,CAAlC;AACD;AACF,KATD;AAWA,QAAMsB,SAAS,GAAGX,WAAW,aAAWA,WAAX,UAA6B,EAA1D;AACAY,IAAAA,OAAO,CAACC,IAAR,qCAA+CF,SAA/C,wBACAJ,MAAM,CAACO,IAAP,CAAY,IAAZ,CADA;AAMD,GApCM","sourcesContent":["import semver from 'semver';\n\n// Returns:\n//   - true      if a version of the package in the range is installed\n//   - false     if no version is installed\n//   - version#  if incompatible version is installed\nconst compatibleVersionIsInstalled = (name, range) => {\n  try {\n    const installedVersion = require(`${name}/package.json`).version;\n    if (semver.satisfies(installedVersion, range)) {\n      return true;\n    } else {\n      return installedVersion;\n    }\n  } catch (e) {\n    // XXX add something to the tool to make this more reliable\n    const message = e.toString();\n    // One message comes out of the install npm package the other from npm directly\n    if (message.match(\"Cannot find module\") || message.match(\"Can't find npm module\")) {\n      return false;\n    } else {\n      throw e;\n    }\n  }\n};\n\nexport const checkNpmVersions = (packages, packageName) => {\n  const failures = {};\n\n  Object.keys(packages).forEach((name) => {\n    const range = packages[name];\n    const failure = compatibleVersionIsInstalled(name, range);\n\n    if (failure !== true) {\n      failures[name] = failure;\n    }\n  });\n\n  if (Object.keys(failures).length === 0) {\n    return true;\n  }\n\n  const errors = [];\n\n  Object.keys(failures).forEach((name) => {\n    const installed = failures[name];\n    const requirement = `${name}@${packages[name]}`;\n\n    if (installed) {\n      errors.push(` - ${name}@${installed} installed, ${requirement} needed`);\n    } else {\n      errors.push(` - ${name}@${packages[name]} not installed.`);\n    }\n  });\n\n  const qualifier = packageName ? `(for ${packageName}) ` : '';\n  console.warn(`WARNING: npm peer requirements ${qualifier}not installed:\n${errors.join('\\n')}\n\nRead more about installing npm peer dependencies:\n  http://guide.meteor.com/using-packages.html#peer-npm-dependencies\n`);\n};\n"]},"sourceType":"module","hash":"3921d9f8785c95ef39e3d2d54428a3a485d3e077"}
