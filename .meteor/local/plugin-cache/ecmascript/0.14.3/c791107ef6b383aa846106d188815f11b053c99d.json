{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/tilenbabnik/Desktop/pgg/packages/empirica:core/ui/components/Login.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"packages/empirica:core/ui/components/Login.jsx","filename":"/Users/tilenbabnik/Desktop/pgg/packages/empirica:core/ui/components/Login.jsx","passPerPreset":false,"envName":"development","cwd":"/Users/tilenbabnik/Desktop/pgg","root":"/Users/tilenbabnik/Desktop/pgg","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.9.2","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/tilenbabnik/Desktop/pgg/packages/empirica:core/ui/components/Login.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/empirica:core/ui/components/Login.jsx"}},"code":"var _createSuper;\n\nmodule.link(\"@babel/runtime/helpers/createSuper\", {\n  default: function (v) {\n    _createSuper = v;\n  }\n}, 0);\n\nvar _inheritsLoose;\n\nmodule.link(\"@babel/runtime/helpers/inheritsLoose\", {\n  default: function (v) {\n    _inheritsLoose = v;\n  }\n}, 1);\nmodule.export({\n  \"default\": function () {\n    return Login;\n  }\n});\nvar Button, ControlGroup, InputGroup, Intent;\nmodule.link(\"@blueprintjs/core\", {\n  Button: function (v) {\n    Button = v;\n  },\n  ControlGroup: function (v) {\n    ControlGroup = v;\n  },\n  InputGroup: function (v) {\n    InputGroup = v;\n  },\n  Intent: function (v) {\n    Intent = v;\n  }\n}, 0);\nvar IconNames;\nmodule.link(\"@blueprintjs/icons\", {\n  IconNames: function (v) {\n    IconNames = v;\n  }\n}, 1);\nvar PropTypes;\nmodule.link(\"prop-types\", {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 2);\nvar React;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  }\n}, 3);\nvar AlertToaster;\nmodule.link(\"./Toasters.jsx\", {\n  AlertToaster: function (v) {\n    AlertToaster = v;\n  }\n}, 4);\n\nvar Login = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Login, _React$Component);\n\n  var _super = _createSuper(Login);\n\n  function Login() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      username: \"admin\",\n      password: \"\"\n    };\n\n    _this.onChange = function (event) {\n      var _this$setState;\n\n      var _event$currentTarget = event.currentTarget,\n          value = _event$currentTarget.value,\n          name = _event$currentTarget.name;\n\n      _this.setState((_this$setState = {}, _this$setState[name] = value, _this$setState));\n    };\n\n    _this.handleForm = function (event) {\n      event.preventDefault();\n      var _this$state = _this.state,\n          username = _this$state.username,\n          password = _this$state.password;\n      Meteor.loginWithPassword(username, password, function (err) {\n        if (err) {\n          AlertToaster.show({\n            message: String(err)\n          });\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  var _proto = Login.prototype;\n\n  _proto.componentWillUnmount = function () {\n    function componentWillUnmount() {\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n      }\n    }\n\n    return componentWillUnmount;\n  }();\n\n  _proto.componentDidMount = function () {\n    function componentDidMount() {\n      var _this2 = this;\n\n      var redirecting = this.redirectLoggedIn(this.props);\n\n      if (redirecting) {\n        return;\n      }\n\n      this.timeout = setTimeout(function () {\n        _this2.timeout = null;\n        var field = document.querySelector(\"#password\");\n\n        if (field) {\n          field.focus();\n        }\n      }, 100);\n    }\n\n    return componentDidMount;\n  }();\n\n  _proto.componentWillReceiveProps = function () {\n    function componentWillReceiveProps(nextProps) {\n      this.redirectLoggedIn(nextProps);\n    }\n\n    return componentWillReceiveProps;\n  }();\n\n  _proto.redirectLoggedIn = function () {\n    function redirectLoggedIn(props) {\n      var user = props.user,\n          loggingIn = props.loggingIn,\n          adminPath = props.adminPath;\n      var router = this.context.router;\n\n      if (!loggingIn && user) {\n        router.history.push(adminPath || \"/admin\");\n        return true;\n      }\n    }\n\n    return redirectLoggedIn;\n  }();\n\n  _proto.render = function () {\n    function render() {\n      var _this$props = this.props,\n          user = _this$props.user,\n          loggingIn = _this$props.loggingIn;\n      var _this$state2 = this.state,\n          username = _this$state2.username,\n          password = _this$state2.password;\n\n      if (loggingIn || user) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"login\"\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.handleForm\n      }, /*#__PURE__*/React.createElement(\"h1\", null, \"Log in\"), /*#__PURE__*/React.createElement(ControlGroup, {\n        vertical: true\n      }, /*#__PURE__*/React.createElement(InputGroup, {\n        large: true,\n        leftIcon: IconNames.PERSON,\n        name: \"username\",\n        id: \"username\",\n        placeholder: \"Username\",\n        value: username,\n        onChange: this.onChange,\n        autoComplete: \"off\"\n      }), /*#__PURE__*/React.createElement(InputGroup, {\n        large: true,\n        leftIcon: IconNames.LOCK,\n        type: \"password\",\n        name: \"password\",\n        id: \"password\",\n        placeholder: \"Password\",\n        value: password,\n        onChange: this.onChange\n      }), /*#__PURE__*/React.createElement(Button, {\n        text: \"Login\",\n        large: true,\n        intent: Intent.PRIMARY,\n        type: \"submit\"\n      }))), Meteor.isDevelopment ? /*#__PURE__*/React.createElement(\"p\", null, \"If you have not yet set a password, you can find an autogenerated password in your application's logs.\") : \"\");\n    }\n\n    return render;\n  }();\n\n  return Login;\n}(React.Component);\n\nLogin.propTypes = {\n  user: PropTypes.object,\n  // Current meteor user\n  loggingIn: PropTypes.bool,\n  // Current meteor user logging in\n  loading: PropTypes.bool // Subscription status\n\n};\nLogin.contextTypes = {\n  router: PropTypes.object\n};","map":{"version":3,"sources":["packages/empirica:core/ui/components/Login.jsx"],"names":["_createSuper","module","link","default","v","_inheritsLoose","export","Login","Button","ControlGroup","InputGroup","Intent","IconNames","PropTypes","React","AlertToaster","state","username","password","onChange","event","currentTarget","value","name","setState","handleForm","preventDefault","Meteor","loginWithPassword","err","show","message","String","componentWillUnmount","timeout","clearTimeout","componentDidMount","redirecting","redirectLoggedIn","props","setTimeout","field","document","querySelector","focus","componentWillReceiveProps","nextProps","user","loggingIn","adminPath","router","context","history","push","render","PERSON","LOCK","PRIMARY","isDevelopment","Component","propTypes","object","bool","loading","contextTypes"],"mappings":"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","sourcesContent":["import { Button, ControlGroup, InputGroup, Intent } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { AlertToaster } from \"./Toasters.jsx\";\n\nexport default class Login extends React.Component {\n  state = { username: \"admin\", password: \"\" };\n\n  componentWillUnmount() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n  }\n\n  componentDidMount() {\n    const redirecting = this.redirectLoggedIn(this.props);\n    if (redirecting) {\n      return;\n    }\n    this.timeout = setTimeout(() => {\n      this.timeout = null;\n      const field = document.querySelector(\"#password\");\n      if (field) {\n        field.focus();\n      }\n    }, 100);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.redirectLoggedIn(nextProps);\n  }\n\n  onChange = event => {\n    const { value, name } = event.currentTarget;\n    this.setState({ [name]: value });\n  };\n\n  redirectLoggedIn(props) {\n    const { user, loggingIn, adminPath } = props;\n    const { router } = this.context;\n\n    if (!loggingIn && user) {\n      router.history.push(adminPath || `/admin`);\n      return true;\n    }\n  }\n\n  handleForm = event => {\n    event.preventDefault();\n    const { username, password } = this.state;\n    Meteor.loginWithPassword(username, password, err => {\n      if (err) {\n        AlertToaster.show({ message: String(err) });\n      }\n    });\n  };\n\n  render() {\n    const { user, loggingIn } = this.props;\n    const { username, password } = this.state;\n\n    if (loggingIn || user) {\n      return null;\n    }\n\n    return (\n      <div className=\"login\">\n        <form onSubmit={this.handleForm}>\n          <h1>Log in</h1>\n\n          <ControlGroup vertical>\n            <InputGroup\n              large\n              leftIcon={IconNames.PERSON}\n              name=\"username\"\n              id=\"username\"\n              placeholder=\"Username\"\n              value={username}\n              onChange={this.onChange}\n              autoComplete={\"off\"}\n            />\n            <InputGroup\n              large\n              leftIcon={IconNames.LOCK}\n              type=\"password\"\n              name=\"password\"\n              id=\"password\"\n              placeholder=\"Password\"\n              value={password}\n              onChange={this.onChange}\n            />\n            <Button text=\"Login\" large intent={Intent.PRIMARY} type=\"submit\" />\n          </ControlGroup>\n        </form>\n\n        {Meteor.isDevelopment ? (\n          <p>\n            If you have not yet set a password, you can find an autogenerated\n            password in your application's logs.\n          </p>\n        ) : (\n          \"\"\n        )}\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  user: PropTypes.object, // Current meteor user\n  loggingIn: PropTypes.bool, // Current meteor user logging in\n  loading: PropTypes.bool // Subscription status\n};\n\nLogin.contextTypes = {\n  router: PropTypes.object\n};\n"]},"sourceType":"module","hash":"c791107ef6b383aa846106d188815f11b053c99d"}
