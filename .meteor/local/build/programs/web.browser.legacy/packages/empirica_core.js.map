{"version":3,"sources":["meteor://ðŸ’»app/packages/empirica:core/client.js","meteor://ðŸ’»app/packages/empirica:core/gameLobby-lock.js","meteor://ðŸ’»app/packages/empirica:core/shared.js","meteor://ðŸ’»app/packages/empirica:core/api/default-schemas.js","meteor://ðŸ’»app/packages/empirica:core/api/schema-helpers.js","meteor://ðŸ’»app/packages/empirica:core/api/batches/batches.js","meteor://ðŸ’»app/packages/empirica:core/api/batches/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/batches/status-schema.js","meteor://ðŸ’»app/packages/empirica:core/api/factor-types/factor-types.js","meteor://ðŸ’»app/packages/empirica:core/api/factor-types/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/factors/factors.js","meteor://ðŸ’»app/packages/empirica:core/api/factors/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/game-lobbies/game-lobbies.js","meteor://ðŸ’»app/packages/empirica:core/api/game-lobbies/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/games/games.js","meteor://ðŸ’»app/packages/empirica:core/api/games/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/lobby-configs/lobby-configs.js","meteor://ðŸ’»app/packages/empirica:core/api/lobby-configs/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/player-inputs/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/player-inputs/player-inputs.js","meteor://ðŸ’»app/packages/empirica:core/api/player-logs/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/player-logs/player-logs.js","meteor://ðŸ’»app/packages/empirica:core/api/player-rounds/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/player-rounds/player-rounds.js","meteor://ðŸ’»app/packages/empirica:core/api/player-stages/augment.js","meteor://ðŸ’»app/packages/empirica:core/api/player-stages/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/player-stages/player-stages.js","meteor://ðŸ’»app/packages/empirica:core/api/players/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/players/players.js","meteor://ðŸ’»app/packages/empirica:core/api/rounds/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/rounds/rounds.js","meteor://ðŸ’»app/packages/empirica:core/api/stages/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/stages/stages.js","meteor://ðŸ’»app/packages/empirica:core/api/treatments/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/treatments/treatments.js","meteor://ðŸ’»app/packages/empirica:core/lib/componentChecker.js","meteor://ðŸ’»app/packages/empirica:core/lib/counters.js","meteor://ðŸ’»app/packages/empirica:core/lib/monitor.js","meteor://ðŸ’»app/packages/empirica:core/lib/utils.js","meteor://ðŸ’»app/packages/empirica:core/startup/both/index.js","meteor://ðŸ’»app/packages/empirica:core/startup/client/accounts.js","meteor://ðŸ’»app/packages/empirica:core/startup/client/idle.js","meteor://ðŸ’»app/packages/empirica:core/startup/client/index.js","meteor://ðŸ’»app/packages/empirica:core/startup/client/style.js","meteor://ðŸ’»app/packages/empirica:core/ui/components/About.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Admin.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Breadcrumb.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Centered.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Consent.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/DelayedDisplay.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/ExitSteps.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Game.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/GameLobby.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Heading.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/HelpTooltip.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Helpers.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/InstructionSteps.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Loading.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/LoadingInline.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Login.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/NewPlayer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/NewPlayerForm.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/NoBatch.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Public.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/StageTimeWrapper.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Toasters.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/WaitingForServer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminBatch.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminBatchGame.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminBatchGames.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminBatches.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminExport.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminFactor.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminFactors.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminGames.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminHeading.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminLobbyConfig.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminLobbyConfigs.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminNewBatch.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminNewFactor.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminNewFactorType.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminNewLobbyConfig.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminNewTreatment.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminPlayers.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminTreatment.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminTreatments.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/AuthorizedContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/GameContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/GameLobbyContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/IdentifiedContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/PublicContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/admin/AdminBatchGameContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/admin/AdminBatchGamesContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/admin/AdminBatchesContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/admin/AdminFactorsContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/admin/AdminLobbyConfigsContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/admin/AdminPlayersContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/admin/AdminTreatmentsContainer.jsx"],"names":["module","export","StageTimeWrapper","Centered","AlertToaster","ConsentButton","React","link","v","BrowserRouter","Route","Switch","isReactComponents","About","Admin","Consent","Login","NewPlayer","NoBatch","AuthorizedContainer","IdentifiedContainer","PublicContainer","config","exitSteps","introSteps","Empirica","about","AboutComp","noBatch","NoBatchComp","consent","ConsentComp","newPlayer","NewPlayerComp","round","RoundComp","Round","header","HeaderComp","Header","lobby","LobbyComp","Lobby","breadcrumb","BreadcrumbComp","Breadcrumb","waiting","WaitingComp","Waiting","func","_","isFunction","Error","results","apply","arguments","console","error","routes","appComp","adminComp","loginComp","loginPath","adminPath","exportDefault","gameLobbyLock","sharedNamespace","IdSchema","ArchivedSchema","DebugModeSchema","TimestampSchema","CreatorSchema","UserDataSchema","PolymorphicSchema","HasManyByRef","BelongsTo","SimpleSchema","inflection","_id","type","String","optional","regEx","RegEx","Id","archivedById","autoValue","field","isSet","userId","undefined","archivedAt","Date","label","debugMode","Boolean","defaultValue","createdAt","index","isInsert","isUpsert","$setOnInsert","unset","updatedAt","isUpdate","createdById","isFromTrustedCode","updatedById","data","Object","blackbox","collTypes","objectType","allowedValues","objectId","coll","camel","camelize","singularize","titleize","fieldName","Array","required","singular","Collection2","extendOptions","on","collection","ss","version","messageBox","messages","scopedUnique","addValidator","def","definition","uniqueFieldScope","val","value","key","find","count","en","insertNotAllowed","updateNotAllowed","schemaDenyValidator","denyInsert","denyUpdate","_createSuper","default","_inheritsLoose","Batches","maxGamesCount","assignmentTypes","statusSchema","Treatments","Counter","BatchesCollection","insert","doc","callback","inc","Mongo","Collection","helpers","gameCount","assignment","simpleConfig","completeGameCount","reduce","completeConfig","treatments","sum","t","duplicate","status","simple","complete","schema","Integer","full","runningAt","finishedAt","custom","min","max","minCount","maxCount","Meteor","isDevelopment","settings","public","debug_gameDebugMode","extend","attachSchema","createBatch","duplicateBatch","updateBatch","updateBatchStatus","ValidatedMethod","GameLobbies","Games","name","validate","omit","validator","run","batch","autoConvert","filter","findOne","archived","$set","$unset","modifier","keys","length","update","pick","batchId","multi","setBatchInDebugMode","FactorTypes","requiredTypes","types","unique","description","Number","notUnique","createFactorType","updateFactorType","Factors","initialValues","oneOf","factorType","factorTypeId","forEach","typeConversion","factorTypeName","fullLabel","valueValidation","simpleSchmemaType","fieldSchema","newContext","isValid","validationErrors","errors","addValidationErrors","isClient","slice","createFactor","updateFactor","handleFactorValueErrorMessage","factor","map","e","join","Players","players","$in","playerIds","fetch","treatment","treatmentId","availableCount","timeoutStartedAt","timedOutAt","endReason","queuedPlayerIds","updateGameLobbyData","earlyExitGameLobby","shared","gameLobbyId","append","noCallback","gameLobby","JSON","parse","$push","trimStrings","removeEmptyStrings","isServer","callOnChange","conn","connection","prevValue","exitReason","exitStatus","exitAt","availableLobby","$and","gameLobbyIds","Stages","Rounds","GamesCollection","estFinishedTime","currentStageId","updateGameData","earlyExitGame","gameId","game","log","playerId","LobbyConfigs","displayName","timeoutType","base","timeoutInSeconds","details","timeoutStrategy","timeoutBots","extendCount","timeoutTypes","timeoutStrategies","maxTimeoutInSeconds","defaultTimeoutInSeconds","createLobbyConfig","updateLobbyConfig","lobbyConfig","addPlayerInput","PlayerInputs","rawData","player","playerLog","PlayerLogs","stageId","roundId","jsonData","updatePlayerRoundData","PlayerRounds","playerRoundId","playerRound","augmentGameLobby","augmentPlayerLobby","augmentPlayer","augmentPlayerStageRound","stubPlayerStageRound","augmentGameStageRound","stubStageRound","updatePlayerData","earlyExitPlayer","earlyExitPlayerLobby","updateRoundData","updateStageData","submitPlayerStage","updatePlayerStageData","PlayerStages","gameSet","call","stringify","gameLobbySet","playerSet","stageSet","playerStageId","stageSubmit","cb","roundSet","set","obj","k","push","nullFunc","get","stage","exit","reason","playerStage","submit","err","submitted","submittedAt","end","callOnSubmit","_regeneratorRuntime","createPlayer","playerReady","markPlayerExitStepDone","extendPlayerTimeoutWait","endPlayerTimeoutWait","retireSinglePlayer","retireGameFullPlayers","playerWasRetired","updatePlayerStatus","exitStatuses","sleep","weightedRandom","id","urlParams","sort","existing","lobbies","$exists","lobbyPool","l","weigthedLobbyPool","weight","$addToSet","skipInstructions","readyAt","assignToLobby","includes","lobbyUpdated","lobbyConfigId","timeoutWaitCount","stepName","exitStepsDone","$inc","$pull","currentPlayer","onlinePlayers","retiredAt","timestamp","toISOString","retiredReason","i","idle","lastActivityAt","playerIdConn","playerIdForConn","PlayersCollection","online","lastLogin","bot","moment","stagePaddingDuration","duration","startTimeAt","durationInSeconds","createTreatment","updateTreatment","factorIds","requiredFactorTypes","createdFactors","createdFactorTypes","f","factors","c","query","factorsObject","addDocValidator","$size","$all","module1","isClassComponent","component","prototype","isReactComponent","isFunctionComponent","isElement","element","isValidElement","isDOMTypeElement","isCompositeTypeElement","exports","incset","raw","rawCollection","findAndModify","wrapAsync","op","amount","res","upsert","ActivityMonitor","Tracker","TimeSync","idleThreshold","checkInterval","monitorInterval","lastActivityTime","serverTime","idleDep","Dependency","activityDep","focused","document","hasFocus","monitor","hasActivity","now","nonreactive","changed","newIdleness","trueMonitor","bind","signalActivity","throttle","signalInactivity","startup","window","addEventListener","setInterval","start","isIdle","depend","isActive","isNaN","getFunctionParameters","ms","Promise","resolve","setTimeout","values","samples","hasOwnProperty","j","Math","floor","random","components","isArray","STRIP_COMMENTS","ARGUMENT_NAMES","fnStr","toString","replace","split","argsList","indexOf","result","match","stripped","resetToken","originalSetItem","_localStorage","setItem","defer","originalRemoveItem","removeItem","loginToken","getItem","loginTokenExpires","setToken","expires","cookie","toUTCString","getPlayerId","autorun","newPlayerId","FocusStyleManager","loggingEnabled","onlyShowFocusOnTabs","render","Component","Alert","Button","Classes","Divider","Intent","Menu","MenuItem","Navbar","NavbarDivider","NavbarGroup","NavbarHeading","Popover","IconNames","PropTypes","Helmet","NavLink","AdminBatchesContainer","AdminFactorsContainer","AdminLobbyConfigsContainer","AdminPlayersContainer","AdminTreatmentsContainer","AdminExport","AdminGames","withStaticProps","SuccessToaster","configurationPaths","NavBarLink","path","exact","ACTIVE","BUTTON","MINIMAL","props","handleConfigImport","uploadRef","current","click","onImportConfigFileSelected","event","file","currentTarget","files","show","message","setState","importing","r","FileReader","onload","text","target","size","readAsText","handleConfigExport","exporting","yaml","ts","format","filename","a","createElement","setAttribute","encodeURIComponent","style","display","body","appendChild","removeChild","setMode","mode","router","context","history","setBodyDark","classList","add","DARK","remove","handleOpenApp","open","handleLogout","logout","handleResetGames","isOpenResetGames","resetDatabaseIsActived","handleResetApp","isOpenResetApp","location","pathname","state","createRef","componentDidMount","redirectLoggedOut","componentWillReceiveProps","nextProps","debug_resetDatabase","user","loggingIn","isConfigMode","TEXT_MUTED","IMPORT","EXPORT","PLAY","COG","WARNING","ERASER","DANGER","TRASH","LOG_OUT","retired","propTypes","object","bool","loading","contextTypes","Crumb","BREADCRUMBS","stages","s","disabled","BREADCRUMB_CURRENT","children","ConsentButtonContext","onConsent","consentCallback","TICK","SUCCESS","DelayedDisplay","delay","visible","timeout","componentWillUnmount","clearTimeout","_extends","_assertThisInitialized","ExitSteps","NonIdealState","errExitStepMissingName","errExitStepDups","dups","onSubmit","steps","Step","unfilteredSteps","stepNames","trim","sname","isEmpty","alert","failed","uniq","counts","n","compact","done","renderDefault","hasNext","_objectSpread","_objectWithoutProperties","Game","GameLobby","GameLobbyContainer","DefaultBreadcrumb","InstructionSteps","Loading","WaitingForServer","DelayedWaitingForServer","DelayedGameLobby","playerReadyClicked","shouldComponentUpdate","nextState","isEqual","rest","started","timedOut","nativeEvent","encoded","gameLobbyProps","content","BC","CoreWrapper","handleWaitLonger","handleExitNow","total","exisiting","showExtensionAlert","TIME","PRIMARY","Heading","H1","H2","H3","H4","H5","H6","Icon","level","icon","iconSize","className","classNames","HEADING","Tooltip","Position","HelpTooltip","TOP","DevNote","block","WrappedComponent","onNext","onDone","currentIntroStep","onPrev","resetIntroSteps","setIntroStepIndex","componentWillMount","noInstruction","hasPrev","conds","introPlayer","LoadingInline","ControlGroup","InputGroup","username","password","onChange","handleForm","preventDefault","loginWithPassword","redirecting","redirectLoggedIn","querySelector","focus","PERSON","LOCK","_createForOfIteratorHelperLoose","setPlayerId","NewPlayerForm","playerIdParam","createContext","consented","handleConsent","playerFromIdParam","handleNewPlayer","searchParams","URL","entries","pair","componentDidUpdate","prevProps","prevState","idField","attemptingAutoLogin","CustomNewPlayer","Form","FormGroup","handleUpdate","handleSubmit","INPUT","KEY_ENTER","Link","ISSUE","Public","Dialog","GameContainer","removePlayerId","NoBatchOriginal","showOpenAdmin","showOpenAltPlayer","debug_resetSession","showReset","debug_newPlayer","loadDocTitle","title","isAboutOpen","handleToggleAbout","handleOpenAdmin","handleReset","handleOpenAltPlayer","playerIdParamExclusive","playerIdParamRequired","randPlayerIdKey","substring","randId","renderPublic","playerIdKey","adminProps","onOpenAltPlayer","onReset","showAbout","onToggleAbout","LARGE","EXCHANGE","BUTTON_TEXT","REPEAT","info_sign","INBOX","DIALOG_BODY","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","withTracker","isSameOrAfter","endTimeAt","ended","roundOver","remainingSeconds","diff","elapsedSeconds","Toaster","toaster","create","position","iconName","intent","AUTOMATIC_UPDATES","AdminBatch","ButtonGroup","Tag","AdminBatchGamesContainer","newIsOpen","detailsVisible","toggleDetails","handleArchive","handleStatusChange","ctrlKey","metaKey","handleDuplicate","textAlign","actions","STOP","BOX","SMALL","DUPLICATE","tt","statusIntent","statusMinimal","detailsVisibleClass","detailsClass","fromNow","AdminBatchGame","rounds","currentRound","currentStage","notReadyPlayers","bots","p","playerCountFactor","playerCount","botsFactor","botsCount","Random","statusMsg","showCancelButton","color","AdminBatchGames","HTMLTable","AdminBatchGameContainer","games","gameLobbies","g","AdminBatches","Callout","AdminPageHeader","AdminNewBatch","batches","lobbyConfigs","LAYERS","HTMLSelect","Checkbox","includePii","handleChange","checked","handleExport","toLowerCase","AdminFactor","EditableText","handleNameChange","handleNameConfirm","initialName","componentWillUpdate","AdminFactors","Card","Elevation","AdminNewFactor","AdminNewFactorType","factorTypes","PROPERTY","hasNewForm","requiredType","TWO","PLUS","MONOSPACE_TEXT","TEXT_DISABLED","newFactorIsOpen","FLOWS","BUILD","SIZE_LARGE","AdminLobbyConfig","prevName","nameRaw","archiveIntent","AdminLobbyConfigs","AdminNewLobbyConfig","newLobbyIsOpen","NumericInput","simpleTreatments","completeTreatments","simpleGamesCount","gamesCount","handleAssignmentChange","gamesCountCalc","handleGamesCountChange","handleAddTreatment","validLobbyConfigs","params","handleTreatmentCountChange","handleLobbyConfigChange","handleRemoveTreatment","dataset","reject","handleNewBatch","onClose","inject","validTreatments","renderRequired","issues","issue","renderContent","isComplete","currentTreatments","width","tr","isOpen","handleIntUpdate","handleNewFactor","clean","parseFloat","valueInputRef","prevProp","node","input","properties","isUndefined","source","TagInput","TextArea","handleNumberUpdate","valueAsString","handleChangeCheckbox","handleNewFactorType","stopsubmit","firstInputRef","extraInputs","stringType","handleIntChange","handleNewLobbyConfig","AdminNewTreatment","RadioGroup","Radio","selected","nameField","handleFactorChange","factorId","handleNewTreatment","missing","msg","out","er","PROPERTIES","requiredClass","WARNING_SIGN","INFO_SIGN","cond","AdminPlayers","searchParam","handleRetirePlayers","playersAffected","handleRetireSinglePlayer","handleColumnHeaderChange","filterPlayers","retireAt","AdminTreatment","AdminTreatments","newTreatmentIsOpen","Comp","connected","loadingObj","withTimer","withGameInfo","playerStagesCount","playerRoundsCount","applyAugment","queuedCount","readyCount","_readOnlyError","startObj","defaultPlayerIdKey","URLSearchParams","search","playerIdKeyOverride","playerIdDep","localStorage","IdentifiedContainerInner","wasRetired","HasPlayers","hasPlayers","subscribe","ready","hasPlayersObj","info","withStageDependencies","sub","withGameDependencies","subGameLobby","subTreatment","subBatches","subLobby","subGame","batchAvailable","$or","playerIdParamPresent","playerIdParamOk","gameLoading","batchLoading","_toConsumableArray","batchesLoading","treatmentsLoading","factorsLoading","factorTypesLoading","lobbyConfigsLoading","sortedBatches","runningBatches","initBatches","b","typesLoading"],"mappings":"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","file":"/packages/empirica_core.js","sourcesContent":["import React from \"react\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport { isReactComponents } from \"./lib/utils\";\nimport \"./startup/client/index.js\";\nimport About from \"./ui/components/About.jsx\";\nimport Admin from \"./ui/components/Admin.jsx\";\nimport Centered from \"./ui/components/Centered.jsx\";\nimport Consent, { ConsentButton } from \"./ui/components/Consent.jsx\";\nimport Login from \"./ui/components/Login.jsx\";\nimport NewPlayer from \"./ui/components/NewPlayer.jsx\";\nimport NoBatch from \"./ui/components/NoBatch\";\nimport StageTimeWrapper from \"./ui/components/StageTimeWrapper.jsx\";\nimport { AlertToaster } from \"./ui/components/Toasters.jsx\";\nimport AuthorizedContainer from \"./ui/containers/AuthorizedContainer.jsx\";\nimport IdentifiedContainer from \"./ui/containers/IdentifiedContainer.jsx\";\nimport PublicContainer from \"./ui/containers/PublicContainer.jsx\";\n\nconst config = {\n  exitSteps: () => [],\n  introSteps: () => []\n};\n\nconst Empirica = {\n  about(AboutComp) {\n    config.About = AboutComp || About;\n  },\n\n  noBatch(NoBatchComp) {\n    config.NoBatch = NoBatchComp || NoBatch;\n  },\n\n  consent(ConsentComp) {\n    config.Consent = ConsentComp || Consent;\n  },\n\n  newPlayer(NewPlayerComp) {\n    config.NewPlayer = NewPlayerComp || NewPlayer;\n  },\n\n  round(RoundComp) {\n    config.Round = RoundComp;\n  },\n\n  header(HeaderComp) {\n    config.Header = HeaderComp;\n  },\n\n  // gameLobby, treatment, player\n  lobby(LobbyComp) {\n    config.Lobby = LobbyComp;\n  },\n\n  breadcrumb(BreadcrumbComp) {\n    config.Breadcrumb = BreadcrumbComp;\n  },\n\n  waiting(WaitingComp) {\n    config.Waiting = WaitingComp;\n  },\n\n  introSteps(func) {\n    if (!_.isFunction(func)) {\n      throw new Error(\"Empirica.introSteps() requires a function\");\n    }\n\n    config.introSteps = function() {\n      const results = func.apply(null, arguments);\n      if (!results || isReactComponents(results)) {\n        return results || [];\n      } else {\n        console.error(\n          \"Empirica.introSteps() is not returning an array of components as expected.\"\n        );\n        return [];\n      }\n    };\n  },\n\n  exitSteps(func) {\n    if (!_.isFunction(func)) {\n      throw new Error(\"Empirica.exitSteps() requires a function\");\n    }\n\n    config.exitSteps = function() {\n      const results = func.apply(null, arguments);\n      if (!results || isReactComponents(results)) {\n        return results || [];\n      } else {\n        console.error(\n          \"Empirica.exitSteps() is not returning an array of components as expected.\"\n        );\n        return [];\n      }\n    };\n  },\n\n  routes() {\n    return (\n      <BrowserRouter>\n        <div className=\"app\">\n          <Switch>\n            <Route path=\"/\" exact component={this.appComp()} />\n            <Route path=\"/admin\" component={this.adminComp()} />\n            <Route path=\"/login\" component={this.loginComp()} />\n          </Switch>\n        </div>\n      </BrowserRouter>\n    );\n  },\n\n  appComp() {\n    return IdentifiedContainer(PublicContainer, config);\n  },\n  adminComp({ loginPath = \"/login\" } = {}) {\n    return AuthorizedContainer(Admin, { loginPath });\n  },\n  loginComp({ adminPath = \"/admin\" } = {}) {\n    return AuthorizedContainer(Login, { adminPath });\n  }\n};\n\nexport default Empirica;\nexport { StageTimeWrapper, Centered, AlertToaster, ConsentButton };\n","const gameLobbyLock = {};\n\nexport default gameLobbyLock;\n","// sharedNamespace is used for being able to loading files on client or server\n// exclusively, from files which are themselves shared.\n\nconst sharedNamespace = {};\n\nexport default sharedNamespace;\n","import SimpleSchema from \"simpl-schema\";\nimport inflection from \"inflection\";\n\nexport const IdSchema = new SimpleSchema({\n  _id: {\n    type: String,\n    optional: true,\n    regEx: SimpleSchema.RegEx.Id\n  }\n});\n\nexport const ArchivedSchema = new SimpleSchema({\n  archivedById: {\n    type: String,\n    optional: true,\n    regEx: SimpleSchema.RegEx.Id,\n    autoValue() {\n      if (this.field(\"archivedAt\").isSet) {\n        return this.userId;\n      }\n      return undefined;\n    }\n  },\n  archivedAt: {\n    type: Date,\n    label: \"Archived at\",\n    optional: true\n  }\n});\n\nexport const DebugModeSchema = new SimpleSchema({\n  debugMode: {\n    type: Boolean,\n    defaultValue: false\n  }\n});\n\nexport const TimestampSchema = new SimpleSchema({\n  createdAt: {\n    type: Date,\n    label: \"Created at\",\n    // denyUpdate: true,\n    index: true,\n    autoValue() {\n      if (this.isInsert) {\n        return new Date();\n      } else if (this.isUpsert) {\n        return { $setOnInsert: new Date() };\n      } else {\n        this.unset(); // Prevent user from supplying their own value\n      }\n    }\n  },\n  updatedAt: {\n    type: Date,\n    label: \"Last updated at\",\n    optional: true,\n    // denyInsert: true,\n    index: true,\n    autoValue() {\n      if (this.isUpdate) {\n        return new Date();\n      }\n    }\n  }\n});\n\n// Userful for admin operations, tracking who created what.\nexport const CreatorSchema = new SimpleSchema({\n  createdById: {\n    type: String,\n    label: \"Created by\",\n    // denyUpdate: true,\n    regEx: SimpleSchema.RegEx.Id,\n    autoValue() {\n      if (this.isInsert) {\n        return this.isSet && this.isFromTrustedCode ? undefined : this.userId;\n      }\n      return undefined;\n    },\n    index: true\n  },\n  updatedById: {\n    type: String,\n    label: \"Last updated by\",\n    optional: true,\n    regEx: SimpleSchema.RegEx.Id,\n    autoValue() {\n      if (this.isUpdate) {\n        return this.userId;\n      }\n    },\n    index: true\n  }\n});\n\nexport const UserDataSchema = new SimpleSchema({\n  data: {\n    type: Object,\n    blackbox: true,\n    defaultValue: {}\n  }\n});\n\n// The PolymorphicSchema allows to have records be attached to different\n// types of collection. (belongs_to :coll, polymorphic: true)\n// objectType and objectId point to the owning object of the record\n// objectTypes are the names of the collection that the record can be\n// associated with. ex. [\"BriefSection\", \"Brief\", \"Board\"]\nexport const PolymorphicSchema = function(collTypes) {\n  return new SimpleSchema({\n    objectType: {\n      type: String,\n      allowedValues: collTypes,\n      // denyUpdate: true,\n      index: true\n    },\n    objectId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      // denyUpdate: true,\n      index: true\n    }\n  });\n};\n\nexport const HasManyByRef = function(coll) {\n  const camel = inflection.camelize(inflection.singularize(coll), true);\n  const label = inflection.titleize(coll);\n  const fieldName = `${camel}Ids`;\n  return new SimpleSchema({\n    [fieldName]: {\n      type: Array,\n      defaultValue: [],\n      label,\n      index: true\n    },\n    [`${fieldName}.$`]: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      label: `${label} Item`\n    }\n  });\n};\n\nexport const BelongsTo = function(coll, required = true) {\n  const singular = inflection.singularize(coll);\n  const camel = inflection.camelize(singular, true);\n  const label = inflection.titleize(singular);\n  const fieldName = `${camel}Id`;\n  return new SimpleSchema({\n    [fieldName]: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      label,\n      // denyUpdate,\n      index: true,\n      optional: !required\n    }\n  });\n};\n","import Collection2 from \"meteor/aldeed:collection2\";\nimport SimpleSchema from \"simpl-schema\";\n\n// Must be unique scoped by other field (for given value of passed field,\n// The current field should be unique). For ex:\n//   Name: {\n//     Type: String,\n//     ScopedUnique: \"orgId\"\n//   }\n// Name must be unique for document with equal orgId.\n// Documents with different orgId can have same name.\nSimpleSchema.extendOptions([\"scopedUnique\"]);\n\nCollection2.on(\"schema.attached\", (collection, ss) => {\n  if (ss.version >= 2) {\n    ss.messageBox.messages({\n      scopedUnique: \"Already exists\"\n    });\n  }\n\n  ss.addValidator(function() {\n    if (!this.isSet) {\n      return;\n    }\n\n    const def = this.definition;\n    const uniqueFieldScope = def.scopedUnique;\n\n    if (!uniqueFieldScope) {\n      return;\n    }\n\n    const val = this.field(uniqueFieldScope).value;\n    const key = this.key;\n    if (\n      collection\n        .find({\n          [uniqueFieldScope]: val,\n          [key]: this.value\n        })\n        .count() > 0\n    ) {\n      return \"uniqueScoped\";\n    }\n  });\n});\n\n// Extend the schema options allowed by SimpleSchema\nSimpleSchema.extendOptions([\"denyInsert\", \"denyUpdate\"]);\n\nCollection2.on(\"schema.attached\", (collection, ss) => {\n  if (\n    ss.version >= 2 &&\n    ss.messageBox &&\n    typeof ss.messageBox.messages === \"function\"\n  ) {\n    ss.messageBox.messages({\n      en: {\n        insertNotAllowed: \"{{label}} cannot be set during an insert\",\n        updateNotAllowed: \"{{label}} cannot be set during an update\"\n      }\n    });\n  }\n\n  ss.addValidator(function schemaDenyValidator() {\n    if (!this.isSet) return;\n\n    const def = this.definition;\n\n    if (def.denyInsert && this.isInsert) return \"insertNotAllowed\";\n    if (def.denyUpdate && (this.isUpdate || this.isUpsert))\n      return \"updateNotAllowed\";\n  });\n});\n\n// Extend the schema options allowed by SimpleSchema\nSimpleSchema.extendOptions([\n  \"index\", // one of Number, String, Boolean\n  \"unique\", // Boolean\n  \"sparse\" // Boolean\n]);\n","import SimpleSchema from \"simpl-schema\";\n\nimport { statusSchema } from \"./status-schema\";\nimport {\n  ArchivedSchema,\n  TimestampSchema,\n  HasManyByRef,\n  DebugModeSchema\n} from \"../default-schemas\";\nimport { Treatments } from \"../treatments/treatments\";\nimport { Counter } from \"../../lib/counters\";\n\nclass BatchesCollection extends Mongo.Collection {\n  insert(doc, callback) {\n    doc.index = Counter.inc(\"batches\");\n    return super.insert(doc, callback);\n  }\n}\n\nexport const Batches = new BatchesCollection(\"batches\");\n\nBatches.helpers({\n  gameCount() {\n    return this.assignment === \"simple\"\n      ? this.simpleConfig.count\n      : this.completeGameCount();\n  },\n\n  completeGameCount() {\n    return _.reduce(\n      this.completeConfig.treatments,\n      (sum, t) => sum + t.count,\n      0\n    );\n  },\n\n  duplicate() {\n    const { assignment, simpleConfig, completeConfig } = this;\n    Batches.insert({\n      assignment,\n      simpleConfig,\n      completeConfig,\n      status: \"init\"\n    });\n  }\n});\n\nexport const maxGamesCount = 10000000;\n\nexport const assignmentTypes = {\n  simple: \"Simple\",\n  complete: \"Complete\"\n};\n\nBatches.schema = new SimpleSchema({\n  // Auto-incremented number assigned to batches as they are created\n  index: {\n    type: SimpleSchema.Integer\n  },\n\n  assignment: {\n    type: String,\n    // \"custom\" not yet supported\n    allowedValues: [\"simple\", \"complete\", \"custom\"]\n  },\n\n  full: {\n    label: \"Batch is full, all games are running\",\n    type: Boolean,\n    defaultValue: false\n  },\n\n  runningAt: {\n    label: \"Time when batch started running\",\n    type: Date,\n    optional: true\n  },\n\n  finishedAt: {\n    label: \"Time when batch finished running\",\n    type: Date,\n    optional: true\n  },\n\n  // Simple configuration at init\n  simpleConfig: {\n    type: Object,\n    optional: true,\n    custom() {\n      if (!this.value && this.field(\"assignment\").value === \"simple\") {\n        return \"required\";\n      }\n    }\n  },\n  \"simpleConfig.count\": {\n    type: SimpleSchema.Integer,\n    min: 1,\n    max: maxGamesCount\n  },\n  \"simpleConfig.treatments\": {\n    type: Array,\n    minCount: 1,\n    maxCount() {\n      return Treatments.find().count();\n    }\n  },\n  \"simpleConfig.treatments.$\": {\n    type: Object\n  },\n  \"simpleConfig.treatments.$._id\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id\n  },\n  \"simpleConfig.treatments.$.lobbyConfigId\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id\n  },\n\n  // Complete configuration at init\n  completeConfig: {\n    type: Object,\n    optional: true,\n    custom() {\n      if (!this.value && this.field(\"assignment\").value === \"complete\") {\n        return \"required\";\n      }\n    }\n  },\n  \"completeConfig.treatments\": {\n    type: Array,\n    minCount: 1,\n    maxCount() {\n      return Treatments.find().count();\n    }\n  },\n  \"completeConfig.treatments.$\": {\n    type: Object\n  },\n  \"completeConfig.treatments.$._id\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id\n  },\n  \"completeConfig.treatments.$.count\": {\n    type: SimpleSchema.Integer,\n    minCount: 1,\n    maxCount: maxGamesCount\n  },\n  \"completeConfig.treatments.$.lobbyConfigId\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id\n  }\n});\n\nif (Meteor.isDevelopment || Meteor.settings.public.debug_gameDebugMode) {\n  Batches.schema.extend(DebugModeSchema);\n}\n\nBatches.schema.extend(statusSchema);\nBatches.schema.extend(TimestampSchema);\nBatches.schema.extend(ArchivedSchema);\nBatches.schema.extend(HasManyByRef(\"Games\"));\nBatches.schema.extend(HasManyByRef(\"GameLobbies\"));\nBatches.attachSchema(Batches.schema);\n","import SimpleSchema from \"simpl-schema\";\nimport { ValidatedMethod } from \"meteor/mdg:validated-method\";\n\nimport { Batches } from \"./batches\";\nimport { GameLobbies } from \"../game-lobbies/game-lobbies.js\";\nimport { Games } from \"../games/games.js\";\nimport { IdSchema } from \"../default-schemas\";\n\nexport const createBatch = new ValidatedMethod({\n  name: \"Batches.methods.create\",\n\n  validate: Batches.schema\n    .omit(\n      \"gameIds\",\n      \"gameLobbyIds\",\n      \"status\",\n      \"createdAt\",\n      \"updatedAt\",\n      \"debugMode\",\n      \"full\",\n      \"index\"\n    )\n    .validator(),\n\n  run(batch) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    Batches.insert(batch, {\n      autoConvert: false,\n      filter: false,\n      validate: false\n    });\n  }\n});\n\nexport const duplicateBatch = new ValidatedMethod({\n  name: \"Batches.methods.duplicate\",\n\n  validate: IdSchema.validator(),\n\n  run({ _id }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const batch = Batches.findOne(_id);\n    batch.duplicate();\n  }\n});\n\nexport const updateBatch = new ValidatedMethod({\n  name: \"Batches.methods.updateBatch\",\n\n  validate: new SimpleSchema({\n    archived: {\n      type: Boolean,\n      optional: true\n    }\n  })\n    .extend(IdSchema)\n    .validator(),\n\n  run({ _id, archived }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const batch = Batches.findOne(_id);\n    if (!batch) {\n      throw new Error(\"not found\");\n    }\n\n    const $set = {},\n      $unset = {};\n\n    if (archived !== undefined) {\n      if (archived) {\n        if (batch.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $set.archivedAt = new Date();\n        $set.archivedById = this.userId;\n      }\n      if (!archived) {\n        if (!batch.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $unset.archivedAt = true;\n        $unset.archivedById = true;\n      }\n    }\n\n    const modifier = {};\n    if (Object.keys($set).length > 0) {\n      modifier.$set = $set;\n    }\n    if (Object.keys($unset).length > 0) {\n      modifier.$unset = $unset;\n    }\n    if (Object.keys(modifier).length === 0) {\n      return;\n    }\n\n    Batches.update(_id, modifier);\n  }\n});\n\nexport const updateBatchStatus = new ValidatedMethod({\n  name: \"Batches.methods.updateStatus\",\n\n  validate: Batches.schema\n    .pick(\"status\")\n    .extend(IdSchema)\n    .validator(),\n\n  run({ _id, status }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const batch = Batches.findOne(_id);\n    if (!batch) {\n      throw new Error(\"not found\");\n    }\n\n    if (status === \"init\") {\n      throw new Error(\"invalid\");\n    }\n\n    const $set = { status };\n\n    if (status === \"running\") {\n      $set.runningAt = new Date();\n      GameLobbies.update(\n        { batchId: _id },\n        { $set: { status: \"running\" } },\n        { multi: true }\n      );\n    }\n\n    Batches.update(_id, { $set });\n  }\n});\n\nif (Meteor.isDevelopment || Meteor.settings.public.debug_gameDebugMode) {\n  export const setBatchInDebugMode = new ValidatedMethod({\n    name: \"Batches.methods.debugMode\",\n\n    validate: IdSchema.validator(),\n\n    run({ _id }) {\n      if (!this.userId) {\n        throw new Error(\"unauthorized\");\n      }\n\n      const batch = Batches.findOne(_id);\n      if (!batch) {\n        throw new Error(\"not found\");\n      }\n\n      Batches.update(_id, { $set: { debugMode: true } });\n      GameLobbies.update({ batchId: _id }, { $set: { debugMode: true } });\n      Games.update({ batchId: _id }, { $set: { debugMode: true } });\n    }\n  });\n}\n","import SimpleSchema from \"simpl-schema\";\n\nexport const statusSchema = new SimpleSchema({\n  status: {\n    type: String,\n    allowedValues: [\n      \"init\", // Batch created, not running yet\n      \"running\", // Batch is running\n\n      // NOTE(np): paused: for now, we don't support paused because we need to do something about timers\n      // \"paused\", // Batch has been pause, ongoing games keep on going but no more new players are accepted. Can be restarted.\n\n      \"finished\", // Batch has finished and cannot be restarted\n\n      // NOTE(np): cancelled might break a game if it's running at the moment, gotta be careful\n      \"cancelled\", // Batch was cancelled and cannot be restarted\n      \"failed\",\n      \"custom\" // used for game.end(\"custom reason\")\n    ],\n    defaultValue: \"init\",\n    index: 1\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\nimport { ArchivedSchema, TimestampSchema } from \"../default-schemas.js\";\n\nexport const FactorTypes = new Mongo.Collection(\"factor_types\");\n\nFactorTypes.helpers({});\n\n// requiredFactors hold a list of factors keys that are required by\n// Empirica core to be able to run a game.\n// Required factors are:\n// -`playerCount` determines how many players participate in a game and is\n//   therefore critical to run a game.\nFactorTypes.requiredTypes = [\"playerCount\"];\n\nFactorTypes.types = [\"String\", \"Integer\", \"Number\", \"Boolean\"];\n\nFactorTypes.schema = new SimpleSchema({\n  required: {\n    type: Boolean\n  },\n\n  name: {\n    type: String,\n    max: 256,\n    regEx: /^[a-z]+[a-zA-Z0-9]*$/,\n    index: true,\n    unique: true,\n    custom() {\n      if (this.isSet && FactorTypes.find({ name: this.value }).count() > 0) {\n        return \"notUnique\";\n      }\n    }\n  },\n\n  description: {\n    type: String,\n    min: 1,\n    max: 2048\n  },\n\n  type: {\n    type: String,\n    allowedValues: FactorTypes.types\n  },\n\n  min: {\n    type: Number,\n    optional: true\n  },\n\n  max: {\n    type: Number,\n    optional: true\n  }\n});\n\nFactorTypes.schema.messageBox.messages({\n  en: {\n    notUnique: \"{{label}} already exists.\"\n  }\n});\n\nFactorTypes.schema.extend(ArchivedSchema);\nFactorTypes.schema.extend(TimestampSchema);\nFactorTypes.attachSchema(FactorTypes.schema);\n","import SimpleSchema from \"simpl-schema\";\nimport { ValidatedMethod } from \"meteor/mdg:validated-method\";\n\nimport { Factors } from \"../factors/factors.js\";\nimport { FactorTypes } from \"./factor-types.js\";\nimport { IdSchema } from \"../default-schemas.js\";\n\nexport const createFactorType = new ValidatedMethod({\n  name: \"FactorTypes.methods.create\",\n\n  validate: FactorTypes.schema\n    .omit(\"createdAt\", \"updatedAt\")\n    .extend(\n      new SimpleSchema({\n        initialValues: {\n          type: Array,\n          optional: true\n        },\n\n        \"initialValues.$\": {\n          type: SimpleSchema.oneOf(\n            {\n              type: String,\n              scopedUnique: \"type\"\n            },\n            {\n              type: SimpleSchema.Integer,\n              scopedUnique: \"type\"\n            },\n            {\n              type: Number,\n              scopedUnique: \"type\"\n            },\n            {\n              type: Boolean,\n              scopedUnique: \"type\"\n            }\n          )\n        }\n      })\n    )\n    .validator(),\n\n  run(factorType) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const { initialValues } = factorType;\n    const factorTypeId = FactorTypes.insert(\n      _.omit(factorType, \"initialValues\"),\n      { autoConvert: false }\n    );\n\n    initialValues.forEach(value => Factors.insert({ factorTypeId, value }));\n  }\n});\n\nexport const updateFactorType = new ValidatedMethod({\n  name: \"FactorTypes.methods.update\",\n\n  validate: new SimpleSchema({\n    archived: {\n      type: Boolean,\n      optional: true\n    }\n  })\n    .extend(IdSchema)\n    .validator(),\n\n  run({ _id, archived }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n    const factorType = FactorTypes.findOne(_id);\n    if (!factorType) {\n      throw new Error(\"not found\");\n    }\n\n    const $set = {},\n      $unset = {};\n\n    if (archived !== undefined) {\n      if (archived) {\n        if (factorType.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $set.archivedAt = new Date();\n        $set.archivedById = this.userId;\n      }\n      if (!archived) {\n        if (!factorType.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $unset.archivedAt = true;\n        $unset.archivedById = true;\n      }\n    }\n\n    const modifier = {};\n    if (Object.keys($set).length > 0) {\n      modifier.$set = $set;\n    }\n    if (Object.keys($unset).length > 0) {\n      modifier.$unset = $unset;\n    }\n    if (Object.keys(modifier).length === 0) {\n      return;\n    }\n\n    FactorTypes.update(_id, modifier);\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\nimport {\n  ArchivedSchema,\n  BelongsTo,\n  TimestampSchema\n} from \"../default-schemas.js\";\nimport { FactorTypes } from \"../factor-types/factor-types.js\";\n\nexport const Factors = new Mongo.Collection(\"factors\");\n\nFactors.helpers({\n  label() {\n    let label = this.name;\n    const value = String(this.value);\n    if (label !== value) {\n      label += ` (${value})`;\n    }\n    return label;\n  },\n\n  factorType() {\n    return FactorTypes.findOne(this.factorTypeId);\n  },\n\n  factorTypeName() {\n    const t = this.factorType();\n    return t && t.name;\n  },\n\n  fullLabel() {\n    return `${this.factorTypeName()}: ${this.label()}`;\n  }\n});\n\nexport const typeConversion = {\n  Integer: SimpleSchema.Integer,\n  String: String,\n  Number: Number,\n  Boolean: Boolean\n};\n\nFactors.valueValidation = function(factorType, value, simpleSchmemaType) {\n  const type = typeConversion[factorType.type];\n\n  if (simpleSchmemaType && simpleSchmemaType !== type) {\n    return;\n  }\n\n  const fieldSchema = { type };\n  if (factorType.min) {\n    fieldSchema.min = factorType.min;\n  }\n  if (factorType.max) {\n    fieldSchema.max = factorType.max;\n  }\n  const schema = { value: fieldSchema };\n  const val = new SimpleSchema(schema).newContext();\n\n  val.validate({ value });\n\n  if (!val.isValid()) {\n    return val.validationErrors();\n  }\n\n  if (Factors.find({ factorTypeId: factorType._id, value }).count() > 0) {\n    return [{ name: \"value\", type: \"scopedUnique\" }];\n  }\n};\n\nconst valueValidation = function() {\n  if (this.key !== \"value\") {\n    return;\n  }\n  const factorTypeId = this.field(\"factorTypeId\").value;\n  const factorType = FactorTypes.findOne(factorTypeId);\n  const value = this.value;\n  const errors = Factors.valueValidation(factorType, value);\n\n  if (errors) {\n    this.addValidationErrors(errors);\n    return false;\n  }\n};\n\nFactors.schema = new SimpleSchema({\n  name: {\n    type: String,\n    autoValue() {\n      if (!this.isSet && (this.isInsert || Meteor.isClient)) {\n        return String(this.field(\"value\").value).slice(0, 32);\n      }\n    },\n    max: 256,\n    regEx: /^[a-zA-Z0-9_\\.]+$/\n  },\n\n  value: {\n    type: SimpleSchema.oneOf(\n      {\n        type: String\n      },\n      {\n        type: SimpleSchema.Integer\n      },\n      {\n        type: Number\n      },\n      {\n        type: Boolean\n      }\n    )\n  }\n});\n\nFactors.schema.addValidator(valueValidation);\nFactors.schema.extend(ArchivedSchema);\nFactors.schema.extend(BelongsTo(\"FactorTypes\"));\nFactors.schema.extend(TimestampSchema);\nFactors.attachSchema(Factors.schema);\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { Factors } from \"./factors.js\";\nimport { FactorTypes } from \"../factor-types/factor-types.js\";\nimport { IdSchema } from \"../default-schemas.js\";\nimport { handleFactorValueErrorMessage } from \"../../lib/utils.js\";\n\nexport const createFactor = new ValidatedMethod({\n  name: \"Factors.methods.create\",\n\n  validate: Factors.schema.omit(\"createdAt\", \"updatedAt\").validator(),\n\n  run(factor) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const factorType = FactorTypes.findOne(factor.factorTypeId);\n    if (!factorType) {\n      throw new Error(\"not found\");\n    }\n\n    const errors = Factors.valueValidation(factorType, factor.value);\n    if (errors) {\n      throw new Error(\n        errors.map(e => handleFactorValueErrorMessage(e)).join(\"\\n\")\n      );\n    }\n\n    Factors.insert(factor, { autoConvert: false });\n  }\n});\n\nexport const updateFactor = new ValidatedMethod({\n  name: \"Factors.methods.update\",\n\n  validate: Factors.schema\n    .pick(\"name\")\n    .extend(IdSchema)\n    .extend(\n      new SimpleSchema({\n        archived: {\n          type: Boolean,\n          optional: true\n        }\n      })\n    )\n    .validator(),\n\n  run({ _id, name, archived }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const factor = Factors.findOne(_id);\n    if (!factor) {\n      throw new Error(\"not found\");\n    }\n\n    const $set = {},\n      $unset = {};\n    if (name !== undefined) {\n      $set.name = name;\n    }\n\n    if (archived !== undefined) {\n      if (archived) {\n        if (factor.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $set.archivedAt = new Date();\n        $set.archivedById = this.userId;\n      }\n\n      if (!archived) {\n        if (!factor.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $unset.archivedAt = true;\n        $unset.archivedById = true;\n      }\n    }\n\n    const modifier = {};\n    if (Object.keys($set).length > 0) {\n      modifier.$set = $set;\n    }\n    if (Object.keys($unset).length > 0) {\n      modifier.$unset = $unset;\n    }\n    if (Object.keys(modifier).length === 0) {\n      return;\n    }\n\n    Factors.update(_id, modifier);\n  }\n});\n","// game-lobbies.js\nimport SimpleSchema from \"simpl-schema\";\n\nimport { statusSchema } from \"../batches/status-schema\";\nimport { Batches } from \"../batches/batches\";\nimport { BelongsTo, HasManyByRef, TimestampSchema } from \"../default-schemas\";\nimport { DebugModeSchema, UserDataSchema } from \"../default-schemas.js\";\nimport { Players } from \"../players/players\";\nimport { Treatments } from \"../treatments/treatments\";\n\nexport const GameLobbies = new Mongo.Collection(\"game_lobbies\");\n\nGameLobbies.helpers({\n  players() {\n    return Players.find({ _id: { $in: this.playerIds } }).fetch();\n  },\n  batch() {\n    return Batches.findOne({ _id: this.batchId });\n  },\n  treatment() {\n    return Treatments.findOne({ _id: this.treatmentId });\n  }\n});\n\nGameLobbies.schema = new SimpleSchema({\n  // index allows for an ordering of lobbies so we know which one\n  // to choose from next\n  index: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    label: \"Position\"\n  },\n\n  // availableCount tells us how many slots are available in this lobby\n  // (== treatment.playerCount)\n  availableCount: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    label: \"Available Slots Count\"\n  },\n\n  timeoutStartedAt: {\n    label: \"Time the first player arrived in the lobby\",\n    type: Date,\n    optional: true\n  },\n\n  timedOutAt: {\n    label: \"Time when the lobby timed out and was cancelled\",\n    type: Date,\n    optional: true,\n    index: 1\n  },\n\n  endReason: {\n    label: \"Ended Reason\",\n    type: String,\n    optional: true,\n    regEx: /[a-zA-Z0-9_]+/\n  },\n\n  // Queued players are players that have been associated with the lobby\n  // but are not confirmed for the game yet. playerIds is used for confirmed\n  // players\n  // There might be more queued player than availableCount as we\n  // allow overbooking to make games start faster.\n  queuedPlayerIds: {\n    type: Array,\n    defaultValue: [],\n    label: `Queued Players`,\n    index: true\n  },\n  \"queuedPlayerIds.$\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n    label: `Queued Player`\n  }\n});\n\nif (Meteor.isDevelopment || Meteor.settings.public.debug_gameDebugMode) {\n  GameLobbies.schema.extend(DebugModeSchema);\n}\n\nGameLobbies.schema.extend(UserDataSchema);\nGameLobbies.schema.extend(TimestampSchema);\n// playerIds tells us how many players are ready to start (finished intro)\n// Once playerIds.length == availableCount, the game starts. Player that are\n// queued but haven't made it past the intro in time will be led to the outro\n// directly.\nGameLobbies.schema.extend(HasManyByRef(\"Players\"));\nGameLobbies.schema.extend(BelongsTo(\"Games\", false));\nGameLobbies.schema.extend(BelongsTo(\"Treatments\"));\nGameLobbies.schema.extend(BelongsTo(\"Batches\"));\nGameLobbies.schema.extend(BelongsTo(\"LobbyConfigs\"));\n// We are denormalizing the parent batch status in order to make clean queries\nGameLobbies.schema.extend(statusSchema);\nGameLobbies.attachSchema(GameLobbies.schema);\n","import shared from \"../../shared.js\";\nimport { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { GameLobbies } from \"./game-lobbies\";\nimport { Players } from \"../players/players\";\nimport { Batches } from \"../batches/batches.js\";\n\nexport const updateGameLobbyData = new ValidatedMethod({\n  name: \"GameLobbies.methods.updateData\",\n\n  validate: new SimpleSchema({\n    gameLobbyId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    key: {\n      type: String\n    },\n    value: {\n      type: String\n    },\n    append: {\n      type: Boolean,\n      optional: true\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ gameLobbyId, key, value, append, noCallback }) {\n    const gameLobby = GameLobbies.findOne(gameLobbyId);\n    if (!gameLobby) {\n      throw new Error(\"game lobbies not found\");\n    }\n    // TODO check can update this record game\n\n    const val = JSON.parse(value);\n    let update = { [`data.${key}`]: val };\n    const modifier = append ? { $push: update } : { $set: update };\n\n    GameLobbies.update(gameLobbyId, modifier, {\n      autoConvert: false,\n      filter: false,\n      validate: false,\n      trimStrings: false,\n      removeEmptyStrings: false\n    });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnChange({\n        conn: this.connection,\n        gameLobbyId,\n        gameLobby,\n        key,\n        value: val,\n        prevValue: gameLobby.data && gameLobby.data[key],\n        append\n      });\n    }\n  }\n});\n\nexport const earlyExitGameLobby = new ValidatedMethod({\n  name: \"GameLobbies.methods.earlyExit\",\n\n  validate: new SimpleSchema({\n    exitReason: {\n      label: \"Reason for Exit\",\n      type: String,\n      regEx: /[a-zA-Z0-9_]+/\n    },\n    gameLobbyId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    status: {\n      label: \"Status for lobby after exit\",\n      type: String,\n      regEx: /[a-zA-Z0-9_]+/,\n      optional: true\n    }\n  }).validator(),\n\n  run({ exitReason, gameLobbyId, status }) {\n    if (!Meteor.isServer) {\n      return;\n    }\n\n    const gameLobby = GameLobbies.findOne(gameLobbyId);\n    const exitStatus = status || \"failed\";\n    if (!gameLobby) {\n      throw new Error(\"gameLobby not found\");\n    }\n\n    Players.update(\n      { gameLobbyId },\n      {\n        $set: {\n          exitAt: new Date(),\n          exitStatus: exitStatus,\n          exitReason\n        }\n      }\n    );\n\n    GameLobbies.update(gameLobbyId, {\n      $set: {\n        status: exitStatus,\n        endReason: exitReason\n      }\n    });\n\n    const batch = Batches.findOne(gameLobby.batchId);\n    const availableLobby = GameLobbies.findOne({\n      $and: [\n        {\n          _id: { $in: batch.gameLobbyIds }\n        },\n        { status: { $in: [\"init\", \"running\"] } }\n      ]\n    });\n\n    // End batch if there is no available lobby\n    if (!availableLobby) {\n      Batches.update(\n        { gameLobbyIds: gameLobbyId },\n        { $set: { status: exitStatus, finishedAt: new Date() } }\n      );\n    }\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\nimport { Counter } from \"../../lib/counters\";\nimport { statusSchema } from \"../batches/status-schema\";\nimport { BelongsTo, HasManyByRef, TimestampSchema } from \"../default-schemas\";\nimport { DebugModeSchema, UserDataSchema } from \"../default-schemas.js\";\nimport { GameLobbies } from \"../game-lobbies/game-lobbies\";\nimport { Treatments } from \"../treatments/treatments\";\nimport { Batches } from \"../batches/batches\";\nimport { Players } from \"../players/players\";\nimport { Stages } from \"../stages/stages\";\nimport { Rounds } from \"../rounds/rounds\";\n\nclass GamesCollection extends Mongo.Collection {\n  insert(doc, callback) {\n    doc.index = Counter.inc(\"games\");\n    return super.insert(doc, callback);\n  }\n}\n\nexport const Games = new GamesCollection(\"games\");\n\nGames.schema = new SimpleSchema({\n  // Auto-incremented number assigned to games as they are created\n  index: {\n    type: SimpleSchema.Integer\n  },\n\n  // estFinishedTime is adding up all stages timings when the game is\n  // created/started to estimate when the game should be done at the latests.\n  estFinishedTime: {\n    type: Date,\n    index: 1\n  },\n\n  // Time the game actually finished\n  finishedAt: {\n    type: Date,\n    optional: true,\n    index: 1\n  },\n\n  // Indicates which stage is ongoing\n  currentStageId: {\n    type: String,\n    optional: true,\n    regEx: SimpleSchema.RegEx.Id,\n    index: 1\n  },\n\n  endReason: {\n    label: \"Ended Reason\",\n    type: String,\n    optional: true,\n    regEx: /[a-zA-Z0-9_]+/\n  }\n});\n\nif (Meteor.isDevelopment || Meteor.settings.public.debug_gameDebugMode) {\n  Games.schema.extend(DebugModeSchema);\n}\n\nGames.schema.extend(TimestampSchema);\nGames.schema.extend(UserDataSchema);\nGames.schema.extend(BelongsTo(\"GameLobbies\", false));\nGames.schema.extend(BelongsTo(\"Treatments\"));\nGames.schema.extend(HasManyByRef(\"Rounds\"));\nGames.schema.extend(HasManyByRef(\"Players\"));\nGames.schema.extend(BelongsTo(\"Batches\"));\n// We are denormalizing the parent batch status in order to make clean queries\nGames.schema.extend(statusSchema);\nGames.attachSchema(Games.schema);\n","import shared from \"../../shared.js\";\nimport { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { Games } from \"./games.js\";\nimport { GameLobbies } from \"../game-lobbies/game-lobbies.js\";\nimport { Players } from \"../players/players.js\";\nimport { Stages } from \"../stages/stages.js\";\nimport { Batches } from \"../batches/batches.js\";\n\nexport const updateGameData = new ValidatedMethod({\n  name: \"Games.methods.updateData\",\n\n  validate: new SimpleSchema({\n    gameId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    key: {\n      type: String\n    },\n    value: {\n      type: String\n    },\n    append: {\n      type: Boolean,\n      optional: true\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ gameId, key, value, append, noCallback }) {\n    const game = Games.findOne(gameId);\n    if (!game) {\n      throw new Error(\"game not found\");\n    }\n    // TODO check can update this record game\n\n    const val = JSON.parse(value);\n    let update = { [`data.${key}`]: val };\n    const modifier = append ? { $push: update } : { $set: update };\n\n    Games.update(gameId, modifier, {\n      autoConvert: false,\n      filter: false,\n      validate: false,\n      trimStrings: false,\n      removeEmptyStrings: false\n    });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnChange({\n        conn: this.connection,\n        gameId,\n        game,\n        key,\n        value: val,\n        prevValue: game.data && game.data[key],\n        append\n      });\n    }\n  }\n});\n\nexport const earlyExitGame = new ValidatedMethod({\n  name: \"Games.methods.earlyExitGame\",\n\n  validate: new SimpleSchema({\n    gameId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    endReason: {\n      label: \"Reason for End\",\n      type: String,\n      regEx: /[a-zA-Z0-9_]+/\n    },\n    status: {\n      label: \"status for games and players after exit\",\n      type: String,\n      regEx: /[a-zA-Z0-9_]+/\n    }\n  }).validator(),\n\n  run({ gameId, endReason, status }) {\n    if (!Meteor.isServer) {\n      return;\n    }\n\n    const game = Games.findOne(gameId);\n\n    if (!game) {\n      throw new Error(\"game not found\");\n    }\n\n    if (game && game.finishedAt) {\n      if (Meteor.isDevelopment) {\n        console.log(\"\\n\\ngame already ended!\");\n      }\n\n      return;\n    }\n\n    Games.update(gameId, {\n      $set: {\n        finishedAt: new Date(),\n        status,\n        endReason\n      }\n    });\n\n    GameLobbies.update(\n      { gameId },\n      {\n        $set: {\n          status,\n          endReason\n        }\n      }\n    );\n\n    game.playerIds.forEach(playerId =>\n      Players.update(playerId, {\n        $set: {\n          exitAt: new Date(),\n          exitStatus: status,\n          exitReason: endReason\n        }\n      })\n    );\n\n    const batch = Batches.findOne(game.batchId);\n    const availableLobby = GameLobbies.findOne({\n      $and: [\n        {\n          _id: { $in: batch.gameLobbyIds }\n        },\n        { status: { $in: [\"init\", \"running\"] } }\n      ]\n    });\n\n    // End batch if there is no available game\n    if (!availableLobby) {\n      Batches.update(\n        { gameLobbyIds: gameId },\n        { $set: { status: status, finishedAt: new Date() } }\n      );\n    }\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\nimport inflection from \"inflection\";\n\nimport {\n  HasManyByRef,\n  TimestampSchema,\n  ArchivedSchema\n} from \"../default-schemas\";\n\nexport const LobbyConfigs = new Mongo.Collection(\"lobby_configs\");\n\nLobbyConfigs.helpers({\n  displayName() {\n    if (this.name) {\n      return this.name;\n    }\n\n    const type = inflection.titleize(this.timeoutType);\n    const base = `${type}: ${this.timeoutInSeconds}s`;\n    let details;\n    switch (this.timeoutType) {\n      case \"lobby\":\n        details = `â†’ ${inflection.titleize(this.timeoutStrategy)}`;\n        if (this.timeoutStrategy === \"bots\") {\n          details += `(${this.timeoutBots.join(\",\")})`;\n        }\n        break;\n      case \"individual\":\n        details = `â¨‰ ${this.extendCount + 1}`;\n        break;\n      default:\n        console.error(`unknown timeoutType: ${this.timeoutType}`);\n        return base;\n    }\n\n    return `${base} ${details}`;\n  }\n});\n\n// There are 2 exclusive timeout types:\n// - lobby: the timeout start when the first player reaches the lobby and runs\n//   out for all the players whether they have even reached the lobby or not.\n// - individual: the timeout is started for each player as they reach the room.\n//   Some players might time out before all players are in the lobby, they might\n//   continue waiting for another timeout period. They might also leave the game\n//   and a new player can replace them. The lobby itself never times out.\nLobbyConfigs.timeoutTypes = [\"lobby\", \"individual\"];\n\n// The timeoutStrategy determines what to do in case people are waiting\n// in the lobby for longer than the timeoutInSeconds duration.\n// Only for \"lobby\" timeoutType.\n// Available strategies:\n// - ignore: start the game anyway\n// - fail: take the player to the exit survey\n// - bots: fill the missing players slots with bots from timeoutBots\nLobbyConfigs.timeoutStrategies = [\"fail\", \"ignore\"];\n// DEACTIVATING bots until bots implemented.\n// LobbyConfigs.timeoutStrategies = [\"fail\", \"ignore\", \"bots\"];\n\n// One year, that's a lot, just need to block from something too wild like 10M\n// years. We don't actually care, Inf would be fine...\nLobbyConfigs.maxTimeoutInSeconds = 365 * 24 * 60 * 60;\n\n// defaultTimeoutInSeconds is simply used as the default value in the Lobby\n// Configuration creation form.\nLobbyConfigs.defaultTimeoutInSeconds = 5 * 60;\n\nLobbyConfigs.schema = new SimpleSchema({\n  // Optional experimenter given name for the treatment\n  name: {\n    type: String,\n    max: 256,\n    optional: true,\n    custom() {\n      if (this.isSet && LobbyConfigs.find({ name: this.value }).count() > 0) {\n        return \"notUnique\";\n      }\n    }\n    // regEx: /^[a-zA-Z0-9_]+$/\n  },\n\n  // The timeoutType fundamentally changes the behavior of the lobby. See\n  // LobbyConfigs.timeoutTypes above for details.\n  timeoutType: {\n    type: String,\n    allowedValues: LobbyConfigs.timeoutTypes\n  },\n\n  // Number of seconds for one player to wait in lobby before timeoutStrategy\n  // is applied. This timeout applies only to the waiting for the game to start.\n  // It is either a \"Lobby Timeout\", or an \"Individual Timeout\", depending on\n  // the timeoutType value.\n  timeoutInSeconds: {\n    type: SimpleSchema.Integer,\n    max: LobbyConfigs.maxTimeoutInSeconds,\n    // It would be difficult to manage a timer that is less than 5s, and it\n    // would be  weird. 5s is already weird...\n    min: 5\n  },\n\n  // The timeoutStrategy determines what to do in case people are waiting\n  // in the lobby for longer than the timeoutInSeconds duration.\n  // Only for \"lobby\" timeoutType.\n  // See LobbyConfigs.timeoutStrategies for details.\n  timeoutStrategy: {\n    type: String,\n    allowedValues: LobbyConfigs.timeoutStrategies,\n    defaultValue: \"fail\",\n    optional: true\n  },\n\n  // Names of bot to use if timed out and still not enough player.\n  // Only for \"lobby\" timeoutType and timeoutStrategy is \"bots\".\n  timeoutBots: {\n    type: Array,\n    // Should add custom validation to verify the timeoutStrategy and make\n    // required if \"bots\" and should verify bot with name exists.\n    optional: true\n  },\n  \"timeoutBots.$\": {\n    type: String\n  },\n\n  // Number of times to allow the user to extend their wait time by\n  // timeoutInSeconds.\n  // If set to 0, they are never asked to retry.\n  // Only for \"individual\" timeoutType.\n  extendCount: {\n    type: SimpleSchema.Integer,\n    // 1 millard times, that should be a sufficient upper bound\n    max: 1000000000,\n    min: 0,\n    optional: true\n  }\n});\n\nLobbyConfigs.schema.extend(TimestampSchema);\nLobbyConfigs.schema.extend(ArchivedSchema);\nLobbyConfigs.schema.extend(HasManyByRef(\"Batches\"));\nLobbyConfigs.schema.extend(HasManyByRef(\"GameLobbies\"));\nLobbyConfigs.attachSchema(LobbyConfigs.schema);\n","import SimpleSchema from \"simpl-schema\";\nimport { ValidatedMethod } from \"meteor/mdg:validated-method\";\n\nimport { LobbyConfigs } from \"./lobby-configs.js\";\nimport { IdSchema } from \"../default-schemas.js\";\n\nexport const createLobbyConfig = new ValidatedMethod({\n  name: \"LobbyConfigs.methods.create\",\n\n  validate: LobbyConfigs.schema\n    .pick(\n      \"name\",\n      \"timeoutType\",\n      \"timeoutInSeconds\",\n      \"timeoutStrategy\",\n      \"timeoutBots\",\n      \"timeoutBots.$\",\n      \"extendCount\"\n    )\n    .validator(),\n\n  run(lobbyConfig) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    LobbyConfigs.insert(lobbyConfig);\n  }\n});\n\nexport const updateLobbyConfig = new ValidatedMethod({\n  name: \"LobbyConfigs.methods.update\",\n\n  validate: LobbyConfigs.schema\n    .pick(\"name\")\n    .extend(\n      new SimpleSchema({\n        archived: {\n          type: Boolean,\n          optional: true\n        }\n      })\n    )\n    .extend(IdSchema)\n    .validator(),\n\n  run({ _id, name, archived }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n    const lobbyConfig = LobbyConfigs.findOne(_id);\n    if (!lobbyConfig) {\n      throw new Error(\"not found\");\n    }\n\n    const $set = {},\n      $unset = {};\n    if (name !== undefined) {\n      $set.name = name;\n    }\n    if (archived !== undefined) {\n      if (archived) {\n        if (lobbyConfig.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $set.archivedAt = new Date();\n        $set.archivedById = this.userId;\n      }\n      if (!archived) {\n        if (!lobbyConfig.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $unset.archivedAt = true;\n        $unset.archivedById = true;\n      }\n    }\n\n    const modifier = {};\n    if (Object.keys($set).length > 0) {\n      modifier.$set = $set;\n    }\n    if (Object.keys($unset).length > 0) {\n      modifier.$unset = $unset;\n    }\n    if (Object.keys(modifier).length === 0) {\n      return;\n    }\n\n    LobbyConfigs.update(_id, modifier);\n  }\n});\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\nimport { Players } from \"../players/players.js\";\nimport { PlayerInputs } from \"./player-inputs.js\";\n\n// addPlayerInput is non-destructive, it just keeps adding onto a player's\n// input data.\nexport const addPlayerInput = new ValidatedMethod({\n  name: \"PlayerInputs.methods.add\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    gameId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      optional: true\n    },\n    gameLobbyId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      optional: true\n    },\n    data: {\n      type: String\n    }\n  }).validator(),\n\n  run({ playerId, gameId, gameLobbyId, data: rawData }) {\n    const player = Players.findOne(playerId);\n    if (!player) {\n      throw new Error(\"player not found\");\n    }\n    if (!gameId && !gameLobbyId) {\n      throw new Error(\"gameId or gameLobbyId required\");\n    }\n\n    const data = JSON.parse(rawData);\n    PlayerInputs.insert(\n      { playerId, gameId, gameLobbyId, data },\n      {\n        autoConvert: false,\n        filter: false,\n        validate: false,\n        trimStrings: false,\n        removeEmptyStrings: false\n      }\n    );\n  }\n});\n","// PlayerInputs contains small pieces of information associated with a player\n// This can be input forms from intro/outro or intermediate input values while\n// playing the game (e.g. all values while moving a range input, mouse,\n// movements...)\n\nimport SimpleSchema from \"simpl-schema\";\nimport { BelongsTo, TimestampSchema, UserDataSchema } from \"../default-schemas\";\n\nexport const PlayerInputs = new Mongo.Collection(\"player_inputs\");\n\nPlayerInputs.schema = new SimpleSchema({});\n\nPlayerInputs.schema.extend(TimestampSchema);\nPlayerInputs.schema.extend(UserDataSchema);\nPlayerInputs.schema.extend(BelongsTo(\"Games\", false));\nPlayerInputs.schema.extend(BelongsTo(\"GameLobbies\", false));\nPlayerInputs.schema.extend(BelongsTo(\"Players\"));\nPlayerInputs.attachSchema(PlayerInputs.schema);\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { PlayerLogs } from \"./player-logs.js\";\nimport { Players } from \"../players/players.js\";\n\n// playerLog is non-destructive, it just keeps adding onto a player's logs.\nexport const playerLog = new ValidatedMethod({\n  name: \"PlayerLogs.methods.add\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    stageId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      optional: true\n    },\n    roundId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      optional: true\n    },\n    gameId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      optional: true\n    },\n    name: {\n      type: String,\n      max: 255\n    },\n    jsonData: {\n      type: String\n    }\n  }).validator(),\n\n  run({ playerId, gameId, roundId, stageId, name, jsonData }) {\n    const player = Players.findOne(playerId);\n    if (!player) {\n      throw new Error(\"player not found\");\n    }\n\n    PlayerLogs.insert(\n      { playerId, gameId, roundId, stageId, name, jsonData },\n      {\n        autoConvert: false,\n        filter: false,\n        validate: false,\n        trimStrings: false,\n        removeEmptyStrings: false\n      }\n    );\n  }\n});\n","// PlayerInputs contains small pieces of information associated with a player\n// This can be input forms from intro/outro or intermediate input values while\n// playing the game (e.g. all values while moving a range input, mouse,\n// movements...)\n\nimport SimpleSchema from \"simpl-schema\";\n\nimport { TimestampSchema, BelongsTo } from \"../default-schemas\";\n\nexport const PlayerLogs = new Mongo.Collection(\"player_logs\");\n\nPlayerLogs.schema = new SimpleSchema({\n  stageId: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n    optional: true\n  },\n  roundId: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n    optional: true\n  },\n  gameId: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n    optional: true\n  },\n  name: {\n    type: String,\n    max: 255\n  },\n  jsonData: {\n    type: String\n  }\n});\n\nPlayerLogs.schema.extend(TimestampSchema);\nPlayerLogs.schema.extend(BelongsTo(\"Players\"));\nPlayerLogs.attachSchema(PlayerLogs.schema);\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\nimport { PlayerRounds } from \"./player-rounds\";\nimport shared from \"../../shared.js\";\n\nexport const updatePlayerRoundData = new ValidatedMethod({\n  name: \"PlayerRounds.methods.updateData\",\n\n  validate: new SimpleSchema({\n    playerRoundId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    key: {\n      type: String\n    },\n    value: {\n      type: String\n    },\n    append: {\n      type: Boolean,\n      optional: true\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ playerRoundId, key, value, append, noCallback }) {\n    const playerRound = PlayerRounds.findOne(playerRoundId);\n    if (!playerRound) {\n      throw new Error(\"playerRound not found\");\n    }\n    // TODO check can update this record playerRound\n\n    const val = JSON.parse(value);\n    let update = { [`data.${key}`]: val };\n    const modifier = append ? { $push: update } : { $set: update };\n\n    PlayerRounds.update(playerRoundId, modifier, {\n      autoConvert: false,\n      filter: false,\n      validate: false,\n      trimStrings: false,\n      removeEmptyStrings: false\n    });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnChange({\n        playerId: playerRound.playerId,\n        playerRoundId,\n        playerRound,\n        key,\n        value: val,\n        prevValue: playerRound.data && playerRound.data[key],\n        append\n      });\n    }\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\n\nimport { TimestampSchema, UserDataSchema, BelongsTo } from \"../default-schemas\";\n\nexport const PlayerRounds = new Mongo.Collection(\"player_rounds\");\n\nPlayerRounds.schema = new SimpleSchema({});\n\nPlayerRounds.schema.extend(TimestampSchema);\nPlayerRounds.schema.extend(UserDataSchema);\nPlayerRounds.schema.extend(BelongsTo(\"Players\"));\nPlayerRounds.schema.extend(BelongsTo(\"Rounds\"));\nPlayerRounds.schema.extend(BelongsTo(\"Games\"));\nPlayerRounds.schema.extend(BelongsTo(\"Batches\"));\nPlayerRounds.attachSchema(PlayerRounds.schema);\n","// augment.js\nimport { updateGameData, earlyExitGame } from \"../games/methods.js\";\nimport { updateGameLobbyData } from \"../game-lobbies/methods\";\nimport { updatePlayerRoundData } from \"../player-rounds/methods\";\nimport { PlayerRounds } from \"../player-rounds/player-rounds\";\nimport {\n  updatePlayerData,\n  earlyExitPlayer,\n  earlyExitPlayerLobby\n} from \"../players/methods.js\";\nimport { playerLog } from \"../player-logs/methods.js\";\nimport { updateRoundData } from \"../rounds/methods.js\";\nimport { updateStageData } from \"../stages/methods.js\";\nimport { submitPlayerStage, updatePlayerStageData } from \"./methods\";\nimport { PlayerStages } from \"./player-stages\";\n\nconst gameSet = (gameId, append = false) => (key, value) => {\n  updateGameData.call({\n    gameId,\n    key,\n    value: JSON.stringify(value),\n    append,\n    noCallback: Meteor.isServer\n  });\n};\n\nconst gameLobbySet = (gameLobbyId, append = false) => (key, value) => {\n  updateGameLobbyData.call({\n    gameLobbyId,\n    key,\n    value: JSON.stringify(value),\n    append,\n    noCallback: Meteor.isServer\n  });\n};\n\nconst playerSet = (playerId, append = false) => (key, value) => {\n  updatePlayerData.call({\n    playerId,\n    key,\n    value: JSON.stringify(value),\n    append,\n    noCallback: Meteor.isServer\n  });\n};\nconst stageSet = (playerStageId, append = false) => (key, value) => {\n  updatePlayerStageData.call({\n    playerStageId,\n    key,\n    value: JSON.stringify(value),\n    append,\n    noCallback: Meteor.isServer\n  });\n};\nconst stageSubmit = playerStageId => cb => {\n  submitPlayerStage.call(\n    {\n      playerStageId,\n      noCallback: Meteor.isServer\n    },\n    cb\n  );\n};\nconst roundSet = (playerRoundId, append = false) => (key, value) => {\n  updatePlayerRoundData.call({\n    playerRoundId,\n    key,\n    value: JSON.stringify(value),\n    append,\n    noCallback: Meteor.isServer\n  });\n};\n\n// Once the operation has succeeded (no throw), set the value\n// undefined is not supported, null is, replace undefineds by nulls.\nconst set = (obj, func) => (k, v) => {\n  const val = v === undefined ? null : v;\n  func(k, val);\n  obj[k] = val;\n};\n\nconst append = (obj, func) => (k, v) => {\n  const val = v === undefined ? null : v;\n  func(k, val);\n  if (!obj[k]) {\n    obj[k] = [];\n  }\n  obj[k].push(val);\n};\n\nconst nullFunc = () => {\n  throw \"You called .get(...) or .set(...) but there is no data for the player yet. Did the game run for this player?\";\n};\n\nexport const augmentGameLobby = gameLobby => {\n  gameLobby.get = key => gameLobby.data[key];\n  gameLobby.set = set(gameLobby.data, gameLobbySet(gameLobby._id));\n  gameLobby.append = append(gameLobby.data, gameLobbySet(gameLobby._id, true));\n};\n\nexport const augmentPlayerLobby = (\n  player,\n  round = {},\n  stage = {},\n  gameLobby = {}\n) => {\n  const { _id: playerId } = player;\n\n  player.exit = reason =>\n    earlyExitPlayerLobby.call({\n      playerId,\n      exitReason: reason,\n      gameLobbyId: gameLobby._id\n    });\n  player.get = key => player.data[key];\n  player.set = set(player.data, playerSet(playerId));\n  player.append = append(player.data, playerSet(playerId, true));\n  player.log = (name, data) => {\n    playerLog.call({\n      playerId,\n      name,\n      jsonData: JSON.stringify(data),\n      stageId: stage._id,\n      roundId: round._id,\n      gameLobbyId: gameLobby._id\n    });\n  };\n};\n\nexport const augmentPlayer = (player, stage = {}, round = {}, game = {}) => {\n  const { _id: playerId } = player;\n\n  player.exit = reason =>\n    earlyExitPlayer.call({\n      playerId,\n      exitReason: reason,\n      gameId: game._id\n    });\n  player.get = key => player.data[key];\n  player.set = set(player.data, playerSet(playerId));\n  player.append = append(player.data, playerSet(playerId, true));\n  player.log = (name, data) => {\n    playerLog.call({\n      playerId,\n      name,\n      jsonData: JSON.stringify(data),\n      stageId: stage._id,\n      roundId: round._id,\n      gameId: game._id\n    });\n  };\n};\n\nexport const augmentPlayerStageRound = (\n  player,\n  stage = {},\n  round = {},\n  game = {}\n) => {\n  const { _id: playerId } = player;\n\n  augmentPlayer(player, stage, round, game);\n\n  if (stage) {\n    const playerStage = PlayerStages.findOne({\n      stageId: stage._id,\n      playerId\n    });\n    stage.get = key => playerStage.data[key];\n    stage.set = set(playerStage.data, stageSet(playerStage._id));\n    stage.append = append(playerStage.data, stageSet(playerStage._id, true));\n    stage.submit = stageSubmit(playerStage._id, err => {\n      if (!err) {\n        stage.submitted = true;\n      }\n    });\n    stage.submitted = Boolean(playerStage.submittedAt);\n    stage.submittedAt = playerStage.submittedAt;\n  }\n\n  if (round) {\n    const playerRound = PlayerRounds.findOne({\n      roundId: round._id,\n      playerId\n    });\n    round.get = key => playerRound.data[key];\n    round.set = set(playerRound.data, roundSet(playerRound._id));\n    round.append = append(playerRound.data, roundSet(playerRound._id, true));\n  }\n};\n\nexport const stubPlayerStageRound = (player, stage, round) => {\n  player.get = nullFunc;\n  player.set = nullFunc;\n  player.append = nullFunc;\n\n  if (stage) {\n    stage.get = nullFunc;\n    stage.set = nullFunc;\n    stage.append = nullFunc;\n    stage.submit = nullFunc;\n    stage.submitted = false;\n  }\n\n  if (round) {\n    round.get = nullFunc;\n    round.set = nullFunc;\n    round.append = nullFunc;\n  }\n};\n\nexport const augmentGameStageRound = (game, stage, round) => {\n  if (game) {\n    game.get = key => game.data[key];\n    game.set = set(game.data, gameSet(game._id));\n    game.append = append(game.data, gameSet(game._id, true));\n    game.end = endReason =>\n      earlyExitGame.call({\n        gameId: game._id,\n        endReason,\n        status: \"custom\"\n      });\n  }\n\n  if (stage) {\n    stage.get = key => {\n      return stage.data[key];\n    };\n    stage.set = set(stage.data, (key, value) => {\n      updateStageData.call({\n        stageId: stage._id,\n        key,\n        value: JSON.stringify(value),\n        append: false,\n        noCallback: Meteor.isServer\n      });\n    });\n    stage.append = append(stage.data, (key, value) => {\n      updateStageData.call({\n        stageId: stage._id,\n        key,\n        value: JSON.stringify(value),\n        append: true,\n        noCallback: Meteor.isServer\n      });\n    });\n    stage.submit = () => {\n      throw \"You cannot submit the entire stage at the moment\";\n    };\n  }\n\n  if (round) {\n    round.get = key => {\n      return round.data[key];\n    };\n    round.set = set(round.data, (key, value) => {\n      updateRoundData.call({\n        roundId: round._id,\n        key,\n        value: JSON.stringify(value),\n        append: false,\n        noCallback: Meteor.isServer\n      });\n    });\n    round.append = append(round.data, (key, value) => {\n      updateRoundData.call({\n        roundId: round._id,\n        key,\n        value: JSON.stringify(value),\n        append: true,\n        noCallback: Meteor.isServer\n      });\n    });\n  }\n};\n\nexport const stubStageRound = (stage, round) => {\n  stage.get = nullFunc;\n  stage.set = nullFunc;\n  stage.append = nullFunc;\n  stage.submit = nullFunc;\n  round.get = nullFunc;\n  round.set = nullFunc;\n  round.append = nullFunc;\n};\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\nimport { PlayerStages } from \"./player-stages\";\nimport shared from \"../../shared.js\";\n\nexport const updatePlayerStageData = new ValidatedMethod({\n  name: \"PlayerStages.methods.updateData\",\n\n  validate: new SimpleSchema({\n    playerStageId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    key: {\n      type: String\n    },\n    value: {\n      type: String\n    },\n    append: {\n      type: Boolean,\n      optional: true\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ playerStageId, key, value, append, noCallback }) {\n    const playerStage = PlayerStages.findOne(playerStageId);\n    if (!playerStage) {\n      throw new Error(\"playerStage not found\");\n    }\n\n    // TODO check can update this record playerStage\n\n    const val = JSON.parse(value);\n    let update = { [`data.${key}`]: val };\n    const modifier = append ? { $push: update } : { $set: update };\n\n    PlayerStages.update(playerStageId, modifier, {\n      autoConvert: false,\n      filter: false,\n      validate: false,\n      trimStrings: false,\n      removeEmptyStrings: false\n    });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnChange({\n        playerId: playerStage.playerId,\n        playerStageId,\n        playerStage,\n        key,\n        value: val,\n        prevValue: playerStage.data && playerStage.data[key],\n        append\n      });\n    }\n  }\n});\n\nexport const submitPlayerStage = new ValidatedMethod({\n  name: \"PlayerStages.methods.submit\",\n\n  validate: new SimpleSchema({\n    playerStageId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ playerStageId, noCallback }) {\n    const playerStage = PlayerStages.findOne(playerStageId);\n    if (!playerStage) {\n      throw new Error(\"playerStage not found\");\n    }\n    // TODO check can update this record playerStage\n\n    if (playerStage.submittedAt) {\n      if (Meteor.isDevelopment) {\n        console.log(\"stage already submitted\");\n      }\n\n      return;\n    }\n\n    PlayerStages.update(playerStageId, { $set: { submittedAt: new Date() } });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnSubmit({\n        playerId: playerStage.playerId,\n        playerStage\n      });\n    }\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\n\nimport { TimestampSchema, UserDataSchema, BelongsTo } from \"../default-schemas\";\n\nexport const PlayerStages = new Mongo.Collection(\"player_stages\");\n\nPlayerStages.schema = new SimpleSchema({\n  submittedAt: {\n    type: Date,\n    denyInsert: true,\n    optional: true,\n    index: 1\n  }\n});\n\nPlayerStages.schema.extend(TimestampSchema);\nPlayerStages.schema.extend(UserDataSchema);\nPlayerStages.schema.extend(BelongsTo(\"Players\"));\nPlayerStages.schema.extend(BelongsTo(\"Stages\"));\nPlayerStages.schema.extend(BelongsTo(\"Rounds\"));\nPlayerStages.schema.extend(BelongsTo(\"Games\"));\nPlayerStages.schema.extend(BelongsTo(\"Batches\"));\nPlayerStages.attachSchema(PlayerStages.schema);\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { Batches } from \"../batches/batches.js\";\nimport { GameLobbies } from \"../game-lobbies/game-lobbies\";\nimport { IdSchema } from \"../default-schemas.js\";\nimport { LobbyConfigs } from \"../lobby-configs/lobby-configs.js\";\nimport { Games } from \"../games/games.js\";\nimport { Players } from \"./players\";\nimport { exitStatuses } from \"./players.js\";\nimport { sleep, weightedRandom } from \"../../lib/utils.js\";\nimport shared from \"../../shared.js\";\nimport gameLobbyLock from \"../../gameLobby-lock.js\";\n\nexport const createPlayer = new ValidatedMethod({\n  name: \"Players.methods.create\",\n\n  validate: new SimpleSchema({\n    id: {\n      type: String\n    },\n    urlParams: {\n      type: Object,\n      blackbox: true,\n      defaultValue: {}\n    }\n  }).validator(),\n\n  run(player) {\n    // Find the first running batch (in order of running started time)\n    const batch = Batches.findOne(\n      { status: \"running\", full: false },\n      { sort: { runningAt: 1 } }\n    );\n\n    if (!batch) {\n      // The UI should update and realize there is no batch available\n      // This should be a rare case where a fraction of a second of\n      // desynchornisation when the last available batch just finished.\n      // If this is the case, since the user exist in the DB at this point\n      // but has no lobby assigned, and the UI will soon determine there\n      // is no available game, the UI will switch to \"No experiments\n      // available\", nothing else to do.\n      return;\n    }\n\n    // TODO: MAYBE, add verification that the user is not current connected\n    // elsewhere and this is not a flagrant impersonation. Note that is\n    // extremely difficult to guaranty. Could also add verification of user's\n    // id with email verication for example. For now the assumption is that\n    // there is no immediate reason or long-term motiviation for people to hack\n    // each other's player account.\n\n    const existing = Players.findOne({ id: player.id });\n\n    // If the player already has a game lobby assigned, no need to\n    // re-initialize them\n    if (existing && existing.gameLobbyId) {\n      return existing._id;\n    }\n\n    if (existing) {\n      player = existing;\n    } else {\n      // Because of a bug in SimpleSchema around blackbox: true, skipping\n      // validation here. Validation did happen at the method level though.\n      player._id = Players.insert(player, {\n        filter: false,\n        validate: false\n      });\n    }\n\n    // Looking for all lobbies for batch (for which that game has not started yet)\n    const lobbies = GameLobbies.find({\n      batchId: batch._id,\n      status: \"running\",\n      timedOutAt: { $exists: false },\n      gameId: { $exists: false }\n    }).fetch();\n\n    if (lobbies.length === 0) {\n      // This is the same case as when there are no batches available.\n      return;\n    }\n\n    // Let's first try to find lobbies for which their queue isn't full yet\n    let lobbyPool = lobbies.filter(\n      l => l.availableCount > l.queuedPlayerIds.length\n    );\n\n    // If no lobbies still have \"availability\", just fill any lobby\n    if (lobbyPool.length === 0) {\n      lobbyPool = lobbies;\n    }\n\n    // Book proportially to total expected playerCount\n    const weigthedLobbyPool = lobbyPool.map(lobby => {\n      return {\n        value: lobby,\n        weight: lobby.availableCount\n      };\n    });\n\n    // Choose a lobby in the available weigthed pool\n    const lobby = weightedRandom(weigthedLobbyPool)();\n\n    // Adding the player to specified lobby queue\n    GameLobbies.update(lobby._id, {\n      $addToSet: {\n        queuedPlayerIds: player._id\n      }\n    });\n\n    const gameLobbyId = lobby._id;\n    const $set = { gameLobbyId };\n\n    // Check if there will be instructions\n    let skipInstructions = lobby.debugMode;\n\n    // If there are no instruction, mark the player as ready immediately\n    if (skipInstructions) {\n      $set.readyAt = new Date();\n    }\n\n    Players.update(player._id, { $set });\n\n    // If there are no instruction, player is ready, notify the lobby\n    if (skipInstructions) {\n      GameLobbies.update(gameLobbyId, {\n        $addToSet: { playerIds: player._id }\n      });\n    }\n\n    return player._id;\n  }\n});\n\nexport const playerReady = new ValidatedMethod({\n  name: \"Players.methods.ready\",\n\n  validate: IdSchema.validator(),\n\n  async run({ _id }) {\n    if (!Meteor.isServer) {\n      return;\n    }\n\n    try {\n      // Lobby might be locked if game is currently being created.\n      // We retry until lobby is unlocked.\n      while (!assignToLobby(_id)) {\n        await sleep(1000);\n      }\n    } catch (error) {\n      console.error(\"Players.methods.ready\", error);\n    }\n  }\n});\n\nfunction assignToLobby(_id) {\n  const player = Players.findOne(_id);\n\n  if (!player) {\n    throw `unknown ready player: ${_id}`;\n  }\n  const { readyAt, gameLobbyId } = player;\n\n  if (readyAt) {\n    // Already ready\n    return true;\n  }\n\n  const lobby = GameLobbies.findOne(gameLobbyId);\n\n  if (!lobby) {\n    throw `unknown lobby for ready player: ${_id}`;\n  }\n\n  // GameLobby is locked.\n  if (gameLobbyLock[gameLobbyId]) {\n    return false;\n  }\n\n  // Game is Full, bail the player\n  if (lobby.playerIds.length === lobby.availableCount) {\n    // User already ready, something happened out of order\n    if (lobby.playerIds.includes(_id)) {\n      return true;\n    }\n\n    // Mark the player's participation attemp as failed if\n    // not already marked exited\n    Players.update(\n      {\n        _id,\n        exitAt: { $exists: false }\n      },\n      {\n        $set: {\n          exitAt: new Date(),\n          exitStatus: \"gameFull\"\n        }\n      }\n    );\n\n    return true;\n  }\n\n  // Try to update the GameLobby with the playerIds we just queried.\n  GameLobbies.update(\n    { _id: gameLobbyId, playerIds: lobby.playerIds },\n    {\n      $addToSet: { playerIds: _id }\n    }\n  );\n\n  // If the playerId insert succeeded (playerId WAS added to playerIds),\n  // mark the user record as ready and potentially start the individual\n  // lobby timer.\n  const lobbyUpdated = GameLobbies.findOne(gameLobbyId);\n  if (lobbyUpdated.playerIds.includes(_id)) {\n    // If it did work, mark player as ready\n    $set = { readyAt: new Date() };\n\n    // If it's an individual lobby timeout, mark the first timer as started.\n    const lobbyConfig = LobbyConfigs.findOne(lobbyUpdated.lobbyConfigId);\n    if (lobbyConfig.timeoutType === \"individual\") {\n      $set.timeoutStartedAt = new Date();\n      $set.timeoutWaitCount = 1;\n    }\n\n    Players.update(_id, { $set });\n    return true;\n  }\n\n  // If the playerId insert failed (playerId NOT added to playerIds), the\n  // playerIds has changed since it was queried and the lobby might not\n  // have any available slots left, loop and retry.\n  return false;\n}\n\nexport const updatePlayerData = new ValidatedMethod({\n  name: \"Players.methods.updateData\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    key: {\n      type: String\n    },\n    value: {\n      type: String\n    },\n    append: {\n      type: Boolean,\n      optional: true\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ playerId, key, value, append, noCallback }) {\n    const player = Players.findOne(playerId);\n    if (!player) {\n      throw new Error(\"player not found\");\n    }\n    // TODO check can update this record player\n\n    const val = JSON.parse(value);\n    let update = { [`data.${key}`]: val };\n    const modifier = append ? { $push: update } : { $set: update };\n\n    Players.update(playerId, modifier, {\n      autoConvert: false,\n      filter: false,\n      validate: false,\n      trimStrings: false,\n      removeEmptyStrings: false\n    });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnChange({\n        playerId,\n        player,\n        key,\n        value: val,\n        prevValue: player.data && player.data[key],\n        append\n      });\n    }\n  }\n});\n\nexport const markPlayerExitStepDone = new ValidatedMethod({\n  name: \"Players.methods.markExitStepDone\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    stepName: {\n      type: String\n    }\n  }).validator(),\n\n  run({ playerId, stepName }) {\n    const player = Players.findOne(playerId);\n    if (!player) {\n      throw new Error(\"player not found\");\n    }\n    // TODO check can update this record player\n\n    Players.update(playerId, { $addToSet: { exitStepsDone: stepName } });\n  }\n});\n\nexport const extendPlayerTimeoutWait = new ValidatedMethod({\n  name: \"Players.methods.extendTimeoutWait\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    }\n  }).validator(),\n\n  run({ playerId }) {\n    const player = Players.findOne(playerId);\n    if (!player) {\n      throw new Error(\"player not found\");\n    }\n\n    Players.update(playerId, {\n      $inc: { timeoutWaitCount: 1 },\n      $set: { timeoutStartedAt: new Date() }\n    });\n  }\n});\n\nexport const endPlayerTimeoutWait = new ValidatedMethod({\n  name: \"Players.methods.endTimeoutWait\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    }\n  }).validator(),\n\n  run({ playerId }) {\n    const player = Players.findOne(playerId);\n    if (!player) {\n      throw new Error(\"player not found\");\n    }\n\n    Players.update(playerId, {\n      $set: {\n        exitStatus: \"playerEndedLobbyWait\",\n        exitAt: new Date()\n      }\n    });\n    GameLobbies.update(player.gameLobbyId, {\n      $pull: {\n        playerIds: playerId\n        // We keep the player in queuedPlayerIds so they will still have the\n        // fact they were in a lobby available in the UI, and so we can show\n        // them the exit steps.\n      }\n    });\n  }\n});\n\nexport const earlyExitPlayer = new ValidatedMethod({\n  name: \"Players.methods.admin.earlyExitPlayer\",\n\n  validate: new SimpleSchema({\n    exitReason: {\n      label: \"Reason for Exit\",\n      type: String,\n      regEx: /[a-zA-Z0-9_]+/\n    },\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    gameId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    }\n  }).validator(),\n\n  run({ exitReason, playerId, gameId }) {\n    if (!Meteor.isServer) {\n      return;\n    }\n\n    const game = Games.findOne(gameId);\n\n    if (!game) {\n      throw new Error(\"game not found\");\n    }\n\n    if (game && game.finishedAt) {\n      if (Meteor.isDevelopment) {\n        console.log(\"\\n\\ngame already ended!\");\n      }\n\n      return;\n    }\n\n    const currentPlayer = Players.findOne(playerId);\n\n    if (currentPlayer && currentPlayer.exitAt) {\n      if (Meteor.isDevelopment) {\n        console.log(\"\\nplayer already exited!\");\n      }\n\n      return;\n    }\n\n    Players.update(playerId, {\n      $set: {\n        exitAt: new Date(),\n        exitStatus: \"custom\",\n        exitReason\n      }\n    });\n\n    const players = Players.find({ gameId }).fetch();\n    const onlinePlayers = players.filter(player => !player.exitAt);\n\n    if (!onlinePlayers || (onlinePlayers && onlinePlayers.length === 0)) {\n      Games.update(gameId, {\n        $set: {\n          finishedAt: new Date(),\n          status: \"custom\",\n          endReason: \"finished_early\"\n        }\n      });\n\n      GameLobbies.update(\n        { gameId },\n        {\n          $set: {\n            status: \"custom\",\n            endReason: \"finished_early\"\n          }\n        }\n      );\n    }\n  }\n});\n\nexport const earlyExitPlayerLobby = new ValidatedMethod({\n  name: \"Players.methods.admin.earlyExitPlayerLobby\",\n\n  validate: new SimpleSchema({\n    exitReason: {\n      label: \"Reason for Exit\",\n      type: String,\n      regEx: /[a-zA-Z0-9_]+/\n    },\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    gameLobbyId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    }\n  }).validator(),\n\n  run({ exitReason, playerId, gameLobbyId }) {\n    if (!Meteor.isServer) {\n      return;\n    }\n\n    const gameLobby = GameLobbies.findOne(gameLobbyId);\n\n    if (!gameLobby) {\n      throw new Error(\"gameLobby not found\");\n    }\n\n    const currentPlayer = Players.findOne(playerId);\n\n    if (currentPlayer && currentPlayer.exitAt) {\n      if (Meteor.isDevelopment) {\n        console.log(\"\\nplayer already exited!\");\n      }\n\n      return;\n    }\n\n    Players.update(playerId, {\n      $set: {\n        exitAt: new Date(),\n        exitStatus: \"custom\",\n        exitReason\n      }\n    });\n  }\n});\n\nexport const retireSinglePlayer = new ValidatedMethod({\n  name: \"Players.methods.admin.retireSingle\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    }\n  }).validator(),\n\n  run({ playerId }) {\n    if (!playerId) {\n      throw new Error(\"empty playerId\");\n    }\n\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const player = Players.findOne({\n      _id: playerId,\n      retiredAt: { $exists: false }\n    });\n\n    if (!player) {\n      throw new Error(\"Player not found\");\n    }\n\n    const timestamp = new Date().toISOString();\n\n    Players.update(playerId, {\n      $set: {\n        id: `${player.id} (Retired custom at ${timestamp})`,\n        retiredAt: new Date(),\n        retiredReason: \"custom\"\n      }\n    });\n\n    return player;\n  }\n});\n\nexport const retireGameFullPlayers = new ValidatedMethod({\n  name: \"Players.methods.admin.retireGameFull\",\n\n  validate: new SimpleSchema({\n    retiredReason: {\n      label: \"Retired Reason\",\n      type: String,\n      optional: true,\n      allowedValues: exitStatuses\n    }\n  }).validator(),\n\n  run({ retiredReason }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const players = Players.find({\n      exitStatus: retiredReason,\n      retiredAt: { $exists: false }\n    }).fetch();\n\n    const timestamp = new Date().toISOString();\n\n    for (let i = 0; i < players.length; i++) {\n      const player = players[i];\n\n      Players.update(player._id, {\n        $set: {\n          id: `${player.id} (Retired ${retiredReason} at ${timestamp})`,\n          retiredAt: new Date(),\n          retiredReason\n        }\n      });\n    }\n\n    return players.length;\n  }\n});\n\nexport const playerWasRetired = new ValidatedMethod({\n  name: \"Players.methods.playerWasRetired\",\n\n  validate: IdSchema.validator(),\n\n  run({ _id }) {\n    return Boolean(\n      Players.findOne({\n        _id,\n        exitStatus: { $exists: true },\n        retiredAt: { $exists: true }\n      })\n    );\n  }\n});\n\nexport const updatePlayerStatus = new ValidatedMethod({\n  name: \"Players.methods.updateStatus\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n\n    idle: {\n      type: Boolean\n    },\n\n    lastActivityAt: {\n      type: Date\n    }\n  }).validator(),\n\n  run({ playerId, idle, lastActivityAt }) {\n    if (Meteor.isServer) {\n      const playerIdConn = shared.playerIdForConn(this.connection);\n      if (!playerIdConn) {\n        return;\n      }\n      if (playerId !== playerIdConn) {\n        console.error(\n          \"Attempting to update player status from wrong connection\"\n        );\n        return;\n      }\n    }\n\n    Players.update(playerId, {\n      $set: {\n        idle,\n        lastActivityAt\n      }\n    });\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\nimport { Counter } from \"../../lib/counters\";\nimport { BelongsTo, TimestampSchema, UserDataSchema } from \"../default-schemas\";\n\nclass PlayersCollection extends Mongo.Collection {\n  insert(doc, callback) {\n    doc.index = Counter.inc(\"players\");\n    return super.insert(doc, callback);\n  }\n}\n\nexport const Players = new PlayersCollection(\"players\");\n\nexport const exitStatuses = [\n  \"gameFull\",\n  \"gameCancelled\",\n  \"gameLobbyTimedOut\",\n  \"playerEndedLobbyWait\",\n  \"playerLobbyTimedOut\",\n  \"finished\",\n  \"cancelled\",\n  \"failed\",\n  \"custom\"\n];\n\nPlayers.schema = new SimpleSchema({\n  // The Player `id` is used to uniquely identify the player to avoid\n  // having a user play multiple times. It can be any string, for example\n  // an email address, a Mechanical Turk ID, a manually assigned participation\n  // number (saved as string), etc...\n  id: {\n    type: String,\n    max: 256\n  },\n\n  // True if the player is currently online and idle\n  idle: {\n    label: \"Idle\",\n    type: Boolean,\n    optional: true\n  },\n\n  // True if the player is currently online\n  online: {\n    label: \"Online\",\n    type: Boolean,\n    optional: true\n  },\n\n  // Time when the player was last seen online and active\n  lastActivityAt: {\n    label: \"Last Activity At\",\n    type: Date,\n    optional: true\n  },\n\n  lastLogin: { type: Object, optional: true },\n  \"lastLogin.at\": { type: Date, optional: true },\n  \"lastLogin.ip\": { type: String, optional: true },\n  \"lastLogin.userAgent\": { type: String, optional: true },\n\n  // Auto-incremented number assigned to players as they are created\n  index: {\n    type: SimpleSchema.Integer\n  },\n\n  // params contains any URL passed parameters\n  urlParams: {\n    type: Object,\n    blackbox: true,\n    defaultValue: {}\n  },\n\n  bot: {\n    label: \"Name of bot definition if player is a bot\",\n    type: String,\n    optional: true,\n    index: 1\n  },\n\n  // Time at witch the player became ready (done with intro)\n  readyAt: {\n    label: \"Ready At\",\n    type: Date,\n    optional: true\n  },\n\n  timeoutStartedAt: {\n    label: \"Time the first player arrived in the lobby\",\n    type: Date,\n    optional: true\n  },\n  timeoutWaitCount: {\n    label: \"Number of time the player has waited for timeoutStartedAt\",\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 1\n  },\n\n  exitStepsDone: {\n    type: Array,\n    defaultValue: []\n  },\n  \"exitStepsDone.$\": {\n    type: String\n  },\n\n  // Failed fields are filled when the player's participation in a game failed\n  exitAt: {\n    label: \"Exited At\",\n    type: Date,\n    optional: true\n  },\n  exitStatus: {\n    label: \"Failed Status\",\n    type: String,\n    optional: true,\n    allowedValues: exitStatuses\n  },\n  exitReason: {\n    label: \"Failed Reason\",\n    type: String,\n    optional: true,\n    regEx: /[a-zA-Z0-9_]+/\n  },\n\n  // A player can be retired. Retired players should no longer be used in active\n  // game, but NOTHING is done in the code to block that from happening. It's\n  // more of an indicator for debugging down the line.\n  retiredAt: {\n    label: \"Retired At\",\n    type: Date,\n    optional: true\n  },\n  retiredReason: {\n    label: \"Retired Reason\",\n    type: String,\n    optional: true,\n    allowedValues: exitStatuses\n  }\n});\n\nPlayers.schema.extend(TimestampSchema);\nPlayers.schema.extend(UserDataSchema);\nPlayers.schema.extend(BelongsTo(\"Games\", false));\nPlayers.schema.extend(BelongsTo(\"GameLobbies\", false));\nPlayers.attachSchema(Players.schema);\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { Rounds } from \"./rounds.js\";\nimport shared from \"../../shared.js\";\n\nexport const updateRoundData = new ValidatedMethod({\n  name: \"Rounds.methods.updateData\",\n\n  validate: new SimpleSchema({\n    roundId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    key: {\n      type: String\n    },\n    value: {\n      type: String\n    },\n    append: {\n      type: Boolean,\n      optional: true\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ roundId, key, value, append, noCallback }) {\n    const round = Rounds.findOne(roundId);\n    if (!round) {\n      throw new Error(\"round not found\");\n    }\n    // TODO check can update this record round\n\n    const val = JSON.parse(value);\n    let update = { [`data.${key}`]: val };\n    const modifier = append ? { $push: update } : { $set: update };\n\n    Rounds.update(roundId, modifier, {\n      autoConvert: false,\n      filter: false,\n      validate: false,\n      trimStrings: false,\n      removeEmptyStrings: false\n    });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnChange({\n        conn: this.connection,\n        roundId,\n        round,\n        key,\n        value: val,\n        prevValue: round.data && round.data[key],\n        append\n      });\n    }\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\n\nimport {\n  BelongsTo,\n  HasManyByRef,\n  UserDataSchema,\n  TimestampSchema\n} from \"../default-schemas\";\n\nexport const Rounds = new Mongo.Collection(\"rounds\");\n\nRounds.schema = new SimpleSchema({\n  // Index represents the 0 based position of the current round in the ordered\n  // list of a game's rounds. For display, add 1.\n  index: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 9999 // That's a lot of rounds...\n  }\n});\n\nRounds.schema.extend(TimestampSchema);\nRounds.schema.extend(UserDataSchema);\nRounds.schema.extend(HasManyByRef(\"Stages\"));\nRounds.schema.extend(BelongsTo(\"Games\"));\nRounds.schema.extend(HasManyByRef(\"PlayerRounds\"));\nRounds.attachSchema(Rounds.schema);\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { Stages } from \"./stages.js\";\nimport shared from \"../../shared.js\";\n\nexport const updateStageData = new ValidatedMethod({\n  name: \"Stages.methods.updateData\",\n\n  validate: new SimpleSchema({\n    stageId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    key: {\n      type: String\n    },\n    value: {\n      type: String\n    },\n    append: {\n      type: Boolean,\n      optional: true\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ stageId, key, value, append, noCallback }) {\n    const stage = Stages.findOne(stageId);\n    if (!stage) {\n      throw new Error(\"stage not found\");\n    }\n    // TODO check can update this record stage\n\n    const val = JSON.parse(value);\n    let update = { [`data.${key}`]: val };\n    const modifier = append ? { $push: update } : { $set: update };\n\n    Stages.update(stageId, modifier, {\n      autoConvert: false,\n      filter: false,\n      validate: false,\n      trimStrings: false,\n      removeEmptyStrings: false\n    });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnChange({\n        conn: this.connection,\n        stageId,\n        stage,\n        key,\n        value: val,\n        prevValue: stage.data && stage.data[key],\n        append\n      });\n    }\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\nimport moment from \"moment\";\n\nimport {\n  BelongsTo,\n  TimestampSchema,\n  UserDataSchema,\n  HasManyByRef\n} from \"../default-schemas\";\nimport { Games } from \"../games/games\";\nimport { PlayerStages } from \"../player-stages/player-stages\";\nimport { Rounds } from \"../rounds/rounds\";\n\nexport const Stages = new Mongo.Collection(\"stages\");\n\nStages.helpers({\n  round() {\n    return Rounds.findOne(this.roundId);\n  }\n});\n\nStages.stagePaddingDuration = moment.duration(0.25, \"seconds\");\n\nStages.schema = new SimpleSchema({\n  // Index represents the 0 based position of the current stage in the ordered\n  // list of a all the game's stages. For display, add 1.\n  index: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 999999 // That's a lot of stages...\n  },\n  name: {\n    type: String,\n    max: 64\n  },\n  displayName: {\n    type: String,\n    max: 128\n    // TODO Add auto value to by default copy the name into the displayName?\n  },\n  // This will synchronize the clients timer start time and record start time\n  // for the record\n  startTimeAt: {\n    type: Date,\n    optional: true\n  },\n  durationInSeconds: {\n    type: SimpleSchema.Integer,\n    // One day, that's a lot, but could be \"weird\" experiment, yet no going nuts\n    // into hundreds of years for example.\n    max: 24 * 60 * 60,\n    // It would be difficult to manage a timer that is less than 5s given all\n    // the multi-peer synchronization going on.\n    min: 5\n  }\n});\n\nStages.schema.extend(TimestampSchema);\nStages.schema.extend(UserDataSchema);\nStages.schema.extend(BelongsTo(\"Rounds\"));\nStages.schema.extend(BelongsTo(\"Games\"));\nStages.schema.extend(HasManyByRef(\"PlayerStages\"));\nStages.attachSchema(Stages.schema);\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { IdSchema } from \"../default-schemas.js\";\nimport { FactorTypes } from \"../factor-types/factor-types.js\";\nimport { Factors } from \"../factors/factors.js\";\nimport { Treatments } from \"./treatments\";\n\nexport const createTreatment = new ValidatedMethod({\n  name: \"Treatments.methods.create\",\n\n  validate: new SimpleSchema({\n    name: {\n      type: String,\n      max: 256,\n      optional: true\n    },\n    factorIds: {\n      type: Array,\n      label: \"Factors\"\n    },\n    \"factorIds.$\": {\n      type: String\n    }\n  }).validator(),\n\n  run(treatment) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    // Validate the required factor types\n    const requiredFactorTypes = FactorTypes.find({\n      required: true,\n      archivedAt: { $exists: false }\n    }).fetch();\n\n    if (requiredFactorTypes.length > 0) {\n      const createdFactors = Factors.find({\n        _id: { $in: treatment.factorIds }\n      }).fetch();\n      const createdFactorTypes = FactorTypes.find({\n        $and: [\n          {\n            _id: {\n              $in: createdFactors.map(f => f.factorTypeId)\n            }\n          },\n          { required: true }\n        ]\n      }).fetch();\n\n      if (requiredFactorTypes.length !== createdFactorTypes.length) {\n        throw new Error(\"Fill all required factors!\");\n      }\n    }\n\n    Treatments.insert(treatment);\n  }\n});\n\nexport const updateTreatment = new ValidatedMethod({\n  name: \"Treatments.methods.update\",\n\n  validate: Treatments.schema\n    .pick(\"name\")\n    .extend(\n      new SimpleSchema({\n        archived: {\n          type: Boolean,\n          optional: true\n        }\n      })\n    )\n    .extend(IdSchema)\n    .validator(),\n\n  run({ _id, name, archived }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n    const treatment = Treatments.findOne(_id);\n    if (!treatment) {\n      throw new Error(\"not found\");\n    }\n\n    const $set = {},\n      $unset = {};\n    if (name !== undefined) {\n      $set.name = name;\n    }\n    if (archived !== undefined) {\n      if (archived) {\n        if (treatment.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $set.archivedAt = new Date();\n        $set.archivedById = this.userId;\n      }\n      if (!archived) {\n        if (!treatment.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $unset.archivedAt = true;\n        $unset.archivedById = true;\n      }\n    }\n\n    const modifier = {};\n    if (Object.keys($set).length > 0) {\n      modifier.$set = $set;\n    }\n    if (Object.keys($unset).length > 0) {\n      modifier.$unset = $unset;\n    }\n    if (Object.keys(modifier).length === 0) {\n      return;\n    }\n\n    Treatments.update(_id, modifier);\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\n\nimport { Factors } from \"../factors/factors.js\";\nimport { FactorTypes } from \"../factor-types/factor-types.js\";\nimport { TimestampSchema, ArchivedSchema } from \"../default-schemas\";\n\nexport const Treatments = new Mongo.Collection(\"treatments\");\n\nTreatments.helpers({\n  displayName() {\n    return this.name || _.map(this.factors(), c => c.fullLabel()).join(\" - \");\n  },\n\n  factor(name) {\n    const type = FactorTypes.findOne({ name });\n    if (!type) {\n      return;\n    }\n    return this.factors().find(c => c.factorTypeId === type._id);\n  },\n\n  factors() {\n    const query = { _id: { $in: this.factorIds } };\n    return Factors.find(query).fetch();\n  },\n\n  factorsObject() {\n    const doc = {};\n    this.factors().forEach(c => {\n      const type = FactorTypes.findOne(c.factorTypeId);\n      doc[type.name] = c.value;\n    });\n    return doc;\n  }\n});\n\nTreatments.schema = new SimpleSchema({\n  // Optional experimenter given name for the treatment\n  name: {\n    type: String,\n    max: 256,\n    optional: true,\n    custom() {\n      if (this.isSet && Treatments.find({ name: this.value }).count() > 0) {\n        return \"notUnique\";\n      }\n    }\n\n    // regEx: /^[a-zA-Z0-9_]+$/\n  },\n\n  // Array of factorIds\n  factorIds: {\n    type: Array,\n    minCount: FactorTypes.requiredTypes,\n    label: \"Factors\",\n    index: true,\n    denyUpdate: true\n    // // Custom validation verifies required factors are present and that\n    // // there are no duplicate factors with the same key. We cannot easily\n    // // verify one of each factors is present.\n    // custom() {\n    //   if (!Meteor.isServer || !this.isInsert) {\n    //     return;\n    //   }\n\n    //   const factors = Factors.find({ _id: { $in: this.value } }).fetch();\n    //   const doc = {};\n    //   factors.forEach(c => (doc[c.type] = c.value));\n\n    //   const context = factorsSchema.newContext();\n    //   context.validate(doc);\n    //   if (!context.isValid()) {\n    //     const error = {\n    //       name: \"factorIds\",\n    //       type: \"invalid\",\n    //       details: context.validationErrors()\n    //     };\n    //     this.addValidationErrors([error]);\n    //     return \"invalid\";\n    //   }\n    // }\n  },\n\n  \"factorIds.$\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n    label: `Factor Item`\n  }\n});\n\nTreatments.schema.addDocValidator(({ factorIds }) => {\n  if (!this.isInsert) {\n    return [];\n  }\n  const query = {\n    factorIds: {\n      $size: factorIds.length,\n      $all: factorIds\n    }\n  };\n  if (Boolean(Treatments.findOne(query))) {\n    return [\n      {\n        name: \"factorIds\",\n        type: \"notUnique\"\n      }\n    ];\n  }\n  return [];\n});\n\nTreatments.schema.extend(TimestampSchema);\nTreatments.schema.extend(ArchivedSchema);\nTreatments.attachSchema(Treatments.schema);\n","import React from \"react\";\n\nfunction isClassComponent(component) {\n  return typeof component === \"function\" &&\n    !!component.prototype.isReactComponent\n    ? true\n    : false;\n}\n\nfunction isFunctionComponent(component) {\n  return typeof component === \"function\" &&\n    String(component).includes(\"return React.createElement\")\n    ? true\n    : false;\n}\n\nfunction isReactComponent(component) {\n  return isClassComponent(component) || isFunctionComponent(component)\n    ? true\n    : false;\n}\n\nfunction isElement(element) {\n  return React.isValidElement(element);\n}\n\nfunction isDOMTypeElement(element) {\n  return isElement(element) && typeof element.type === \"string\";\n}\n\nfunction isCompositeTypeElement(element) {\n  return isElement(element) && typeof element.type === \"function\";\n}\n\nmodule.exports = {\n  isClassComponent,\n  isFunctionComponent,\n  isReactComponent,\n  isElement,\n  isDOMTypeElement,\n  isCompositeTypeElement\n};\n","// Named Atomic counters\n//\n// Example:\n//    Counter.inc(\"something\") // => 1\n//    Counter.inc(\"something\") // => 2\n//    Counter.inc(\"something\", 8) // => 10\n//    Counter.inc(\"something\", -5) // => 5\n//    Counter.set(\"something\", 42) // => 42\n\nlet incset;\nif (Meteor.isServer) {\n  const raw = new Mongo.Collection(\"counters\").rawCollection();\n  findAndModify = Meteor.wrapAsync(raw.findAndModify, raw);\n\n  incset = op => (name, amount = 1) => {\n    const res = findAndModify(\n      { _id: name }, // query\n      null, // sort\n      { [`$${op}`]: { value: amount } }, // update\n      { new: true, upsert: true } // options\n    );\n    return res.value && res.value.value;\n  };\n} else {\n  incset = op => () => {};\n}\n\nexport const Counter = {\n  inc: incset(\"inc\"),\n  set: incset(\"set\")\n};\n","// ActivityMonitor tracks user activity and can emit an idle/active indicator\n// and a last active timestamp, in the browser.\n\nimport { Tracker } from \"meteor/tracker\";\nimport { TimeSync } from \"meteor/mizzao:timesync\";\n\n// idleThreshold is the duration in ms without activity after which we declare\n// the user idle.\nconst idleThreshold = 60000;\n\n// Interval at which to check if there was activity detected.\nconst checkInterval = 1000;\n\nlet monitorInterval = null;\nlet idle = false;\nlet lastActivityTime = TimeSync.serverTime();\n\nconst idleDep = new Tracker.Dependency();\nconst activityDep = new Tracker.Dependency();\n\nlet focused = document.hasFocus();\n\nfunction monitor(hasActivity) {\n  const now = Tracker.nonreactive(TimeSync.serverTime);\n\n  // Time hasn't synced yet\n  if (!now) {\n    return;\n  }\n\n  if (!lastActivityTime || (hasActivity && focused)) {\n    lastActivityTime = now;\n    activityDep.changed();\n  }\n\n  const newIdleness = !(focused && now - lastActivityTime < idleThreshold);\n  if (newIdleness !== idle) {\n    idle = newIdleness;\n    idleDep.changed();\n  }\n}\nconst trueMonitor = _.bind(monitor, null, true);\nconst signalActivity = _.throttle(trueMonitor, checkInterval);\nconst signalInactivity = () => monitor(false);\nfunction startup() {\n  if (monitorInterval) {\n    return;\n  }\n\n  // Listen for mouse and keyboard events on window\n  // TODO other stuff - e.g. touch events?\n  window.addEventListener(\"mousemove\", signalActivity);\n  window.addEventListener(\"click\", signalActivity);\n  window.addEventListener(\"keydown\", signalActivity);\n\n  // catch window blur events when requested and where supported\n  // We'll use jQuery here instead of window.blur so that other code can attach blur events:\n  // http://stackoverflow.com/q/22415296/586086\n  window.addEventListener(\"blur\", () => {\n    focused = false;\n    signalInactivity();\n  });\n  window.addEventListener(\"focus\", () => {\n    focused = true;\n    signalActivity();\n  });\n\n  // First check initial state if window loaded while blurred\n  // Some browsers don't fire focus on load: http://stackoverflow.com/a/10325169/586086\n  focused = document.hasFocus();\n\n  lastActivityTime = Tracker.nonreactive(TimeSync.serverTime);\n  activityDep.changed();\n\n  monitorInterval = Meteor.setInterval(monitor, checkInterval);\n}\n\nexport const ActivityMonitor = {\n  start() {\n    startup();\n  },\n\n  get isIdle() {\n    idleDep.depend();\n    return idle;\n  },\n\n  get isActive() {\n    idleDep.depend();\n    return !idle;\n  },\n\n  get lastActivityAt() {\n    activityDep.depend();\n\n    if (_.isNaN(lastActivityTime)) {\n      return null;\n    }\n\n    return new Date(lastActivityTime);\n  }\n};\n","import {\n  isClassComponent,\n  isFunctionComponent,\n  isReactComponent,\n  isElement\n} from \"./componentChecker\";\n\nexport const sleep = ms => {\n  return new Promise(function(resolve, _) {\n    setTimeout(() => {\n      resolve();\n    }, ms);\n  });\n};\n\nexport const weightedRandom = values => {\n  const samples = [];\n\n  for (var i = 0; i < values.length; i += 1) {\n    if (\n      !values[i] ||\n      !values[i].hasOwnProperty(\"value\") ||\n      !values[i].hasOwnProperty(\"weight\")\n    ) {\n      throw \"all values passed to weightedRandom must have a value and weight field\";\n    }\n    for (var j = 0; j < values[i].weight; j += 1) {\n      samples.push(values[i].value);\n    }\n  }\n\n  return () => samples[Math.floor(Math.random() * samples.length)];\n};\n\nexport const isReactComponents = components => {\n  let isValid = true;\n\n  if (components && _.isArray(components)) {\n    for (let i = 0; i < components.length; i++) {\n      if (\n        !isClassComponent(components[i]) &&\n        !isFunctionComponent(components[i]) &&\n        !isReactComponent(components[i]) &&\n        !isElement(components[i])\n      ) {\n        console.error(\"component is not a React Component!\", components[i]);\n        isValid = false;\n        break;\n      }\n    }\n  } else {\n    console.error(\"components is not Valid!\");\n    isValid = false;\n  }\n\n  return isValid;\n};\n\nlet STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/gm;\nlet ARGUMENT_NAMES = /(?:^|,)\\s*([^\\s,=]+)/g;\n\nexport const getFunctionParameters = func => {\n  let fnStr = func.toString().replace(STRIP_COMMENTS, \"\");\n  fnStr = fnStr.split(\"=>\")[0];\n  const argsList = fnStr.slice(fnStr.indexOf(\"(\") + 1, fnStr.indexOf(\")\"));\n  const result = argsList.match(ARGUMENT_NAMES);\n\n  if (result === null) {\n    return [];\n  } else {\n    let stripped = [];\n    for (let i = 0; i < result.length; i++) {\n      stripped.push(result[i].replace(/[\\s,]/g, \"\"));\n    }\n    return stripped;\n  }\n};\n\nexport const handleFactorValueErrorMessage = error => {\n  switch (error.type) {\n    case \"maxNumber\":\n    case \"maxString\":\n      return `Value must be less than or equal to  ${error.max} ${\n        error.type === \"maxString\" ? \"character(s)\" : \"\"\n      }.`;\n\n    case \"minNumber\":\n    case \"minString\":\n      return `Value must be greater than or equal to  ${error.min} ${\n        error.type === \"minString\" ? \"character(s)\" : \"\"\n      }.`;\n\n    case \"scopedUnique\":\n      return `${error.name} must be unique.`;\n\n    default:\n      return \"Unknown Error\";\n  }\n};\n","// Import modules used by both client and server through a single index entry point\n// e.g. useraccounts configuration file.\n\nimport \"../../api/schema-helpers.js\";\n","// This page work on saving a login token into a cookie for server requests\n// such as data export.\n//\n// Note: this is suboptimal, we are hacking the internals of account:base, but\n// there are no clea ways to integrate with tha Meteor acccount system.\n\nMeteor.startup(() => {\n  resetToken();\n});\n\n// override Meteor._localStorage methods and resetToken accordingly\nconst originalSetItem = Meteor._localStorage.setItem;\nMeteor._localStorage.setItem = function(key, value) {\n  if (key === \"Meteor.loginToken\") {\n    Meteor.defer(resetToken);\n  }\n  originalSetItem.call(Meteor._localStorage, key, value);\n};\n\nconst originalRemoveItem = Meteor._localStorage.removeItem;\nMeteor._localStorage.removeItem = function(key) {\n  if (key === \"Meteor.loginToken\") {\n    Meteor.defer(resetToken);\n  }\n  originalRemoveItem.call(Meteor._localStorage, key);\n};\n\nfunction resetToken() {\n  const loginToken = Meteor._localStorage.getItem(\"Meteor.loginToken\");\n  const loginTokenExpires = new Date(\n    Meteor._localStorage.getItem(\"Meteor.loginTokenExpires\")\n  );\n\n  if (loginToken) {\n    setToken(loginToken, loginTokenExpires);\n  } else {\n    setToken(null, new Date());\n  }\n}\n\nfunction setToken(loginToken, expires) {\n  document.cookie = `meteor_login_token=${loginToken}; expires=${expires.toUTCString()}; path=/`;\n}\n","import { ActivityMonitor } from \"../../lib/monitor.js\";\nimport { getPlayerId } from \"../../ui/containers/IdentifiedContainer.jsx\";\nimport { updatePlayerStatus } from \"../../api/players/methods.js\";\n\ntry {\n  let playerId;\n  Meteor.startup(() => {\n    Tracker.autorun(function() {\n      const newPlayerId = getPlayerId();\n      if (newPlayerId === playerId) {\n        return;\n      }\n\n      if (newPlayerId) {\n        Tracker.autorun(function() {\n          const idle = ActivityMonitor.isIdle;\n          const lastActivityAt = ActivityMonitor.lastActivityAt;\n          if (!lastActivityAt) {\n            return;\n          }\n\n          const id = playerId || newPlayerId;\n\n          if (!id) {\n            return;\n          }\n\n          updatePlayerStatus.call({\n            playerId: id,\n            idle,\n            lastActivityAt\n          });\n        });\n      }\n      playerId = newPlayerId;\n    });\n  });\n} catch (error) {\n  console.error(error);\n}\n","// Import client startup through a single index entry point\nimport { FocusStyleManager } from \"@blueprintjs/core\";\n\nTimeSync.loggingEnabled = false;\n\nimport \"../both/index.js\";\nimport \"./accounts.js\";\nimport \"./style.js\";\nimport \"./idle.js\";\n\n// https://blueprintjs.com/docs/#core/accessibility.focus-management\nFocusStyleManager.onlyShowFocusOnTabs();\n","import \"normalize.css/normalize.css\";\n// import \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\n","import React from \"react\";\n\nexport default class About extends React.Component {\n  render() {\n    return <>Here be the presentation of the experiement(ers).</>;\n  }\n}\n","import {\n  Alert,\n  Button,\n  Classes,\n  Divider,\n  Intent,\n  Menu,\n  MenuItem,\n  Navbar,\n  NavbarDivider,\n  NavbarGroup,\n  NavbarHeading,\n  Popover\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport moment from \"moment\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { NavLink, Route, Switch } from \"react-router-dom\";\nimport AdminBatchesContainer from \"../containers/admin/AdminBatchesContainer.jsx\";\nimport AdminFactorsContainer from \"../containers/admin/AdminFactorsContainer.jsx\";\nimport AdminLobbyConfigsContainer from \"../containers/admin/AdminLobbyConfigsContainer.jsx\";\nimport AdminPlayersContainer from \"../containers/admin/AdminPlayersContainer.jsx\";\nimport AdminTreatmentsContainer from \"../containers/admin/AdminTreatmentsContainer.jsx\";\nimport AdminExport from \"./admin/AdminExport.jsx\";\nimport AdminGames from \"./admin/AdminGames.jsx\";\nimport { withStaticProps } from \"./Helpers.jsx\";\nimport { AlertToaster, SuccessToaster } from \"./Toasters.jsx\";\n\nconst configurationPaths = [\n  \"/admin/treatments\",\n  \"/admin/treatments/archived\",\n  \"/admin/factors\",\n  \"/admin/factors/archived\",\n  \"/admin/lobby-configurations\",\n  \"/admin/lobby-configurations/archived\"\n];\n\nconst NavBarLink = ({ path, name, exact = false }) => (\n  <NavLink\n    exact={exact}\n    to={path}\n    activeClassName={Classes.ACTIVE}\n    className={[Classes.BUTTON, Classes.MINIMAL].join(\" \")}\n  >\n    {name}\n  </NavLink>\n);\n\nexport default class Admin extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const mode = configurationPaths.includes(props.location.pathname)\n      ? \"configuration\"\n      : \"monitoring\";\n    this.state = { mode, isOpenResetGames: false, isOpenResetApp: false };\n    this.setBodyDark(mode);\n    this.uploadRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.redirectLoggedOut(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.redirectLoggedOut(nextProps);\n\n    if (this.props.location.pathname !== nextProps.location.pathname) {\n      const mode = configurationPaths.includes(nextProps.location.pathname)\n        ? \"configuration\"\n        : \"monitoring\";\n      if (mode !== this.state.mode) {\n        this.setState({ mode });\n        this.setBodyDark(mode);\n      }\n    }\n  }\n\n  handleConfigImport = () => {\n    this.uploadRef.current.click();\n  };\n\n  onImportConfigFileSelected = event => {\n    const file = event.currentTarget.files[0];\n    event.currentTarget.value = null;\n    if (!file) {\n      AlertToaster.show({ message: \"No file selected\" });\n      return;\n    }\n\n    this.setState({ importing: true });\n\n    var r = new FileReader();\n    r.onload = e => {\n      var text = e.target.result;\n      console.log(\n        \"Got the file: \" +\n          \"name: \" +\n          file.name +\n          \"type: \" +\n          file.type +\n          \"size: \" +\n          file.size +\n          \" bytes:\"\n      );\n\n      Meteor.call(\"adminImportConfiguration\", { text }, err => {\n        this.setState({ importing: false });\n        if (err) {\n          AlertToaster.show({ message: `Failed to import: ${err}` });\n          return;\n        } else {\n          SuccessToaster.show({\n            message: \"Import Successful!\"\n          });\n        }\n      });\n    };\n    r.readAsText(file);\n  };\n\n  handleConfigExport = () => {\n    this.setState({ exporting: true });\n    Meteor.call(\"adminExportConfiguration\", (err, yaml) => {\n      this.setState({ exporting: false });\n      if (err) {\n        AlertToaster.show({\n          message: `Failed to export configuration: ${err}`\n        });\n      } else {\n        console.log(yaml);\n        const ts = moment().format(\"YYYY-MM-DD HH-mm-ss\");\n        const filename = `Empirica Configuration - ${ts}.yaml`;\n        const a = document.createElement(\"a\");\n        a.setAttribute(\n          \"href\",\n          \"data:text/plain;charset=utf-8,\" + encodeURIComponent(yaml)\n        );\n        a.setAttribute(\"download\", filename);\n        a.style.display = \"none\";\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n      }\n    });\n  };\n\n  setMode = mode => {\n    const { router } = this.context;\n\n    let path;\n    switch (mode) {\n      case \"monitoring\":\n        path = \"/admin\";\n        break;\n      case \"configuration\":\n        path = \"/admin/treatments\";\n        break;\n      default:\n        console.error(`unknown mode: ${mode}`);\n        return;\n    }\n\n    this.setState({ mode });\n    router.history.push(path);\n  };\n\n  setBodyDark = mode => {\n    if (mode === \"configuration\") {\n      document.body.classList.add(Classes.DARK);\n    } else {\n      document.body.classList.remove(Classes.DARK);\n    }\n  };\n\n  resetDatabaseIsActived() {\n    return Meteor.isDevelopment || Meteor.settings.public.debug_resetDatabase;\n  }\n\n  handleOpenApp = () => {\n    window.open(\"/\", \"_blank\");\n  };\n\n  handleLogout = () => {\n    Meteor.logout();\n  };\n\n  handleResetGames = () => {\n    this.setState({ isOpenResetGames: false });\n    if (!this.resetDatabaseIsActived()) {\n      return;\n    }\n    Meteor.call(\"adminResetDB\", true, err => {\n      if (err) {\n        AlertToaster.show({ message: `Failed to reset games: ${err}` });\n        return;\n      } else {\n        SuccessToaster.show({\n          message: \"Games reset!\"\n        });\n      }\n    });\n  };\n\n  handleResetApp = () => {\n    this.setState({ isOpenResetApp: false });\n    if (!this.resetDatabaseIsActived()) {\n      return;\n    }\n    Meteor.call(\"adminResetDB\", err => {\n      if (err) {\n        AlertToaster.show({ message: `Failed to reset app: ${err}` });\n        return;\n      } else {\n        SuccessToaster.show({\n          message: \"App reset!\"\n        });\n      }\n    });\n  };\n\n  redirectLoggedOut(props) {\n    const { user, loggingIn, loginPath } = props;\n    const { router } = this.context;\n\n    if (!loggingIn && !user) {\n      router.history.push(loginPath || `/login`);\n    }\n  }\n\n  render() {\n    const { user, loggingIn } = this.props;\n    const {\n      mode,\n      importing,\n      exporting,\n      isOpenResetGames,\n      isOpenResetApp\n    } = this.state;\n\n    if (loggingIn || !user) {\n      return null;\n    }\n\n    const isConfigMode = mode === \"configuration\";\n\n    return (\n      <div className=\"admin\">\n        <Helmet>\n          <title>Empirica Admin</title>\n        </Helmet>\n        <Navbar className=\"header\">\n          <NavbarGroup align=\"left\">\n            <NavbarHeading>\n              <strong>Empirica</strong>\n              <Divider tagName=\"span\" />\n              <span className={Classes.TEXT_MUTED}>\n                {isConfigMode ? \"Configuration\" : \"Monitoring\"}\n              </span>\n            </NavbarHeading>\n            {isConfigMode ? (\n              <>\n                <NavBarLink path=\"/admin/treatments\" name=\"Treatments\" />\n                <NavBarLink path=\"/admin/factors\" name=\"Factors\" />\n                <NavBarLink\n                  path=\"/admin/lobby-configurations\"\n                  name=\"Lobby Configurations\"\n                />\n                <NavbarDivider />\n                <Button\n                  text=\"Import\"\n                  minimal\n                  icon={IconNames.IMPORT}\n                  onClick={this.handleConfigImport}\n                  loading={importing}\n                />\n                <input\n                  ref={this.uploadRef}\n                  onChange={this.onImportConfigFileSelected}\n                  type=\"file\"\n                />\n                <Button\n                  text=\"Export\"\n                  minimal\n                  icon={IconNames.EXPORT}\n                  onClick={this.handleConfigExport}\n                  loading={exporting}\n                />\n              </>\n            ) : (\n              <>\n                <NavBarLink exact path=\"/admin\" name=\"Batches\" />\n                <NavBarLink path=\"/admin/games\" name=\"Games\" />\n                <NavBarLink path=\"/admin/players\" name=\"Players\" />\n                <NavBarLink path=\"/admin/export\" name=\"Export\" />\n              </>\n            )}\n          </NavbarGroup>\n\n          <NavbarGroup align=\"right\">\n            {isConfigMode ? (\n              <Button\n                icon={IconNames.PLAY}\n                onClick={this.setMode.bind(this, \"monitoring\")}\n              >\n                Monitoring\n              </Button>\n            ) : (\n              <Button\n                icon={IconNames.COG}\n                onClick={this.setMode.bind(this, \"configuration\")}\n              >\n                Configuration\n              </Button>\n            )}\n            <NavbarDivider />\n            {this.resetDatabaseIsActived() ? (\n              <>\n                <Popover\n                  content={\n                    <Menu>\n                      <MenuItem\n                        intent={Intent.WARNING}\n                        icon={IconNames.ERASER}\n                        text=\"Reset Games\"\n                        onClick={() =>\n                          this.setState({ isOpenResetGames: true })\n                        }\n                      />\n\n                      <MenuItem\n                        intent={Intent.DANGER}\n                        icon={IconNames.TRASH}\n                        text=\"Reset Entire App\"\n                        onClick={() => this.setState({ isOpenResetApp: true })}\n                      />\n                    </Menu>\n                  }\n                >\n                  <Button\n                    className={Classes.MINIMAL}\n                    icon={IconNames.ERASER}\n                    text=\"Reset\"\n                  />\n                </Popover>\n\n                <Alert\n                  className={isConfigMode ? Classes.DARK : \"\"}\n                  canOutsideClickCancel\n                  canEscapeKeyCancel\n                  confirmButtonText=\"Reset Games\"\n                  cancelButtonText=\"Cancel\"\n                  intent={Intent.WARNING}\n                  icon={IconNames.ERASER}\n                  isOpen={isOpenResetGames}\n                  onCancel={() => this.setState({ isOpenResetGames: false })}\n                  onConfirm={this.handleResetGames}\n                >\n                  <p>\n                    This will remove batches/games/players and keep\n                    treatments/factors.\n                  </p>\n                  <p>Do you wish to continue?</p>\n                </Alert>\n\n                <Alert\n                  className={isConfigMode ? Classes.DARK : \"\"}\n                  canOutsideClickCancel\n                  canEscapeKeyCancel\n                  confirmButtonText=\"Reset Entire App\"\n                  cancelButtonText=\"Cancel\"\n                  intent={Intent.DANGER}\n                  icon={IconNames.TRASH}\n                  isOpen={isOpenResetApp}\n                  onCancel={() => this.setState({ isOpenResetApp: false })}\n                  onConfirm={this.handleResetApp}\n                >\n                  <p>You are about to delete all data in the DB!</p>\n                  <p>Are you sure you want to do that?</p>\n                </Alert>\n              </>\n            ) : (\n              \"\"\n            )}\n            <NavbarDivider />{\" \"}\n            <Button\n              className={Classes.MINIMAL}\n              icon={IconNames.PLAY}\n              text=\"Open App\"\n              onClick={this.handleOpenApp}\n            />\n            <NavbarDivider />{\" \"}\n            <Button\n              className={Classes.MINIMAL}\n              icon={IconNames.LOG_OUT}\n              text=\"Logout\"\n              onClick={this.handleLogout}\n            />\n          </NavbarGroup>\n        </Navbar>\n\n        <main>\n          <Switch>\n            <Route path=\"/admin\" exact component={AdminBatchesContainer} />\n            <Route\n              path=\"/admin/batches/archived\"\n              component={withStaticProps(AdminBatchesContainer, {\n                archived: true\n              })}\n            />\n            <Route path=\"/admin/games\" component={AdminGames} />\n            <Route\n              path=\"/admin/players/retired\"\n              component={withStaticProps(AdminPlayersContainer, {\n                retired: true\n              })}\n            />\n            <Route path=\"/admin/players\" component={AdminPlayersContainer} />\n            <Route path=\"/admin/export\" component={AdminExport} />\n            <Route\n              path=\"/admin/treatments/archived\"\n              component={withStaticProps(AdminTreatmentsContainer, {\n                archived: true\n              })}\n            />\n            <Route\n              path=\"/admin/treatments\"\n              component={withStaticProps(AdminTreatmentsContainer, {\n                archived: false\n              })}\n            />\n            <Route\n              path=\"/admin/lobby-configurations/archived\"\n              component={withStaticProps(AdminLobbyConfigsContainer, {\n                archived: true\n              })}\n            />\n            <Route\n              path=\"/admin/lobby-configurations\"\n              component={withStaticProps(AdminLobbyConfigsContainer, {\n                archived: false\n              })}\n            />\n            <Route\n              path=\"/admin/factors/archived\"\n              component={withStaticProps(AdminFactorsContainer, {\n                archived: true\n              })}\n            />\n            <Route path=\"/admin/factors\" component={AdminFactorsContainer} />\n          </Switch>\n        </main>\n      </div>\n    );\n  }\n}\n\nAdmin.propTypes = {\n  user: PropTypes.object, // Current meteor user\n  loggingIn: PropTypes.bool, // Current meteor user logging in\n  loading: PropTypes.bool // Subscription status\n};\n\nAdmin.contextTypes = {\n  router: PropTypes.object\n};\n","import React from \"react\";\n\nimport { Breadcrumb as Crumb, Classes } from \"@blueprintjs/core\";\n\nexport default class Breadcrumb extends React.Component {\n  render() {\n    const { round, stage } = this.props;\n\n    return (\n      <nav className=\"round-nav\">\n        <ul className={Classes.BREADCRUMBS}>\n          <li>\n            <Crumb text={`Round ${round.index + 1}`} />\n          </li>\n          {round.stages.map(s => {\n            const disabled = s.name !== stage.name;\n            const current = disabled ? \"\" : Classes.BREADCRUMB_CURRENT;\n            return (\n              <li key={s.name}>\n                <Crumb\n                  text={s.displayName}\n                  disabled={disabled}\n                  className={current}\n                />\n              </li>\n            );\n          })}\n        </ul>\n      </nav>\n    );\n  }\n}\n","import React from \"react\";\n\n// Centered is a simple helper for centered pages\nexport default class Centered extends React.Component {\n  render() {\n    return <div className=\"centered\">{this.props.children}</div>;\n  }\n}\n","import React from \"react\";\n\nimport { Button, Intent } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport Centered from \"./Centered.jsx\";\nimport { ConsentButtonContext } from \"./NewPlayer.jsx\";\n\nconst ConsentButton = ({ text = \"AGREE\", onConsent }) => (\n  <ConsentButtonContext.Consumer>\n    {consentCallback => (\n      <Button\n        text={text}\n        icon={IconNames.TICK}\n        intent={Intent.SUCCESS}\n        onClick={onConsent || consentCallback}\n      />\n    )}\n  </ConsentButtonContext.Consumer>\n);\n\nexport default class Consent extends React.Component {\n  render() {\n    return (\n      <Centered>\n        <div className=\"consent\">\n          <h1> Consent Form </h1>\n          <p>\n            This experiment is part of a MIT scientific project. Your decision\n            to participate in this experiment is entirely voluntary. There are\n            no known or anticipated risks to participating in this experiment.\n            There is no way for us to identify you. The only information we will\n            have, in addition to your responses, is the timestamps of your\n            interactions with our site. The results of our research may be\n            presented at scientific meetings or published in scientific\n            journals. Clicking on the \"AGREE\" button indicates that you are at\n            least 18 years of age, and agree to participate voluntary.\n          </p>\n          <ConsentButton />\n        </div>\n      </Centered>\n    );\n  }\n}\n\nexport { ConsentButton };\n","import React from \"react\";\n\nconst DelayedDisplay = (Component, delay = 100) =>\n  class extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = { visible: false };\n      // Don't immediatelly show, short loading times don't need a spinner\n      this.timeout = setTimeout(() => this.setState({ visible: true }), delay);\n    }\n\n    componentWillUnmount() {\n      clearTimeout(this.timeout);\n    }\n\n    render() {\n      const { visible } = this.state;\n\n      return (\n        <div className={`delayed ${visible ? \"visible\" : \"\"}`}>\n          <Component {...this.props} />\n        </div>\n      );\n    }\n  };\n\nexport default DelayedDisplay;\n","import { NonIdealState } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport React from \"react\";\n\nconst errExitStepMissingName = `\nAt least one Exit Step is missing a stepName. All Exist Steps Components must\nhave a stepName. E.g.:\n\nexport default class Thanks extends React.Component {\n  static stepName = \"Thanks\";\n  render() {\n    return (\n      <div className=\"thanks\">\n        <h3>Thanks!</h3>\n      </div>\n    );\n  }\n}\n\n`;\nconst errExitStepDups = dups =>\n  `All 'Exit Steps' must be unique (have a unique stepName). Duplicated: ${dups}.`;\n\nexport default class ExitSteps extends React.Component {\n  constructor(props) {\n    super(props);\n    const { game, player, steps: unfilteredSteps } = props;\n\n    // Checks steps have a name\n    const stepNames = unfilteredSteps.map(s => (s.stepName || \"\").trim());\n    for (let index = 0; index < stepNames.length; index++) {\n      const sname = stepNames[index];\n      if (_.isEmpty(sname)) {\n        alert(errExitStepMissingName);\n        console.error(errExitStepMissingName);\n        this.state = { failed: errExitStepMissingName };\n        return;\n      }\n    }\n\n    // Checks steps are unique\n    if (stepNames.length !== _.uniq(stepNames).length) {\n      const counts = {};\n      stepNames.forEach(n => (counts[n] = (counts[n] || 0) + 1));\n      const dups = _.compact(_.map(counts, (v, k) => (v > 1 ? k : null))).join(\n        \", \"\n      );\n      const err = errExitStepDups(dups);\n      alert(err);\n      this.state = { failed: err };\n      return null;\n    }\n\n    const done = player.exitStepsDone || [];\n    const steps = unfilteredSteps.filter(s => !done.includes(s.stepName));\n\n    this.state = { current: 0, steps };\n  }\n\n  onSubmit = data => {\n    let { onSubmit } = this.props;\n    let { steps, current } = this.state;\n    const Step = steps[current];\n    onSubmit(Step.stepName, data);\n    current = current + 1;\n    this.setState({ current });\n  };\n\n  render() {\n    const { failed, steps, current } = this.state;\n\n    if (failed) {\n      return failed;\n    }\n\n    if (_.isEmpty(steps)) {\n      return this.renderDefault();\n    }\n\n    const Step = steps[current];\n    const hasNext = steps.length - 1 > current;\n\n    return <Step {...this.props} hasNext={hasNext} onSubmit={this.onSubmit} />;\n  }\n\n  renderDefault() {\n    return (\n      <div className=\"game finished\">\n        <NonIdealState\n          icon={IconNames.TICK}\n          title=\"Finished!\"\n          description=\"Thank you for participating.\"\n        />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { addPlayerInput } from \"../../api/player-inputs/methods.js\";\nimport {\n  markPlayerExitStepDone,\n  playerReady\n} from \"../../api/players/methods.js\";\nimport GameLobby from \"../components/GameLobby.jsx\";\nimport GameLobbyContainer from \"../containers/GameLobbyContainer.jsx\";\nimport DefaultBreadcrumb from \"./Breadcrumb.jsx\";\nimport DelayedDisplay from \"./DelayedDisplay.jsx\";\nimport ExitSteps from \"./ExitSteps.jsx\";\nimport InstructionSteps from \"./InstructionSteps.jsx\";\nimport Loading from \"./Loading.jsx\";\nimport WaitingForServer from \"./WaitingForServer.jsx\";\n\nconst DelayedWaitingForServer = DelayedDisplay(WaitingForServer, 250);\nconst DelayedGameLobby = DelayedDisplay(GameLobby, 250);\n\nlet playerReadyClicked = false;\n\nexport default class Game extends React.Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    return !_.isEqual(this.props, nextProps);\n  }\n\n  render() {\n    const {\n      loading,\n      gameLobby,\n      treatment,\n      Round,\n      Breadcrumb,\n      Waiting,\n      Lobby,\n      exitSteps,\n      introSteps,\n      ...rest\n    } = this.props;\n    const { started, timedOut, game, player, round, stage } = rest;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (player.exitAt) {\n      return (\n        <ExitSteps\n          {...rest}\n          steps={exitSteps(game || gameLobby, player)}\n          game={game || gameLobby}\n          player={player}\n          onSubmit={(stepName, data) => {\n            const playerId = player._id;\n            markPlayerExitStepDone.call({ playerId, stepName });\n            // Checkig for data.nativeEvent, as that indicates the data is an\n            // event object dispached by React.\n            if (data && !data.nativeEvent) {\n              try {\n                const encoded = JSON.stringify(data);\n                addPlayerInput.call({\n                  playerId,\n                  data: encoded,\n                  gameId: game && game._id,\n                  gameLobbyId: game ? null : gameLobby && gameLobby._id\n                });\n              } catch (e) {\n                console.error(\"could not encode data returned by onSubmit\", e);\n              }\n            }\n          }}\n        />\n      );\n    }\n\n    if (!game) {\n      if (playerReadyClicked) {\n        return <Loading />;\n      }\n\n      if (player.readyAt) {\n        const gameLobbyProps = {\n          ...rest,\n          gameLobby,\n          game: gameLobby,\n          treatment,\n          player\n        };\n\n        return (\n          <GameLobbyContainer {...gameLobbyProps}>\n            {Lobby ? (\n              <Lobby {...gameLobbyProps} />\n            ) : (\n              <DelayedGameLobby {...gameLobbyProps} />\n            )}\n          </GameLobbyContainer>\n        );\n      }\n\n      return (\n        <InstructionSteps\n          {...rest}\n          introSteps={introSteps}\n          treatment={treatment}\n          player={player}\n          onDone={() => {\n            playerReadyClicked = true;\n            playerReady.call({ _id: player._id }, () => {\n              playerReadyClicked = false;\n            });\n          }}\n        />\n      );\n    }\n\n    let content;\n    if (timedOut || !started) {\n      if (Waiting) {\n        content = <Waiting />;\n      } else if (treatment.factor(\"playerCount\").value === 1) {\n        content = <Loading />;\n      } else {\n        content = <DelayedWaitingForServer />;\n      }\n    } else {\n      content = <Round {...rest} />;\n    }\n\n    const BC = Breadcrumb !== undefined ? Breadcrumb : DefaultBreadcrumb;\n    const breadcrumb = BC && (\n      <BC game={game} player={player} round={round} stage={stage} />\n    );\n\n    return (\n      <div className=\"game\">\n        {breadcrumb}\n        {content}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport { Alert, Intent, NonIdealState } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { CoreWrapper } from \"./Helpers.jsx\";\nimport {\n  endPlayerTimeoutWait,\n  extendPlayerTimeoutWait\n} from \"../../api/players/methods.js\";\n\nexport default class GameLobby extends React.Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    return !_.isEqual(this.props, nextProps);\n  }\n\n  handleWaitLonger = () => {\n    extendPlayerTimeoutWait.call({ playerId: this.props.player._id });\n  };\n\n  handleExitNow = () => {\n    endPlayerTimeoutWait.call({ playerId: this.props.player._id });\n  };\n\n  render() {\n    const { gameLobby, treatment, timedOut, lobbyConfig, player } = this.props;\n\n    const total = treatment.factor(\"playerCount\").value;\n    const exisiting = gameLobby.playerIds.length;\n\n    if (exisiting >= total) {\n      return (\n        <CoreWrapper>\n          <div className=\"game-lobby\">\n            <NonIdealState\n              icon={IconNames.PLAY}\n              title=\"Game loading...\"\n              description=\"Your game will be starting shortly, get ready!\"\n            />\n          </div>\n        </CoreWrapper>\n      );\n    }\n\n    const showExtensionAlert =\n      timedOut &&\n      lobbyConfig.timeoutType === \"individual\" &&\n      lobbyConfig.extendCount >= player.timeoutWaitCount;\n\n    return (\n      <CoreWrapper>\n        <div className=\"game-lobby\">\n          <NonIdealState\n            icon={IconNames.TIME}\n            title=\"Lobby\"\n            description={\n              <>\n                <p>Please wait for the game to be ready...</p>\n                <p>\n                  {exisiting} / {total} players ready.\n                </p>\n              </>\n            }\n          />\n        </div>\n        <Alert\n          intent={Intent.PRIMARY}\n          isOpen={showExtensionAlert}\n          confirmButtonText=\"Wait Longer\"\n          cancelButtonText=\"Exit Now\"\n          onConfirm={this.handleWaitLonger}\n          onCancel={this.handleExitNow}\n        >\n          <p>\n            Sorry you have been waiting for a while. Do you wish to wait longer\n            or exit now?\n          </p>\n        </Alert>\n      </CoreWrapper>\n    );\n  }\n}\n","import React from \"react\";\n\nimport { Classes, Icon } from \"@blueprintjs/core\";\n\nexport const Heading = ({\n  level = \"h1\",\n  children,\n  icon,\n  iconSize,\n  className,\n  ...rest\n}) => {\n  const classNames = [Classes.HEADING];\n  if (className) {\n    classNames.push(className);\n  }\n  return React.createElement(\n    level,\n    { className: classNames.join(\" \"), ...rest },\n    <>\n      {icon ? (\n        <>\n          <Icon icon={icon} iconSize={iconSize} />{\" \"}\n        </>\n      ) : null}\n      {children}\n    </>\n  );\n};\n\nexport const H1 = props => {\n  return <Heading level=\"h1\" {...props} />;\n};\n\nexport const H2 = props => {\n  return <Heading level=\"h2\" {...props} />;\n};\n\nexport const H3 = props => {\n  return <Heading level=\"h3\" {...props} />;\n};\n\nexport const H4 = props => {\n  return <Heading level=\"h4\" {...props} />;\n};\n\nexport const H5 = props => {\n  return <Heading level=\"h5\" {...props} />;\n};\n\nexport const H6 = props => {\n  return <Heading level=\"h6\" {...props} />;\n};\n","import React from \"react\";\n\nimport { Icon, Tooltip, Position } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nconst HelpTooltip = ({ content }) => (\n  <Tooltip\n    className=\"help-tooltip-wrapper\"\n    content={<span className=\"help-tooltip\">{content}</span>}\n    position={Position.TOP}\n  >\n    <Icon className=\"help-tooltip-icon\" icon={(IconNames = \"help\")} />\n  </Tooltip>\n);\n\nexport default HelpTooltip;\n","import React from \"react\";\n\nexport const DevNote = ({ children, block = false }) =>\n  block ? (\n    <p className=\"devnote\">\n      <strong>DevNote</strong> {children}\n    </p>\n  ) : (\n    <span className=\"devnote\">\n      <strong>DevNote</strong> {children}\n    </span>\n  );\n\nexport const CoreWrapper = ({ children }) => (\n  <div className=\"core\">{children}</div>\n);\n\nexport const withStaticProps = (WrappedComponent, props) => {\n  return class extends React.Component {\n    render() {\n      return <WrappedComponent {...props} {...this.props} />;\n    }\n  };\n};\n","import React from \"react\";\nimport Loading from \"./Loading.jsx\";\n\nexport default class InstructionSteps extends React.Component {\n  state = { current: 0 };\n\n  componentDidMount() {\n    this.setIntroStepIndex();\n  }\n\n  setIntroStepIndex() {\n    const { player } = this.props;\n    if (!window.currentIntroStep) {\n      window.currentIntroStep = {};\n      return;\n    }\n\n    const currentIntroStep = window.currentIntroStep[player._id];\n    if (!currentIntroStep) {\n      return;\n    }\n\n    this.setState({ current: currentIntroStep });\n  }\n\n  componentWillMount() {\n    const { introSteps, treatment, onDone } = this.props;\n\n    const factors = treatment.factorsObject();\n    const steps = introSteps({ treatment: factors }, factors);\n\n    const noInstruction = !steps || steps.length === 0;\n\n    if (noInstruction) {\n      onDone();\n    }\n\n    this.setState({ steps, noInstruction });\n  }\n\n  onNext = () => {\n    let { onDone, player } = this.props;\n    let { steps, current } = this.state;\n    current = current + 1;\n    if (current >= steps.length) {\n      onDone();\n      return;\n    }\n    this.setState({ current });\n    window.currentIntroStep[player._id] = current;\n  };\n\n  onPrev = () => {\n    const { player } = this.props;\n    let current = this.state.current - 1;\n\n    this.setState({ current });\n    window.currentIntroStep[player._id] = current;\n  };\n\n  resetIntroSteps = () => {\n    const { player } = this.props;\n    this.setState({ current: 0 });\n\n    if (!window.currentIntroStep) {\n      return;\n    }\n\n    if (!window.currentIntroStep[player._id]) {\n      return;\n    }\n\n    window.currentIntroStep[player._id] = 0;\n  };\n\n  render() {\n    const { treatment, player, ...rest } = this.props;\n    const { steps, current, noInstruction } = this.state;\n\n    if (noInstruction) {\n      return <Loading />;\n    }\n\n    const Step = steps[current];\n    const hasNext = steps.length - 1 > current;\n    const hasPrev = current > 0;\n    const conds = treatment.factorsObject();\n    const introPlayer = { ...player, resetIntroSteps: this.resetIntroSteps };\n\n    return (\n      <div className=\"introduction-steps\">\n        <Step\n          {...rest}\n          hasPrev={hasPrev}\n          hasNext={hasNext}\n          onPrev={this.onPrev}\n          onNext={this.onNext}\n          player={introPlayer}\n          treatment={conds}\n          game={{ treatment: conds }}\n        />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class Loading extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { visible: false };\n    // Don't immediatelly show, short loading times don't need a spinner\n    this.timeout = setTimeout(() => this.setState({ visible: true }), 500);\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.timeout);\n  }\n\n  render() {\n    return (\n      <div className={`loading ${this.state.visible ? \"visible\" : \"\"}`}>\n        <div>\n          Loading...\n          <div className=\"la-ball-grid-beat la-dark\">\n            <div />\n            <div />\n            <div />\n            <div />\n            <div />\n            <div />\n            <div />\n            <div />\n            <div />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class LoadingInline extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { visible: false };\n    // Don't immediatelly show, short loading times don't need a spinner\n    this.timeout = setTimeout(() => this.setState({ visible: true }), 500);\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.timeout);\n  }\n\n  render() {\n    return (\n      <div className={`loading-inline ${this.state.visible ? \"visible\" : \"\"}`}>\n        <div>\n          <div className=\"la-ball-beat la-dark\">\n            <div />\n            <div />\n            <div />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { Button, ControlGroup, InputGroup, Intent } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { AlertToaster } from \"./Toasters.jsx\";\n\nexport default class Login extends React.Component {\n  state = { username: \"admin\", password: \"\" };\n\n  componentWillUnmount() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n  }\n\n  componentDidMount() {\n    const redirecting = this.redirectLoggedIn(this.props);\n    if (redirecting) {\n      return;\n    }\n    this.timeout = setTimeout(() => {\n      this.timeout = null;\n      const field = document.querySelector(\"#password\");\n      if (field) {\n        field.focus();\n      }\n    }, 100);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.redirectLoggedIn(nextProps);\n  }\n\n  onChange = event => {\n    const { value, name } = event.currentTarget;\n    this.setState({ [name]: value });\n  };\n\n  redirectLoggedIn(props) {\n    const { user, loggingIn, adminPath } = props;\n    const { router } = this.context;\n\n    if (!loggingIn && user) {\n      router.history.push(adminPath || `/admin`);\n      return true;\n    }\n  }\n\n  handleForm = event => {\n    event.preventDefault();\n    const { username, password } = this.state;\n    Meteor.loginWithPassword(username, password, err => {\n      if (err) {\n        AlertToaster.show({ message: String(err) });\n      }\n    });\n  };\n\n  render() {\n    const { user, loggingIn } = this.props;\n    const { username, password } = this.state;\n\n    if (loggingIn || user) {\n      return null;\n    }\n\n    return (\n      <div className=\"login\">\n        <form onSubmit={this.handleForm}>\n          <h1>Log in</h1>\n\n          <ControlGroup vertical>\n            <InputGroup\n              large\n              leftIcon={IconNames.PERSON}\n              name=\"username\"\n              id=\"username\"\n              placeholder=\"Username\"\n              value={username}\n              onChange={this.onChange}\n              autoComplete={\"off\"}\n            />\n            <InputGroup\n              large\n              leftIcon={IconNames.LOCK}\n              type=\"password\"\n              name=\"password\"\n              id=\"password\"\n              placeholder=\"Password\"\n              value={password}\n              onChange={this.onChange}\n            />\n            <Button text=\"Login\" large intent={Intent.PRIMARY} type=\"submit\" />\n          </ControlGroup>\n        </form>\n\n        {Meteor.isDevelopment ? (\n          <p>\n            If you have not yet set a password, you can find an autogenerated\n            password in your application's logs.\n          </p>\n        ) : (\n          \"\"\n        )}\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  user: PropTypes.object, // Current meteor user\n  loggingIn: PropTypes.bool, // Current meteor user logging in\n  loading: PropTypes.bool // Subscription status\n};\n\nLogin.contextTypes = {\n  router: PropTypes.object\n};\n","import React from \"react\";\nimport { createPlayer } from \"../../api/players/methods\";\nimport { setPlayerId } from \"../containers/IdentifiedContainer.jsx\";\nimport Loading from \"./Loading.jsx\";\nimport NewPlayerForm from \"./NewPlayerForm.jsx\";\nimport { AlertToaster } from \"./Toasters.jsx\";\n\nconst { playerIdParam } = Meteor.settings.public;\n\nexport const ConsentButtonContext = React.createContext(null);\n\nexport default class NewPlayer extends React.Component {\n  state = { consented: false };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.consented && !prevState.consented) {\n      this.timeout = setTimeout(() => {\n        this.timeout = null;\n        const idField = window.document.querySelector(\"#id\");\n        if (idField) {\n          idField.focus();\n        }\n      }, 100);\n    }\n  }\n\n  componentWillMount() {\n    if (!this.props.Consent) {\n      this.playerFromIdParam();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n  }\n\n  handleConsent = () => {\n    this.setState({ consented: true });\n    this.playerFromIdParam();\n  };\n\n  handleNewPlayer = id => {\n    if (!id || !id.trim()) {\n      AlertToaster.show({ message: \"Player Identifier cannot be empty!\" });\n      return;\n    }\n\n    const urlParams = {};\n    const searchParams = new URL(document.location).searchParams;\n    for (var pair of searchParams.entries()) {\n      urlParams[pair[0]] = pair[1];\n    }\n\n    createPlayer.call({ id, urlParams }, (err, _id) => {\n      if (err) {\n        console.error(err);\n        AlertToaster.show({ message: String(err) });\n        return;\n      }\n\n      setPlayerId(_id);\n    });\n  };\n\n  playerFromIdParam() {\n    const { playerIdParam } = Meteor.settings.public;\n\n    if (playerIdParam) {\n      const searchParams = new URL(document.location).searchParams;\n      const id = searchParams.get(playerIdParam);\n      if (id) {\n        const urlParams = {};\n        for (var pair of searchParams.entries()) {\n          urlParams[pair[0]] = pair[1];\n        }\n        this.setState({ attemptingAutoLogin: true });\n        createPlayer.call({ id, urlParams }, (err, _id) => {\n          if (err) {\n            this.setState({ attemptingAutoLogin: false });\n            console.error(err);\n            AlertToaster.show({ message: String(err) });\n            return;\n          }\n\n          setPlayerId(_id);\n        });\n      }\n    }\n  }\n\n  render() {\n    const { Consent, CustomNewPlayer } = this.props;\n    const { consented, attemptingAutoLogin } = this.state;\n    const Form = CustomNewPlayer || NewPlayerForm;\n\n    if (attemptingAutoLogin) {\n      return <Loading />;\n    }\n\n    if (!consented && Consent) {\n      return (\n        <ConsentButtonContext.Provider value={this.handleConsent}>\n          <Consent {...this.props} onConsent={this.handleConsent} />\n        </ConsentButtonContext.Provider>\n      );\n    }\n\n    return <Form {...this.props} handleNewPlayer={this.handleNewPlayer} />;\n  }\n}\n","import React from \"react\";\n\nimport { Button, Classes, FormGroup } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport Centered from \"./Centered.jsx\";\n\nexport default class NewPlayerForm extends React.Component {\n  state = { id: \"\" };\n\n  handleUpdate = event => {\n    const { value, name } = event.currentTarget;\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    const { handleNewPlayer } = this.props;\n    const { id } = this.state;\n    handleNewPlayer(id);\n  };\n\n  render() {\n    const { id } = this.state;\n\n    return (\n      <Centered>\n        <div className=\"new-player\">\n          <form onSubmit={this.handleSubmit}>\n            <h1>Identification</h1>\n\n            <FormGroup\n              label=\"Player ID\"\n              labelFor=\"id\"\n              helperText={\n                <>\n                  Enter your player identification{\" \"}\n                  <span className=\"bp3-text-muted\">\n                    (provided ID, MTurk ID, etc.)\n                  </span>\n                </>\n              }\n            >\n              <input\n                className={Classes.INPUT}\n                dir=\"auto\"\n                type=\"text\"\n                name=\"id\"\n                id=\"id\"\n                value={id}\n                onChange={this.handleUpdate}\n                placeholder=\"e.g. john@example.com\"\n                required\n                autoComplete=\"off\"\n              />\n            </FormGroup>\n\n            <FormGroup>\n              <Button type=\"submit\" text=\"Submit\" icon={IconNames.KEY_ENTER} />\n            </FormGroup>\n          </form>\n        </div>\n      </Centered>\n    );\n  }\n}\n","import { NonIdealState } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default class NoBatch extends React.Component {\n  render() {\n    // Not sure what icon works best:\n    // - SMALL_CROSS\n    // - BAN_CIRCLE\n    // - ERROR\n    // - DISABLE\n    // - WARNING_SIGN\n    return (\n      <NonIdealState\n        icon={IconNames.ISSUE}\n        title=\"No experiments available\"\n        description={\n          <>\n            <p>\n              There are currently no available experiments. Please wait until an\n              experiment becomes available or come back at a later date.\n            </p>\n            {Meteor.isDevelopment ? (\n              <p>\n                Go to{\" \"}\n                <a href=\"/admin\" target=\"_blank\">\n                  Admin\n                </a>{\" \"}\n                to get started.\n              </p>\n            ) : (\n              \"\"\n            )}\n          </>\n        }\n      />\n    );\n  }\n}\n","const showOpenAdmin = Meteor.isDevelopment;\nconst showOpenAltPlayer =\n  Meteor.isDevelopment || Meteor.settings.public.debug_resetSession;\nconst showReset =\n  Meteor.isDevelopment || Meteor.settings.public.debug_newPlayer;\n\nimport {\n  Button,\n  Classes,\n  Dialog,\n  Icon,\n  Intent,\n  NavbarHeading\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport React from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { Link } from \"react-router-dom\";\nimport GameContainer from \"../containers/GameContainer.jsx\";\nimport { removePlayerId } from \"../containers/IdentifiedContainer.jsx\";\nimport { CoreWrapper } from \"./Helpers.jsx\";\nimport Loading from \"./Loading.jsx\";\nimport NewPlayer from \"./NewPlayer.jsx\";\nimport NoBatchOriginal from \"./NoBatch.jsx\";\n\nconst loadDocTitle = document.title;\n\nexport default class Public extends React.Component {\n  state = { isAboutOpen: false };\n\n  handleToggleAbout = () =>\n    this.setState({ isAboutOpen: !this.state.isAboutOpen });\n\n  handleOpenAdmin = event => {\n    event.preventDefault();\n\n    if (!showOpenAdmin) {\n      return;\n    }\n    window.open(\"/admin\", \"_blank\");\n  };\n\n  handleReset = event => {\n    event.preventDefault();\n\n    if (!showOpenAltPlayer) {\n      return;\n    }\n    removePlayerId();\n  };\n\n  handleOpenAltPlayer = event => {\n    event.preventDefault();\n\n    if (!showReset) {\n      return;\n    }\n\n    // check to see if a playerId is required\n    const { playerIdParam, playerIdParamExclusive } = Meteor.settings.public;\n    const playerIdParamRequired = playerIdParam && playerIdParamExclusive;\n\n    const randPlayerIdKey = Math.random()\n      .toString(36)\n      .substring(2, 15);\n\n    // if playerId is required, add that to URL\n    // otherwise, produce URL with just playerIdKey\n    if (playerIdParamRequired) {\n      const randId = Math.random()\n        .toString(36)\n        .substring(2, 15);\n      window.open(\n        `/?playerIdKey=${randPlayerIdKey}&${playerIdParam}=${randId}`,\n        \"_blank\"\n      );\n    } else {\n      window.open(`/?playerIdKey=${randPlayerIdKey}`, \"_blank\");\n    }\n  };\n\n  render() {\n    const {\n      loading,\n      renderPublic,\n      playerIdKey,\n      Header,\n      NewPlayer: CustomNewPlayer,\n      About,\n      NoBatch,\n      ...rest\n    } = this.props;\n    const { player } = rest;\n    // const AboutComp = About || AboutOriginal;\n    const AboutComp = About || null;\n    const NoBatchComp = NoBatch || NoBatchOriginal;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (!renderPublic) {\n      return <NoBatchComp />;\n    }\n\n    const adminProps = {\n      showOpenAltPlayer: showOpenAltPlayer,\n      onOpenAltPlayer: this.handleOpenAltPlayer,\n      showReset: showReset,\n      onReset: this.handleReset,\n      showReset: showReset,\n      about: AboutComp,\n      showAbout: Boolean(AboutComp),\n      onToggleAbout: this.handleToggleAbout\n    };\n\n    let content;\n    if (!player) {\n      content = (\n        <CoreWrapper>\n          <NewPlayer\n            {...rest}\n            {...adminProps}\n            CustomNewPlayer={CustomNewPlayer}\n          />\n        </CoreWrapper>\n      );\n    } else {\n      content = <GameContainer {...rest} {...adminProps} />;\n    }\n\n    let title = loadDocTitle;\n    if (playerIdKey) {\n      title += ` (${playerIdKey})`;\n    }\n\n    return (\n      <div className=\"grid\">\n        <Helmet>\n          <title>{title}</title>\n        </Helmet>\n\n        {Header !== undefined ? (\n          <Header {...adminProps} />\n        ) : (\n          <div className=\"header navbar\">\n            <div className=\"navbarGroup\">\n              <NavbarHeading>\n                <Link\n                  className={[\n                    Classes.BUTTON,\n                    Classes.LARGE,\n                    Classes.MINIMAL,\n                    Classes.BUTTON\n                  ].join(\" \")}\n                  to=\"/\"\n                >\n                  <Icon icon={IconNames.EXCHANGE} />\n                  <span className={Classes.BUTTON_TEXT}>Empirica</span>\n                </Link>\n              </NavbarHeading>\n            </div>\n\n            <div className=\"navbarGroup\">\n              {showOpenAltPlayer ? (\n                <Button\n                  text=\"New Player\"\n                  minimal\n                  icon={IconNames.PERSON}\n                  onClick={this.handleOpenAltPlayer}\n                />\n              ) : (\n                \"\"\n              )}\n              {showReset ? (\n                <Button\n                  text=\"Reset current session\"\n                  minimal\n                  icon={IconNames.REPEAT}\n                  onClick={this.handleReset}\n                />\n              ) : (\n                \"\"\n              )}\n\n              {showOpenAdmin ? (\n                <Button\n                  text=\"Open Admin\"\n                  minimal\n                  icon={IconNames.PLAY}\n                  onClick={this.handleOpenAdmin}\n                />\n              ) : (\n                \"\"\n              )}\n\n              {AboutComp ? (\n                <>\n                  <Button\n                    text=\"About\"\n                    minimal\n                    icon={IconNames.info_sign}\n                    onClick={this.handleToggleAbout}\n                  />\n\n                  <Dialog\n                    icon={IconNames.INBOX}\n                    isOpen={this.state.isAboutOpen}\n                    onClose={this.handleToggleAbout}\n                    title=\"About\"\n                  >\n                    <div className={Classes.DIALOG_BODY}>\n                      <AboutComp />\n                    </div>\n\n                    <div className={Classes.DIALOG_FOOTER}>\n                      <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                        <Button\n                          text=\"Close\"\n                          intent={Intent.PRIMARY}\n                          onClick={this.handleToggleAbout}\n                        />\n                      </div>\n                    </div>\n                  </Dialog>\n                </>\n              ) : null}\n            </div>\n          </div>\n        )}\n\n        <main>{content}</main>\n      </div>\n    );\n  }\n}\n","// Handles all the timing stuff\nimport { TimeSync } from \"meteor/mizzao:timesync\";\nimport { withTracker } from \"meteor/react-meteor-data\";\nimport moment from \"moment\";\n\n// Handles all the timing stuff\nexport default withTracker(({ stage, player, ...rest }) => {\n  const now = moment(TimeSync.serverTime(null, 100));\n  const startTimeAt = stage && moment(stage.startTimeAt);\n  const started = stage && now.isSameOrAfter(startTimeAt);\n  const endTimeAt =\n    stage && startTimeAt.add(stage.durationInSeconds, \"seconds\");\n  const ended = stage && now.isSameOrAfter(endTimeAt);\n  const timedOut = stage && player && !player.stage.submitted && ended;\n  const roundOver = (stage && player && player.stage.submitted) || timedOut;\n  let remainingSeconds = stage && endTimeAt.diff(now, \"seconds\");\n  if (remainingSeconds && remainingSeconds < 0) {\n    remainingSeconds = 0;\n  }\n  const elapsedSeconds = stage && now.diff(startTimeAt, \"seconds\");\n  return {\n    timedOut,\n    roundOver,\n    stage,\n    player,\n    started,\n    ended,\n    endTimeAt,\n    now,\n    remainingSeconds,\n    elapsedSeconds,\n    ...rest\n  };\n});\n","// toaster.ts\nimport { Position, Toaster, Intent } from \"@blueprintjs/core\";\n\nconst toaster = Toaster.create({\n  position: Position.TOP\n});\n\nexport const AlertToaster = {\n  show({ message }) {\n    toaster.show({ message, iconName: \"warning-sign\", intent: Intent.DANGER });\n  }\n};\n\nexport const SuccessToaster = {\n  show({ message }) {\n    toaster.show({ message, iconName: \"tick-circle\", intent: Intent.SUCCESS });\n  }\n};\n","import React from \"react\";\n\nimport { NonIdealState } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nexport default class WaitingForServer extends React.Component {\n  render() {\n    return (\n      <div className=\"game waiting\">\n        <NonIdealState\n          icon={IconNames.AUTOMATIC_UPDATES}\n          title=\"Waiting for server response...\"\n          description={\n            <>\n              Please wait until all players are ready. If this takes more than 5\n              seconds, please <em>Refresh the page</em>.\n            </>\n          }\n        />\n      </div>\n    );\n  }\n}\n","import { Button, ButtonGroup, Classes, Intent, Tag } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport moment from \"moment\";\nimport React from \"react\";\nimport { assignmentTypes } from \"../../../api/batches/batches\";\nimport {\n  duplicateBatch,\n  setBatchInDebugMode,\n  updateBatch,\n  updateBatchStatus\n} from \"../../../api/batches/methods\";\nimport AdminBatchGamesContainer from \"../../containers/admin/AdminBatchGamesContainer\";\nimport LoadingInline from \"../LoadingInline.jsx\";\nimport { AlertToaster, SuccessToaster } from \"../Toasters.jsx\";\n\nexport default class AdminBatch extends React.Component {\n  state = {\n    newIsOpen: false,\n    detailsVisible: false\n  };\n\n  toggleDetails = () => {\n    this.setState({ detailsVisible: !this.state.detailsVisible });\n  };\n\n  handleArchive = () => {\n    const {\n      archived,\n      batch: { _id }\n    } = this.props;\n    updateBatch.call({ _id, archived: !archived });\n  };\n\n  handleStatusChange = (status, debugMode, event) => {\n    const {\n      batch: { _id }\n    } = this.props;\n    event.preventDefault();\n    if (\n      (Meteor.isDevelopment || Meteor.settings.public.debug_gameDebugMode) &&\n      status === \"running\" &&\n      // mac: metaKey (command), window: ctrlKey (Ctrl)\n      (event.ctrlKey || event.metaKey || debugMode)\n    ) {\n      setBatchInDebugMode.call({ _id });\n    }\n    updateBatchStatus.call({ _id, status });\n  };\n\n  handleDuplicate = event => {\n    const {\n      archived,\n      batch: { _id }\n    } = this.props;\n    event.preventDefault();\n    duplicateBatch.call({ _id }, err => {\n      if (err) {\n        AlertToaster.show({ message: `Failed duplicating Batch: ${err}` });\n      } else {\n        let message = \"Successfully duplicated Batch.\";\n        if (archived) {\n          message += \" See Active Batches!\";\n        }\n        SuccessToaster.show({ message });\n      }\n    });\n  };\n\n  render() {\n    const { loading, batch, treatments, archived } = this.props;\n    const { detailsVisible } = this.state;\n\n    if (loading) {\n      return (\n        <tr>\n          <td colSpan={7} style={{ textAlign: \"center\" }}>\n            <LoadingInline />\n          </td>\n        </tr>\n      );\n    }\n\n    const actions = [];\n\n    if (batch.status === \"init\") {\n      actions.push(\n        <Button\n          text=\"Start\"\n          intent={Intent.SUCCESS}\n          icon={IconNames.PLAY}\n          key=\"start\"\n          onClick={this.handleStatusChange.bind(this, \"running\", false)}\n        />\n      );\n    }\n\n    if (batch.status === \"init\" || batch.status === \"running\") {\n      actions.push(\n        <Button\n          text=\"Cancel\"\n          icon={IconNames.STOP}\n          key=\"cancel\"\n          onClick={this.handleStatusChange.bind(this, \"cancelled\", false)}\n        />\n      );\n    }\n\n    if (\n      batch.status === \"finished\" ||\n      batch.status === \"cancelled\" ||\n      batch.status === \"failed\"\n    ) {\n      actions.push(\n        <Button\n          text={archived ? \"Unarchive\" : \"Archive\"}\n          intent={archived ? Intent.SUCCESS : Intent.DANGER}\n          minimal\n          icon={IconNames.BOX}\n          key=\"archive\"\n          className={Classes.SMALL}\n          onClick={this.handleArchive}\n        />\n      );\n    }\n\n    actions.push(\n      <Button\n        text=\"Duplicate\"\n        icon={IconNames.DUPLICATE}\n        key=\"duplicate\"\n        onClick={this.handleDuplicate}\n      />\n    );\n\n    let config;\n    switch (batch.assignment) {\n      case \"simple\":\n        config = batch.simpleConfig.treatments.map(tt => {\n          const t = treatments.find(t => t._id === tt._id);\n          return (\n            <div key={tt._id}>{t ? t.displayName() : \"Unknown treatment\"}</div>\n          );\n        });\n        break;\n      case \"complete\":\n        config = batch.completeConfig.treatments.map(tt => {\n          const t = treatments.find(t => t._id === tt._id);\n          return (\n            <div key={tt._id}>\n              {t ? t.displayName() : \"Unknown treatment\"}\n              {\" x \"}\n              {tt.count}\n            </div>\n          );\n        });\n        break;\n      default:\n        console.error(`unknown assignment: ${batch.assignment}`);\n        break;\n    }\n\n    let statusIntent;\n    let statusMinimal = false;\n    switch (batch.status) {\n      case \"init\":\n        statusIntent = Intent.WARNING;\n        // Default style\n        break;\n      case \"running\":\n        statusIntent = Intent.SUCCESS;\n        break;\n      case \"finished\":\n        statusIntent = Intent.SUCCESS;\n        statusMinimal = true;\n        break;\n      case \"stopped\":\n      case \"failed\":\n      case \"cancelled\":\n        statusIntent = Intent.DANGER;\n        statusMinimal = true;\n        break;\n      default:\n        statusMinimal = true;\n        break;\n    }\n\n    const detailsVisibleClass = detailsVisible ? \"detailsVisible\" : \"\";\n    const detailsClass = `detailsButton ${detailsVisibleClass}`;\n    return (\n      <>\n        <tr>\n          <td className=\"showDetailsButton\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 125.304 125.304\"\n              onClick={this.toggleDetails}\n              className={detailsClass}\n            >\n              <path fill=\"#010002\" d=\"M62.652 103.895L0 21.409h125.304z\" />\n            </svg>\n          </td>\n          <td>{batch.index}</td>\n          <td>\n            <Tag intent={statusIntent} minimal={statusMinimal}>\n              {batch.status}\n            </Tag>\n          </td>\n          <td className=\"numeric\">{batch.gameCount()}</td>\n          <td title={moment(batch.runningAt).format()}>\n            {batch.runningAt ? moment(batch.runningAt).fromNow() : \"\"}\n          </td>\n          <td>{assignmentTypes[batch.assignment]}</td>\n          <td>{config}</td>\n          <td>\n            <ButtonGroup minimal className={Classes.SMALL}>\n              {actions}\n            </ButtonGroup>\n          </td>\n        </tr>\n\n        {detailsVisible ? (\n          <tr>\n            <AdminBatchGamesContainer\n              batchId={batch._id}\n              batch={batch}\n              treatments={treatments}\n            />\n          </tr>\n        ) : (\n          <tr />\n        )}\n      </>\n    );\n  }\n}\n","import { Icon, Intent, Tag, Button } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport moment from \"moment\";\nimport React from \"react\";\nimport { earlyExitGameLobby } from \"../../../api/game-lobbies/methods\";\nimport { earlyExitGame } from \"../../../api/games/methods\";\n\nexport default class AdminBatchGame extends React.Component {\n  handleStatusChange = (status, event) => {\n    event.preventDefault();\n    const { game, lobby } = this.props;\n    const endReason = \"adminCancelled\";\n\n    if (game !== undefined && game._id) {\n      earlyExitGame.call({\n        gameId: game._id,\n        endReason,\n        status: status\n      });\n      return;\n    }\n\n    earlyExitGameLobby.call({\n      exitReason: endReason,\n      gameLobbyId: lobby._id,\n      status: status\n    });\n  };\n\n  render() {\n    const { batch, lobby, game, rounds, stages, treatment } = this.props;\n\n    let currentRound;\n    let currentStage;\n    if (game) {\n      currentStage = stages.find(s => s._id === game.currentStageId);\n      if (currentStage) {\n        currentRound = rounds.find(r => r._id === currentStage.roundId);\n      }\n    }\n\n    let notReadyPlayers = [];\n    let players = (game ? game : lobby).playerIds;\n    let bots = [];\n\n    if (!game) {\n      notReadyPlayers = lobby.queuedPlayerIds.filter(\n        p => players.indexOf(p) < 0\n      );\n    }\n\n    const playerCountFactor = treatment.factor(\"playerCount\");\n    const playerCount = playerCountFactor ? playerCountFactor.value : 0;\n    const botsFactor = treatment.factor(\"botsCount\");\n    const botsCount = botsFactor && botsFactor.value;\n    if (botsCount) {\n      players = players.slice(0, players.length - botsCount);\n      for (let i = 0; i < botsCount; i++) {\n        bots.push(Random.id());\n      }\n    }\n\n    // _.times(23, () => bots.push(Random.id()));\n\n    let statusMsg;\n    let statusIntent;\n    let statusMinimal = false;\n    let showCancelButton = false;\n    if (game && game.status === \"cancelled\") {\n      statusIntent = Intent.DANGER;\n      statusMinimal = true;\n      statusMsg = \"game cancelled\";\n    } else if (game && game.finishedAt) {\n      statusIntent = Intent.SUCCESS;\n      statusMinimal = true;\n      statusMsg = \"finished\";\n    } else if (lobby.timedOutAt) {\n      statusIntent = Intent.DANGER;\n      statusMinimal = true;\n      statusMsg = \"lobby timeout\";\n    } else if (lobby.status === \"cancelled\") {\n      statusIntent = Intent.DANGER;\n      statusMinimal = true;\n      statusMsg = \"lobby cancelled\";\n    } else if (batch.status === \"cancelled\") {\n      statusIntent = Intent.DANGER;\n      statusMinimal = true;\n      statusMsg = \"batch cancelled\";\n    } else if (batch.status === \"failed\") {\n      statusIntent = Intent.DANGER;\n      statusMinimal = true;\n      statusMsg = \"failed\";\n    } else if (batch.status === \"stopped\") {\n      statusIntent = Intent.DANGER;\n      statusMinimal = true;\n      statusMsg = \"batch stopped\";\n    } else if (game) {\n      statusIntent = Intent.SUCCESS;\n      statusMsg = \"running\";\n      showCancelButton = true;\n    } else {\n      if (players.length === 0) {\n        showCancelButton = true;\n        if (notReadyPlayers.length === 0) {\n          statusMsg = \"empty\";\n          statusMinimal = true;\n        } else {\n          statusMsg = \"pre-lobby\";\n          statusIntent = Intent.WARNING;\n          statusMinimal = true;\n        }\n      } else {\n        showCancelButton = true;\n        statusIntent = Intent.WARNING;\n        statusMsg = \"lobby\";\n      }\n    }\n\n    return (\n      <tr>\n        <td>{lobby.index + 1}</td>\n        <td>\n          <Tag intent={statusIntent} minimal={statusMinimal}>\n            {statusMsg}\n          </Tag>\n        </td>\n        <td>{treatment.displayName()}</td>\n\n        {game && game.createdAt ? (\n          <td title={moment(game.createdAt).format()}>\n            {moment(game.createdAt).fromNow()}\n          </td>\n        ) : (\n          <td />\n        )}\n\n        {game && game.finishedAt ? (\n          <td title={moment(game.finishedAt).format()}>\n            {moment(game.finishedAt).fromNow()}\n          </td>\n        ) : (\n          <td />\n        )}\n\n        {game && game.finishedAt ? (\n          <td title={moment(game.finishedAt).format()}>-</td>\n        ) : (\n          <>\n            <td>\n              {currentRound\n                ? `Round: ${currentRound.index + 1} / ${rounds.length}`\n                : \"\"}\n              {currentStage ? ` > Stage: ${currentStage.displayName}` : \"\"}\n            </td>\n          </>\n        )}\n        <td>{playerCount}</td>\n        <td>\n          {bots.length > 0 ? (\n            <span className=\"player-group\">\n              {bots.length > 10 ? (\n                <>\n                  <span title={`${bots.length} Bots`} key=\"bots\">\n                    <Icon\n                      icon={IconNames.PERSON}\n                      iconSize={16}\n                      style={{ color: \"#D99E0B\" }}\n                    />{\" \"}\n                    Ã— {bots.length}\n                  </span>\n                </>\n              ) : (\n                bots.map(p => (\n                  <span title=\"Bot\" key={p}>\n                    <Icon\n                      icon={IconNames.PERSON}\n                      iconSize={16}\n                      style={{ color: \"#D99E0B\" }}\n                    />\n                  </span>\n                ))\n              )}\n            </span>\n          ) : (\n            \"\"\n          )}\n\n          {notReadyPlayers.length > 0 ? (\n            <span className=\"player-group\">\n              {notReadyPlayers.length > 10 ? (\n                <>\n                  <span\n                    title={`${notReadyPlayers.length} Players in Intro Steps`}\n                    key=\"notReadyPlayers\"\n                  >\n                    <Icon\n                      icon={IconNames.PERSON}\n                      iconSize={16}\n                      style={{ color: \"#A7B6C2\" }}\n                    />\n                  </span>{\" \"}\n                  Ã— {notReadyPlayers.length}\n                </>\n              ) : (\n                notReadyPlayers.map(p => (\n                  <span title=\"Player in Intro Steps\" key={p}>\n                    <Icon\n                      icon={IconNames.PERSON}\n                      iconSize={16}\n                      style={{ color: \"#A7B6C2\" }}\n                    />\n                  </span>\n                ))\n              )}\n            </span>\n          ) : (\n            \"\"\n          )}\n\n          {players.length > 0 ? (\n            <span className=\"player-group\">\n              {players.length > 10 ? (\n                <>\n                  <span title={`${players.length} Players`} key=\"players\">\n                    <Icon icon={IconNames.PERSON} iconSize={16} />\n                  </span>{\" \"}\n                  Ã— {players.length}\n                </>\n              ) : (\n                players.map(p => (\n                  <span title=\"Player\" key={p}>\n                    <Icon icon={IconNames.PERSON} iconSize={16} />\n                  </span>\n                ))\n              )}\n            </span>\n          ) : (\n            \"\"\n          )}\n        </td>\n        <td>\n          {showCancelButton && (\n            <Button\n              text=\"Cancel\"\n              icon={IconNames.STOP}\n              key=\"cancel\"\n              onClick={this.handleStatusChange.bind(this, \"cancelled\")}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n","import { HTMLTable } from \"@blueprintjs/core\";\nimport React from \"react\";\nimport AdminBatchGameContainer from \"../../containers/admin/AdminBatchGameContainer.jsx\";\nimport LoadingInline from \"../LoadingInline.jsx\";\n\nexport default class AdminBatchGames extends React.Component {\n  render() {\n    const { loading, batch, games, gameLobbies, treatments } = this.props;\n\n    if (loading) {\n      return (\n        <>\n          <td colSpan={2} />\n          <td colSpan={5} style={{ textAlign: \"center\" }}>\n            <LoadingInline />\n          </td>\n        </>\n      );\n    }\n\n    return (\n      <>\n        <td colSpan={2} />\n        <td colSpan={6}>\n          <HTMLTable\n            condensed\n            className=\"bp3-html-table-bordered batch-games-table\"\n          >\n            <thead>\n              <tr>\n                <th>#</th>\n                <th>Status</th>\n                <th>Treatment</th>\n                <th>Start Time</th>\n                <th>Finish Time</th>\n                <th>Current State</th>\n                <th>Player Count</th>\n                <th>Players</th>\n                <th />\n              </tr>\n            </thead>\n\n            <tbody>\n              {gameLobbies.map(lobby => (\n                <AdminBatchGameContainer\n                  key={lobby._id}\n                  batch={batch}\n                  lobby={lobby}\n                  game={games.find(g => g._id === lobby.gameId)}\n                  treatment={treatments.find(t => t._id === lobby.treatmentId)}\n                />\n              ))}\n            </tbody>\n          </HTMLTable>\n        </td>\n      </>\n    );\n  }\n}\n","import { Button, Callout, HTMLTable } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  duplicateBatch,\n  setBatchInDebugMode,\n  updateBatchStatus\n} from \"../../../api/batches/methods\";\nimport Loading from \"../Loading.jsx\";\nimport AdminBatch from \"./AdminBatch\";\nimport { AdminPageHeader } from \"./AdminHeading.jsx\";\nimport AdminNewBatch from \"./AdminNewBatch.jsx\";\n\nexport default class AdminBatches extends React.Component {\n  state = {\n    newIsOpen: false\n  };\n\n  handleStatusChange = (_id, status, debugMode, event) => {\n    event.preventDefault();\n    if (\n      (Meteor.isDevelopment || Meteor.settings.public.debug_gameDebugMode) &&\n      status === \"running\" &&\n      // mac: metaKey (command), window: ctrlKey (Ctrl)\n      (event.ctrlKey || event.metaKey || debugMode)\n    ) {\n      setBatchInDebugMode.call({ _id });\n    }\n    updateBatchStatus.call({ _id, status });\n  };\n\n  handleDuplicate = (_id, event) => {\n    event.preventDefault();\n    duplicateBatch.call({ _id });\n  };\n\n  render() {\n    const {\n      loading,\n      batches,\n      treatments,\n      factors,\n      lobbyConfigs,\n      archived\n    } = this.props;\n\n    const { newIsOpen } = this.state;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    return (\n      <div className=\"batches\">\n        {archived ? (\n          <Link to=\"/admin\" className=\"archived-button bp3-button bp3-minimal\">\n            Back to Active Batches\n          </Link>\n        ) : (\n          <Link\n            to=\"/admin/batches/archived\"\n            className=\"archived-button bp3-button bp3-minimal\"\n          >\n            View Archived Batches\n          </Link>\n        )}\n\n        <AdminPageHeader icon={IconNames.LAYERS}>\n          {archived ? \"Archived Batches\" : \"Batches\"}\n\n          {!archived ? (\n            <Button\n              text=\"New Batch\"\n              onClick={() => this.setState({ newIsOpen: true })}\n            />\n          ) : (\n            \"\"\n          )}\n        </AdminPageHeader>\n\n        {batches.length === 0 ? (\n          <Callout>\n            {archived\n              ? \"No archived batches.\"\n              : \"No batches yet, create one above.\"}\n          </Callout>\n        ) : (\n          <HTMLTable className=\"double-stripped\">\n            <thead>\n              <tr>\n                <th />\n                <th>#</th>\n                <th>Status</th>\n                <th>Game Count</th>\n                <th>Started At</th>\n                <th>Assignment</th>\n                <th>Configuration</th>\n                <th>{/* Actions */}</th>\n              </tr>\n            </thead>\n\n            <tbody>\n              {batches.map(batch => (\n                <AdminBatch\n                  key={batch._id}\n                  batch={batch}\n                  treatments={treatments}\n                  archived={archived}\n                />\n              ))}\n            </tbody>\n          </HTMLTable>\n        )}\n\n        {!archived ? (\n          <AdminNewBatch\n            treatments={treatments}\n            factors={factors}\n            lobbyConfigs={lobbyConfigs}\n            isOpen={newIsOpen}\n            onClose={() => this.setState({ newIsOpen: false })}\n          />\n        ) : (\n          \"\"\n        )}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport {\n  Button,\n  FormGroup,\n  HTMLSelect,\n  Intent,\n  Checkbox\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { AdminPageHeader } from \"./AdminHeading.jsx\";\n\nexport default class AdminExport extends React.Component {\n  state = { format: \"CSV\", exporting: false, includePii: false };\n\n  handleChange = event => {\n    const { name, value, type } = event.currentTarget;\n    if (type === \"checkbox\") {\n      this.setState({ [name]: event.currentTarget.checked });\n      return;\n    }\n\n    this.setState({ [name]: value });\n  };\n\n  handleExport = () => {\n    const { includePii } = this.state;\n    document.location = `/admin/export.${this.state.format.toLowerCase()}?include_pii=${includePii}`;\n  };\n\n  render() {\n    const { format, exporting, includePii } = this.state;\n\n    return (\n      <div className=\"export\">\n        <AdminPageHeader icon={IconNames.EXPORT}>Export</AdminPageHeader>\n\n        <p>\n          The export function dumps all the app data as multiple CSV / JSON /\n          JSON Line files zipped, one for each data type. You can reassociate\n          the data pieces through IDs.\n        </p>\n\n        <FormGroup>\n          <HTMLSelect\n            id=\"format\"\n            name=\"format\"\n            value={format}\n            options={[\"CSV\", \"JSON\", \"JSONL\"]}\n            onChange={this.handleChange}\n          />\n          <Checkbox\n            checked={includePii}\n            label=\"Add Personal Identity Information (includes the player ID, URL parameters, and IP address)\"\n            onChange={this.handleChange}\n            name=\"includePii\"\n          />\n        </FormGroup>\n        <FormGroup>\n          <Button\n            text=\"Export All\"\n            loading={exporting}\n            intent={Intent.PRIMARY}\n            onClick={this.handleExport}\n          />\n        </FormGroup>\n        {format === \"CSV\" && <p>Each file is a CSV file</p>}\n        {format === \"JSON\" && <p>Each file is a single large JSON object</p>}\n        {format === \"JSONL\" && (\n          <p>\n            Each file contains{\" \"}\n            <a target=\"blank\" href=\"http://jsonlines.org\">\n              JSON Lines\n            </a>\n            , where each line is a object.\n          </p>\n        )}\n      </div>\n    );\n  }\n}\n","import { EditableText, Button } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport React from \"react\";\nimport { AlertToaster } from \"../Toasters.jsx\";\n\nimport { updateFactor } from \"../../../api/factors/methods.js\";\n\nexport default class AdminFactor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.initialName = props.factor.name;\n    this.state = {\n      name: props.factor.name\n    };\n  }\n\n  componentWillUpdate(props) {\n    if (props.factor.name !== this.props.factor.name) {\n      this.initialName = props.factor.name;\n      this.setState({ name: props.factor.name });\n    }\n  }\n\n  handleNameChange = name => {\n    this.setState({ name });\n  };\n\n  handleNameConfirm = () => {\n    const { _id } = this.props.factor;\n    const { name } = this.state;\n    if (!name || name.trim() === \"\") {\n      this.setState({ name: this.initialName });\n      return;\n    }\n    updateFactor.call({ _id, name }, err => {\n      if (err) {\n        AlertToaster.show({ message: String(err) });\n        this.handleNameChange(this.initialName);\n        return;\n      }\n      this.initialName = name;\n    });\n  };\n\n  render() {\n    const { factor, archived } = this.props;\n    const { name } = this.state;\n    return (\n      <tr key={factor._id}>\n        <td>\n          <EditableText\n            onChange={this.handleNameChange}\n            onConfirm={this.handleNameConfirm}\n            value={name}\n          />\n        </td>\n        <td>{String(factor.value)}</td>\n        <td>\n          <Button\n            text={archived ? `Unarchive ${t.name}` : \"\"}\n            intent={archived ? Intent.SUCCESS : null}\n            icon={IconNames.BOX}\n            onClick={() =>\n              updateFactor.call({ _id: factor._id, name, archived: !archived })\n            }\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport {\n  Button,\n  ButtonGroup,\n  Card,\n  Classes,\n  Elevation,\n  HTMLTable,\n  Icon,\n  Position,\n  Tooltip,\n  Intent\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { FactorTypes } from \"../../../api/factor-types/factor-types.js\";\nimport { updateFactorType } from \"../../../api/factor-types/methods.js\";\n\nimport AdminFactor from \"./AdminFactor.jsx\";\nimport AdminNewFactor from \"./AdminNewFactor.jsx\";\nimport AdminNewFactorType from \"./AdminNewFactorType.jsx\";\nimport Loading from \"../Loading.jsx\";\nimport { AdminPageHeader } from \"./AdminHeading.jsx\";\n\nexport default class AdminFactors extends React.Component {\n  state = {};\n\n  handleArchive = _id => {\n    const { archived } = this.props;\n    updateFactorType.call({ _id, archived: !archived });\n  };\n\n  render() {\n    const { loading, archived, factors, factorTypes } = this.props;\n    if (loading) {\n      return <Loading />;\n    }\n\n    factorTypes.map(t => {\n      t.factors = factors.filter(f => f.factorTypeId === t._id);\n    });\n\n    return (\n      <div className=\"factors\">\n        <AdminPageHeader icon={IconNames.PROPERTY}>\n          {archived ? \"Archived Factors\" : \"Factors\"}\n        </AdminPageHeader>\n\n        <div className=\"factors-list\">\n          {archived && factorTypes.length === 0 ? (\n            <p>No archived Factors</p>\n          ) : null}\n          {factorTypes.map(t => {\n            const hasNewForm = t.type !== \"Boolean\";\n\n            const requiredType = FactorTypes.requiredTypes.includes(t.name);\n\n            return (\n              <Card className=\"factor\" key={t._id} elevation={Elevation.TWO}>\n                <div className=\"factor-actions\">\n                  <ButtonGroup>\n                    {requiredType ? null : (\n                      <Tooltip\n                        content={\n                          archived ? (\n                            \"\"\n                          ) : (\n                            <>\n                              Archive <code>{t.name}</code>\n                            </>\n                          )\n                        }\n                        position={Position.TOP}\n                      >\n                        <Button\n                          text={archived ? `Unarchive ${t.name}` : \"\"}\n                          intent={archived ? Intent.SUCCESS : null}\n                          icon={IconNames.BOX}\n                          onClick={this.handleArchive.bind(this, t._id)}\n                        />\n                      </Tooltip>\n                    )}\n\n                    {archived || !hasNewForm ? (\n                      \"\"\n                    ) : (\n                      <Tooltip\n                        content={\n                          <>\n                            New <code>{t.name}</code> Factor Value\n                          </>\n                        }\n                        position={Position.TOP}\n                      >\n                        <Button\n                          icon={IconNames.PLUS}\n                          onClick={() =>\n                            this.setState({ [`newOpen${t._id}`]: true })\n                          }\n                        />\n                      </Tooltip>\n                    )}\n                  </ButtonGroup>\n\n                  {archived || !hasNewForm ? (\n                    \"\"\n                  ) : (\n                    <AdminNewFactor\n                      type={t}\n                      onClose={() =>\n                        this.setState({ [`newOpen${t._id}`]: false })\n                      }\n                      isOpen={this.state[`newOpen${t._id}`]}\n                    />\n                  )}\n                </div>\n\n                <h4 className={Classes.MONOSPACE_TEXT}>{t.name}</h4>\n\n                {t.description ? (\n                  <p className={Classes.TEXT_DISABLED}>{t.description}</p>\n                ) : (\n                  \"\"\n                )}\n\n                {archived ? null : t.factors.length > 0 ? (\n                  <HTMLTable striped condensed>\n                    <thead>\n                      <tr>\n                        <th>Name</th>\n                        <th>Value</th>\n                        <th />\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {t.factors.map(factor => (\n                        <AdminFactor\n                          key={factor._id}\n                          factor={factor}\n                          archived={archived}\n                        />\n                      ))}\n                    </tbody>\n                  </HTMLTable>\n                ) : (\n                  <p className={Classes.TEXT_MUTED}>\n                    No <code>{t.name}</code> factors yet.\n                  </p>\n                )}\n              </Card>\n            );\n          })}\n        </div>\n\n        {archived ? (\n          <p>\n            <br />\n            <Link to=\"/admin/factors\">Back to Active Factors</Link>\n          </p>\n        ) : (\n          <>\n            <br />\n\n            <Button\n              text=\"New Factor\"\n              onClick={() => this.setState({ newFactorIsOpen: true })}\n            />\n\n            <AdminNewFactorType\n              factors={factors}\n              factorTypes={factorTypes}\n              onClose={() => this.setState({ newFactorIsOpen: false })}\n              isOpen={this.state.newFactorIsOpen}\n            />\n\n            <p>\n              <br />\n              <Link to=\"/admin/factors/archived\">View Archived Factors</Link>\n            </p>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport { Icon, NonIdealState } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { AdminPageHeader } from \"./AdminHeading.jsx\";\n\nexport default class AdminGames extends React.Component {\n  render() {\n    return (\n      <div className=\"games\">\n        <AdminPageHeader icon={IconNames.FLOWS}>Games</AdminPageHeader>\n\n        <NonIdealState icon={IconNames.BUILD} title=\"Under construction\" />\n      </div>\n    );\n  }\n}\n","// This is only to be able to centralize the style of admin headings.\nimport React from \"react\";\n\nimport { Icon } from \"@blueprintjs/core\";\n\nimport { H2 } from \"../Heading.jsx\";\n\nexport const AdminPageHeader = props => (\n  <H2 className=\"admin-heading\" iconSize={Icon.SIZE_LARGE} {...props} />\n);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { Button, Classes, EditableText, Intent } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { updateLobbyConfig } from \"../../../api/lobby-configs/methods\";\n\nimport { AlertToaster } from \"../Toasters.jsx\";\n\nexport default class AdminLobbyConfig extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.lobbyConfig.name || \"\"\n    };\n  }\n\n  componentWillUpdate(props) {\n    if (props.lobbyConfig.name !== this.props.lobbyConfig.name) {\n      this.setState({ name: props.lobbyConfig.name || \"\" });\n    }\n  }\n\n  handleNameChange = name => {\n    this.setState({ name: name || \"\" });\n  };\n\n  handleNameConfirm = () => {\n    const { _id, name: prevName } = this.props.lobbyConfig;\n    const { name: nameRaw } = this.state;\n    const name = nameRaw.trim();\n    if (name === prevName) {\n      this.handleNameChange(prevName);\n      return;\n    }\n\n    updateLobbyConfig.call({ _id, name }, err => {\n      if (err) {\n        AlertToaster.show({ message: String(err) });\n        this.handleNameChange(prevName);\n        return;\n      }\n    });\n  };\n\n  handleArchive = () => {\n    const {\n      archived,\n      lobbyConfig: { _id }\n    } = this.props;\n    updateLobbyConfig.call({ _id, archived: !archived });\n  };\n\n  render() {\n    const { lobbyConfig, archived } = this.props;\n    const { name } = this.state;\n\n    const archiveIntent = archived ? Intent.SUCCESS : Intent.DANGER;\n    return (\n      <tr>\n        <td>\n          <EditableText\n            onChange={this.handleNameChange}\n            onConfirm={this.handleNameConfirm}\n            value={name}\n          />\n        </td>\n        <td>{lobbyConfig.timeoutType}</td>\n        <td>{lobbyConfig.timeoutInSeconds}s</td>\n        <td>\n          {lobbyConfig.timeoutType === \"lobby\"\n            ? lobbyConfig.timeoutStrategy\n            : \"-\"}\n        </td>\n        <td>\n          {lobbyConfig.timeoutType === \"individual\"\n            ? lobbyConfig.extendCount\n            : \"-\"}\n        </td>\n        <td>\n          <Button\n            text={archived ? \"Unarchive\" : \"Archive\"}\n            className={Classes.SMALL}\n            minimal\n            icon={IconNames.BOX}\n            intent={archiveIntent}\n            onClick={this.handleArchive}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { Button, HTMLTable, Icon } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport AdminNewLobbyConfig from \"./AdminNewLobbyConfig.jsx\";\nimport AdminLobbyConfig from \"./AdminLobbyConfig.jsx\";\nimport Loading from \"../Loading.jsx\";\nimport { AdminPageHeader } from \"./AdminHeading.jsx\";\n\nexport default class AdminLobbyConfigs extends React.Component {\n  state = { newLobbyIsOpen: false };\n\n  render() {\n    const { loading, lobbyConfigs, archived } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    return (\n      <div className=\"lobbies\">\n        <AdminPageHeader icon={IconNames.TIME}>\n          {archived ? \"Archived Lobby Configurations\" : \"Lobby Configurations\"}\n        </AdminPageHeader>\n\n        {lobbyConfigs.length === 0 ? (\n          <p>\n            {archived\n              ? \"No archived lobby configurations.\"\n              : \"No lobby configurations yet, create some bellow.\"}\n          </p>\n        ) : (\n          <HTMLTable striped>\n            <thead>\n              <tr>\n                <th>Name</th>\n                <th>\n                  <em>Type</em>\n                </th>\n                <th>\n                  <em>Timeout</em>\n                </th>\n                <th>\n                  <em>Timeout Strategy</em>\n                </th>\n                <th>\n                  <em>Extend Count</em>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {_.map(lobbyConfigs, lobbyConfig => (\n                <AdminLobbyConfig\n                  key={lobbyConfig._id}\n                  lobbyConfig={lobbyConfig}\n                  archived={archived}\n                />\n              ))}\n            </tbody>\n          </HTMLTable>\n        )}\n\n        {archived ? (\n          <p>\n            <br />\n            <Link to=\"/admin/lobby-configurations\">\n              Back to Active Lobby Configurations\n            </Link>\n          </p>\n        ) : (\n          <>\n            <br />\n\n            <Button\n              text=\"New Lobby Configuration\"\n              onClick={() => this.setState({ newLobbyIsOpen: true })}\n            />\n\n            <AdminNewLobbyConfig\n              onClose={() => this.setState({ newLobbyIsOpen: false })}\n              isOpen={this.state.newLobbyIsOpen}\n            />\n\n            <p>\n              <br />\n              <Link to=\"/admin/lobby-configurations/archived\">\n                View Archived Lobby Configurations\n              </Link>\n            </p>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport {\n  Button,\n  Classes,\n  Dialog,\n  FormGroup,\n  HTMLSelect,\n  HTMLTable,\n  Intent,\n  NumericInput\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport {\n  assignmentTypes,\n  maxGamesCount\n} from \"../../../api/batches/batches.js\";\nimport { createBatch } from \"../../../api/batches/methods.js\";\n\nimport { AlertToaster } from \"../Toasters.jsx\";\n\nexport default class AdminNewBatch extends React.Component {\n  state = {\n    assignment: \"simple\",\n    simpleTreatments: [],\n    completeTreatments: [],\n    simpleGamesCount: 1,\n    gamesCount: 1\n  };\n\n  gamesCountCalc(assignment, completeTreatments, simpleGamesCount) {\n    return assignment === \"complete\"\n      ? _.inject(completeTreatments, (sum, t) => (t.count || 0) + sum, 0)\n      : simpleGamesCount;\n  }\n\n  handleAssignmentChange = event => {\n    const { completeTreatments, simpleGamesCount } = this.state;\n    const assignment = event.currentTarget.value;\n    this.setState({\n      assignment,\n      gamesCount: this.gamesCountCalc(\n        assignment,\n        completeTreatments,\n        simpleGamesCount\n      )\n    });\n  };\n\n  handleGamesCountChange = simpleGamesCount => {\n    this.setState({\n      simpleGamesCount,\n      gamesCount: simpleGamesCount\n    });\n  };\n\n  handleAddTreatment = event => {\n    event.preventDefault();\n\n    const lobbyConfigs = this.validLobbyConfigs();\n    const { assignment, simpleGamesCount } = this.state;\n\n    const key = `${assignment}Treatments`;\n    const _id = event.currentTarget.value;\n\n    if (!_id) {\n      return;\n    }\n\n    const params = {};\n    const existing = this.state[key].find(tt => tt._id === _id);\n    const treatment = existing || {\n      _id,\n      count: 1,\n      lobbyConfigId: !_.isEmpty(lobbyConfigs) && lobbyConfigs[0]._id\n    };\n\n    if (!existing) {\n      this.state[key].push(treatment);\n    } else {\n      existing.count++;\n    }\n    params[key] = this.state[key];\n    if (assignment === \"complete\") {\n      params.gamesCount = this.state.gamesCount + 1;\n    }\n    this.setState(params);\n  };\n\n  handleTreatmentCountChange = (id, count) => {\n    const { assignment, completeTreatments, simpleGamesCount } = this.state;\n\n    const key = `${assignment}Treatments`;\n    const t = this.state[key].find(tt => tt._id === id);\n    t.count = count;\n\n    const params = { [key]: this.state[key] };\n    if (assignment === \"complete\") {\n      params.gamesCount = this.gamesCountCalc(\n        assignment,\n        this.state[key],\n        simpleGamesCount\n      );\n    }\n\n    this.setState(params);\n  };\n\n  handleLobbyConfigChange = (id, event) => {\n    const {\n      currentTarget: { value: lobbyConfigId }\n    } = event;\n    const { assignment, completeTreatments } = this.state;\n\n    const key = `${assignment}Treatments`;\n    const t = this.state[key].find(tt => tt._id === id);\n    t.lobbyConfigId = lobbyConfigId;\n\n    this.setState({ [key]: this.state[key] });\n  };\n\n  handleRemoveTreatment = event => {\n    event.preventDefault();\n\n    const { assignment, simpleGamesCount, gamesCount } = this.state;\n    const key = `${assignment}Treatments`;\n\n    const id = event.currentTarget.dataset.id;\n    const treatment = this.state[key].find(t => t._id === id);\n    const val = _.reject(this.state[key], t => t._id === id);\n    const params = { [key]: val };\n\n    if (assignment === \"complete\") {\n      params.gamesCount = gamesCount - treatment.count;\n    }\n\n    this.setState(params);\n  };\n\n  handleNewBatch = event => {\n    event.preventDefault();\n    const {\n      assignment,\n      simpleGamesCount,\n      simpleTreatments,\n      completeTreatments\n    } = this.state;\n    const params = { assignment };\n\n    switch (assignment) {\n      case \"simple\":\n        const treatments = simpleTreatments.map(t =>\n          _.pick(t, \"_id\", \"lobbyConfigId\")\n        );\n        params.simpleConfig = {\n          treatments,\n          count: simpleGamesCount\n        };\n        break;\n      case \"complete\":\n        params.completeConfig = {\n          treatments: completeTreatments\n        };\n        break;\n      default:\n        AlertToaster.show({ message: \"unknown assignement type?!\" });\n        return;\n    }\n\n    createBatch.call(params, err => {\n      if (err) {\n        console.error(JSON.stringify(err));\n        AlertToaster.show({ message: String(err) });\n        return;\n      }\n\n      this.setState({\n        assignment: \"simple\",\n        simpleTreatments: [],\n        completeTreatments: [],\n        simpleGamesCount: 1,\n        gamesCount: 1\n      });\n      this.props.onClose();\n    });\n  };\n\n  validTreatments() {\n    const { treatments } = this.props;\n\n    return treatments.filter(t => !t.archivedAt);\n  }\n\n  validLobbyConfigs() {\n    const { lobbyConfigs } = this.props;\n\n    return lobbyConfigs.filter(l => !l.archivedAt);\n  }\n\n  renderRequired() {\n    const issues = [];\n    const treatments = this.validTreatments();\n    const lobbyConfigs = this.validLobbyConfigs();\n\n    if (_.isEmpty(treatments)) {\n      issues.push(<Link to=\"/admin/treatments\">Create a Treatment</Link>);\n    }\n\n    if (_.isEmpty(lobbyConfigs)) {\n      issues.push(\n        <Link to=\"/admin/lobby-configurations\">\n          Create a Lobby Configuration\n        </Link>\n      );\n    }\n\n    return (\n      <div className={Classes.DIALOG_BODY}>\n        You must first:\n        <ul>\n          {issues.map((issue, i) => (\n            <li key={i}>{issue}</li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n\n  renderContent() {\n    const treatments = this.validTreatments();\n    const lobbyConfigs = this.validLobbyConfigs();\n\n    const {\n      gamesCount,\n      assignment,\n      simpleTreatments,\n      completeTreatments\n    } = this.state;\n\n    const isComplete = assignment === \"complete\";\n    const currentTreatments = isComplete\n      ? completeTreatments\n      : simpleTreatments;\n\n    return (\n      <form className=\"new-batch\" onSubmit={this.handleNewBatch}>\n        <div className={Classes.DIALOG_BODY}>\n          <FormGroup label=\"Assignment Method\" labelFor=\"assignment\">\n            <HTMLSelect\n              name=\"assignment\"\n              id=\"assignment\"\n              onChange={this.handleAssignmentChange}\n              value={assignment}\n            >\n              {_.map(assignmentTypes, (name, key) => (\n                <option key={key} value={key}>\n                  {name}\n                </option>\n              ))}\n            </HTMLSelect>\n          </FormGroup>\n\n          <FormGroup label=\"Treatments\" labelFor=\"treatment\">\n            {currentTreatments.length > 0 ? (\n              <HTMLTable striped bordered>\n                <thead>\n                  <tr>\n                    <th>Treatment</th>\n                    <th>Lobby Configuration</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {_.map(currentTreatments, t => {\n                    const id = `gamesCount${t._id}`;\n                    const treatment = treatments.find(tt => tt._id === t._id);\n                    return (\n                      <tr key={id}>\n                        <td>{treatment.displayName()} </td>\n\n                        <td>\n                          <HTMLSelect\n                            name=\"lobbyConfigId\"\n                            id=\"lobbyConfigId\"\n                            onChange={this.handleLobbyConfigChange.bind(\n                              this,\n                              t._id\n                            )}\n                            value={t.lobbyConfigId}\n                            style={{ width: 250 }}\n                          >\n                            {_.map(lobbyConfigs, l => (\n                              <option key={l._id} value={l._id}>\n                                {l.displayName()}\n                              </option>\n                            ))}\n                          </HTMLSelect>\n                        </td>\n\n                        {isComplete ? (\n                          <td>\n                            <NumericInput\n                              name={id}\n                              id={id}\n                              min=\"1\"\n                              max={maxGamesCount}\n                              stepSize=\"1\"\n                              onValueChange={this.handleTreatmentCountChange.bind(\n                                this,\n                                t._id\n                              )}\n                              value={t.count}\n                              style={{ width: 100 }}\n                            />\n                          </td>\n                        ) : null}\n                        <td>\n                          <Button\n                            text=\"Remove\"\n                            intent={Intent.DANGER}\n                            onClick={this.handleRemoveTreatment}\n                            data-id={t._id}\n                          />\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </HTMLTable>\n            ) : (\n              \"\"\n            )}\n\n            {currentTreatments.length === 0 ? (\n              <p className=\"bp3-text-muted\">No treatments yet, add one:</p>\n            ) : (\n              \"\"\n            )}\n\n            <br />\n\n            <HTMLSelect\n              name=\"treatment\"\n              id=\"treatment\"\n              onChange={this.handleAddTreatment}\n              value={\"\"}\n              style={{ width: 250 }}\n            >\n              <option value=\"\">Add a new treatment...</option>\n              {_.map(treatments, tr => (\n                <option key={tr._id} value={tr._id}>\n                  {tr.displayName()}\n                </option>\n              ))}\n            </HTMLSelect>\n          </FormGroup>\n\n          <FormGroup\n            label=\"Game Count\"\n            labelFor=\"gamesCount\"\n            helperText={isComplete ? null : \"The total number of games to run\"}\n          >\n            {isComplete ? (\n              gamesCount\n            ) : (\n              <NumericInput\n                name=\"gamesCount\"\n                id=\"gamesCount\"\n                min=\"1\"\n                max={maxGamesCount}\n                stepSize=\"1\"\n                onValueChange={this.handleGamesCountChange}\n                value={gamesCount}\n              />\n            )}\n          </FormGroup>\n        </div>\n        <div className={Classes.DIALOG_FOOTER}>\n          <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n            <Button type=\"submit\" text=\"Create Batch\" intent={Intent.PRIMARY} />\n          </div>\n        </div>\n      </form>\n    );\n  }\n\n  render() {\n    const { isOpen, onClose } = this.props;\n    const treatments = this.validTreatments();\n    const lobbyConfigs = this.validLobbyConfigs();\n\n    const content =\n      _.isEmpty(treatments) || _.isEmpty(lobbyConfigs)\n        ? this.renderRequired()\n        : this.renderContent();\n\n    return (\n      <Dialog\n        icon={IconNames.LAYERS}\n        isOpen={isOpen}\n        onClose={onClose}\n        title=\"New Batch\"\n        style={{ width: 700 }}\n      >\n        {content}\n      </Dialog>\n    );\n  }\n}\n","import React from \"react\";\n\nimport {\n  Classes,\n  Button,\n  Dialog,\n  FormGroup,\n  Intent,\n  NumericInput\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { Factors } from \"../../../api/factors/factors.js\";\nimport { AlertToaster } from \"../Toasters.jsx\";\nimport { createFactor } from \"../../../api/factors/methods.js\";\n\nexport default class AdminNewFactor extends React.Component {\n  state = { value: \"\", name: \"\", loading: false };\n\n  constructor(props) {\n    super(props);\n    this.valueInputRef = React.createRef();\n  }\n\n  componentDidMount() {\n    if (this.props.isOpen) {\n      this.focus();\n    }\n  }\n\n  componentDidUpdate(prevProp) {\n    if (this.props.isOpen && !prevProp.isOpen) {\n      this.focus();\n    }\n  }\n\n  focus() {\n    setTimeout(() => {\n      const node = this.valueInputRef.current;\n      if (node) {\n        node.focus();\n      }\n    }, 100);\n  }\n\n  handleIntUpdate = value => {\n    this.setState({ value });\n  };\n\n  handleUpdate = event => {\n    const name = event.currentTarget.name;\n    const value = event.currentTarget.value;\n    this.setState({ [name]: value });\n  };\n\n  handleNewFactor = event => {\n    event.preventDefault();\n\n    const { name, value, loading } = this.state;\n    if (loading) {\n      return;\n    }\n    this.setState({ loading: true });\n\n    const {\n      type: { _id: factorTypeId, type },\n      onClose\n    } = this.props;\n\n    const params = Factors.schema.clean(\n      { factorTypeId, name, value },\n      { autoConvert: false }\n    );\n\n    if (type === \"Number\") {\n      params.value = parseFloat(params.value);\n    }\n\n    createFactor.call(params, err => {\n      if (err) {\n        AlertToaster.show({\n          message: err.reason || err.message || err.toString()\n        });\n        this.setState({ loading: false });\n        return;\n      }\n      onClose();\n      this.setState({ loading: false, name: \"\", value: undefined });\n    });\n  };\n\n  render() {\n    const { isOpen, onClose, type } = this.props;\n    const { name, value, loading } = this.state;\n\n    let input;\n    switch (type.type) {\n      case \"Number\":\n        input = (\n          <input\n            className={Classes.INPUT}\n            dir=\"auto\"\n            type=\"number\"\n            name=\"value\"\n            id=\"value\"\n            step=\"any\"\n            min={type.min || -1000000000000}\n            max={type.max || 1000000000000}\n            value={value}\n            onChange={this.handleUpdate}\n            required\n            ref={this.valueInputRef}\n          />\n        );\n        break;\n      case \"Integer\":\n        input = (\n          <NumericInput\n            name=\"value\"\n            id=\"value\"\n            min={type.min || -1000000000000}\n            max={type.max || 1000000000000}\n            value={value}\n            required\n            onValueChange={this.handleIntUpdate}\n            inputRef={this.valueInputRef}\n          />\n        );\n        break;\n      case \"String\":\n        input = (\n          <input\n            className={Classes.INPUT}\n            dir=\"auto\"\n            type=\"text\"\n            name=\"value\"\n            id=\"value\"\n            autoComplete=\"off\"\n            value={value}\n            onChange={this.handleUpdate}\n            // pattern={type.regEx && type.regEx.source}\n            required\n            ref={this.valueInputRef}\n          />\n        );\n        break;\n      default:\n        console.error(\"New factor unsupported type:\", type.type);\n        break;\n    }\n\n    let properties = [];\n    if (!_.isUndefined(type.min)) {\n      properties.push(`Min: ${type.min}`);\n    }\n    if (!_.isUndefined(type.max)) {\n      properties.push(`Max: ${type.max}`);\n    }\n    // if (!_.isUndefined(type.regEx)) {\n    //   properties.push(`Pattern: ${type.regEx.source}`);\n    // }\n\n    return (\n      <Dialog\n        icon={IconNames.PROPERTY}\n        isOpen={isOpen}\n        onClose={onClose}\n        title={`New ${type.name} Factor Value`}\n      >\n        <form className=\"new-factor\" onSubmit={this.handleNewFactor}>\n          <div className={Classes.DIALOG_BODY}>\n            <FormGroup\n              label=\"Name\"\n              labelFor=\"name\"\n              helperText=\"Only characters, numbers and underscore (_). No spaces.\"\n            >\n              <input\n                className={Classes.INPUT}\n                dir=\"auto\"\n                type=\"text\"\n                name=\"name\"\n                id=\"name\"\n                autoComplete=\"off\"\n                value={name}\n                pattern={/^[a-zA-Z0-9_]+$/.source}\n                onChange={this.handleUpdate}\n                // required\n              />\n            </FormGroup>\n\n            <FormGroup\n              label=\"Value\"\n              labelFor=\"name\"\n              helperText={properties.length > 0 ? properties.join(\" - \") : \"\"}\n            >\n              {input}\n            </FormGroup>\n          </div>\n          <div className={Classes.DIALOG_FOOTER}>\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n              <Button\n                loading={loading}\n                type=\"submit\"\n                text=\"Create Factor Value\"\n                intent={Intent.PRIMARY}\n              />\n            </div>\n          </div>\n        </form>\n      </Dialog>\n    );\n  }\n}\n","import React from \"react\";\n\nimport {\n  Classes,\n  Button,\n  Dialog,\n  FormGroup,\n  HTMLSelect,\n  Intent,\n  NumericInput,\n  Switch,\n  TagInput,\n  TextArea\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { FactorTypes } from \"../../../api/factor-types/factor-types.js\";\nimport { createFactorType } from \"../../../api/factor-types/methods.js\";\nimport { AlertToaster } from \"../Toasters.jsx\";\nimport HelpTooltip from \"../HelpTooltip.jsx\";\n\nexport default class AdminNewFactorType extends React.Component {\n  state = { type: \"String\", name: \"\", initialValues: [], required: false };\n  constructor(props) {\n    super(props);\n    this.firstInputRef = React.createRef();\n  }\n\n  componentDidUpdate(prevProp) {\n    if (this.props.isOpen && !prevProp.isOpen) {\n      setTimeout(() => {\n        const node = this.firstInputRef.current;\n        if (node) {\n          node.focus();\n        }\n      }, 100);\n    }\n  }\n\n  handleNumberUpdate = (name, value, valueAsString) => {\n    this.setState({ [name]: valueAsString });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.currentTarget;\n    this.setState({ [name]: value });\n  };\n\n  handleChangeCheckbox = event => {\n    const { name, checked } = event.currentTarget;\n    this.setState({ [name]: checked });\n  };\n\n  handleNewFactorType = event => {\n    event.preventDefault();\n    if (this.stopsubmit) {\n      return;\n    }\n    let {\n      name,\n      description,\n      type,\n      min,\n      max,\n      initialValues,\n      required\n    } = this.state;\n    const { onClose } = this.props;\n\n    const params = {\n      name,\n      description,\n      type,\n      min,\n      max,\n      required\n    };\n\n    params.initialValues = initialValues.filter(\n      v => !Factors.valueValidation(params, v)\n    );\n\n    if (params.min !== undefined) {\n      params.min = parseFloat(params.min);\n    }\n\n    if (params.max !== undefined) {\n      params.max = parseFloat(params.max);\n    }\n\n    createFactorType.call(params, err => {\n      if (err) {\n        AlertToaster.show({\n          message: err.reason || err.message || err.toString()\n        });\n        return;\n      }\n      onClose();\n      this.setState({\n        name: \"\",\n        description: \"\",\n        type: \"String\",\n        min: undefined,\n        max: undefined,\n        initialValues: [],\n        required: false\n      });\n    });\n  };\n\n  render() {\n    const { isOpen, onClose } = this.props;\n    const {\n      name,\n      description,\n      type,\n      min,\n      max,\n      initialValues,\n      required\n    } = this.state;\n\n    const extraInputs = [];\n    switch (type) {\n      case \"Number\":\n      case \"Integer\":\n        extraInputs.push(\n          <FormGroup\n            key=\"min\"\n            label=\"Min\"\n            labelFor=\"min\"\n            helperText=\"Minimum accepted value\"\n          >\n            <NumericInput\n              value={min}\n              onValueChange={this.handleNumberUpdate.bind(this, \"min\")}\n            />\n          </FormGroup>\n        );\n\n        extraInputs.push(\n          <FormGroup\n            key=\"max\"\n            label=\"Max\"\n            labelFor=\"max\"\n            helperText=\"Maximum accepted value.\"\n          >\n            <NumericInput\n              value={max}\n              onValueChange={this.handleNumberUpdate.bind(this, \"max\")}\n            />\n          </FormGroup>\n        );\n        break;\n      case \"String\":\n        extraInputs.push(\n          <FormGroup\n            key=\"min\"\n            label=\"Min\"\n            labelFor=\"min\"\n            helperText=\"Minimum number of characters.\"\n          >\n            <NumericInput\n              min={1}\n              max={1000000000000}\n              value={min}\n              onValueChange={this.handleNumberUpdate.bind(this, \"min\")}\n            />\n          </FormGroup>\n        );\n\n        extraInputs.push(\n          <FormGroup\n            key=\"max\"\n            label=\"Max\"\n            labelFor=\"max\"\n            helperText=\"Maximum number of characters.\"\n          >\n            <NumericInput\n              min={1}\n              max={1000000000000}\n              value={max}\n              onValueChange={this.handleNumberUpdate.bind(this, \"max\")}\n            />\n          </FormGroup>\n        );\n\n        break;\n      case \"Boolean\":\n        break;\n      default:\n        console.error(\"New factor unsupported type:\", type.stringType);\n        break;\n    }\n\n    return (\n      <Dialog\n        icon={IconNames.PROPERTY}\n        isOpen={isOpen}\n        onClose={onClose}\n        title=\"New Factor\"\n      >\n        <form\n          className=\"new-factor-type\"\n          //\n          onSubmit={this.handleNewFactorType}\n        >\n          <div className={Classes.DIALOG_BODY}>\n            <FormGroup\n              label=\"Type\"\n              labelFor=\"type\"\n              labelInfo={\n                <HelpTooltip\n                  content={\n                    <div>\n                      There are 4 types:\n                      <ul>\n                        <li>\n                          <strong>String:</strong> either any string value,\n                          with. the possibility to set a min and max number of\n                          characters, or a fixed set of values (allowed values).\n                        </li>\n                        <li>\n                          <strong>Integer:</strong> An integer value, with\n                          optional min and/or max values.\n                        </li>\n                        <li>\n                          <strong>Number:</strong> A Number works like Integer\n                          and adds support for decimal numbers.\n                        </li>\n                        <li>\n                          <strong>Boolean:</strong> A Boolean will support only\n                          true or false values.\n                        </li>\n                      </ul>\n                    </div>\n                  }\n                />\n              }\n            >\n              <HTMLSelect\n                name=\"type\"\n                id=\"type\"\n                onChange={this.handleChange}\n                value={type}\n                options={FactorTypes.types}\n              />\n            </FormGroup>\n\n            <Switch\n              label=\"Required\"\n              name=\"required\"\n              checked={required}\n              onChange={this.handleChangeCheckbox}\n            />\n\n            <FormGroup\n              label=\"Name\"\n              labelFor=\"name\"\n              helperText={\n                <>\n                  Format: <code>camelCase</code>. Only letters and numbers, with\n                  leading lowercase letters.\n                </>\n              }\n              labelInfo=\"(required)\"\n            >\n              <input\n                className={Classes.INPUT}\n                dir=\"auto\"\n                type=\"text\"\n                name=\"name\"\n                id=\"name\"\n                autoComplete=\"off\"\n                value={name}\n                pattern={/^[a-zA-Z0-9_]+$/.source}\n                onChange={this.handleChange}\n                required\n                ref={this.firstInputRef}\n              />\n            </FormGroup>\n\n            <FormGroup\n              label=\"Description\"\n              labelFor=\"description\"\n              labelInfo=\"(required)\"\n              // helperText={<>Format: <code>camelCase</code>. Only letters and numbers, with leading lowercase letters.<>}\n            >\n              <TextArea\n                required\n                fill\n                id=\"description\"\n                name=\"description\"\n                onChange={this.handleChange}\n                value={description}\n              />\n            </FormGroup>\n\n            {extraInputs}\n\n            {/* {type === \"Boolean\" ? null : (\n              <FormGroup\n                key=\"initialValues\"\n                label=\"Initial Values\"\n                labelFor=\"initialValues\"\n                helperText=\"List of initial values to create with the new Factor.\"\n              >\n                <TagInput\n                  inputProps={{\n                    onFocus: () => {\n                      this.stopsubmit = true;\n                    },\n                    onBlur: () => {\n                      this.stopsubmit = false;\n                    }\n                  }}\n                  addOnBlur\n                  onChange={value => this.setState({ initialValues: value })}\n                  values={initialValues}\n                />\n              </FormGroup>\n            )} */}\n          </div>\n          <div className={Classes.DIALOG_FOOTER}>\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n              <Button\n                type=\"submit\"\n                text=\"Create Factor\"\n                intent={Intent.PRIMARY}\n                // onClick={this.handleNewFactorType}\n              />\n            </div>\n          </div>\n        </form>\n      </Dialog>\n    );\n  }\n}\n","import React from \"react\";\nimport inflection from \"inflection\";\n\nimport {\n  Classes,\n  Button,\n  Dialog,\n  FormGroup,\n  HTMLSelect,\n  Intent,\n  NumericInput\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { AlertToaster } from \"../Toasters.jsx\";\nimport { LobbyConfigs } from \"../../../api/lobby-configs/lobby-configs.js\";\nimport { createLobbyConfig } from \"../../../api/lobby-configs/methods.js\";\nimport HelpTooltip from \"../HelpTooltip.jsx\";\n\nexport default class AdminNewLobbyConfig extends React.Component {\n  state = {\n    name: \"\",\n    timeoutInSeconds: LobbyConfigs.defaultTimeoutInSeconds,\n    timeoutType: LobbyConfigs.timeoutTypes[0],\n    timeoutStrategy: LobbyConfigs.timeoutStrategies[0],\n    extendCount: 0\n  };\n\n  handleChange = ({ currentTarget: { value, name } }) => {\n    this.setState({ [name]: value.trim() });\n  };\n\n  handleIntChange = (name, value) => {\n    this.setState({ [name]: value });\n  };\n\n  handleNewLobbyConfig = event => {\n    const { onClose } = this.props;\n    const {\n      name,\n      timeoutInSeconds,\n      timeoutType,\n      timeoutStrategy,\n      extendCount\n    } = this.state;\n    event.preventDefault();\n\n    const params = { timeoutInSeconds, timeoutType };\n    if (name !== \"\") {\n      params.name = name;\n    }\n    if (timeoutType === \"lobby\") {\n      params.timeoutStrategy = timeoutStrategy;\n    } else if (timeoutType === \"individual\") {\n      params.extendCount = extendCount;\n    }\n\n    createLobbyConfig.call(params, err => {\n      if (err) {\n        AlertToaster.show({ message: String(err.message) });\n        return;\n      }\n      onClose();\n      this.setState({\n        name: \"\"\n      });\n    });\n  };\n\n  render() {\n    const { isOpen, onClose } = this.props;\n    const {\n      name,\n      timeoutType,\n      timeoutStrategy,\n      timeoutInSeconds,\n      extendCount\n    } = this.state;\n\n    return (\n      <Dialog\n        icon={IconNames.TIME}\n        isOpen={isOpen}\n        onClose={onClose}\n        title=\"New Lobby Configuration\"\n      >\n        <form className=\"new-treatment\" onSubmit={this.handleNewLobbyConfig}>\n          <div className={Classes.DIALOG_BODY}>\n            <FormGroup label=\"Name\" labelInfo=\"(optional)\" labelFor=\"name\">\n              <input\n                className={Classes.INPUT}\n                type=\"text\"\n                dir=\"auto\"\n                name=\"name\"\n                id=\"name\"\n                autoComplete=\"off\"\n                value={name}\n                onChange={this.handleChange}\n                pattern={/^[a-zA-Z0-9_]+$/.source}\n              />\n            </FormGroup>\n\n            <FormGroup\n              label=\"Timeout Type\"\n              labelFor=\"timeoutType\"\n              labelInfo={\n                <HelpTooltip\n                  content={\n                    <div>\n                      There are 2 timeout types:\n                      <ul>\n                        <li>\n                          <strong>Lobby:</strong> the timeout start when the\n                          first player reaches the lobby and runs out for all\n                          the players whether they have even reached the lobby\n                          or not.\n                        </li>\n                        <li>\n                          <strong>Individual:</strong> the timeout is started\n                          for each player as they reach the room. Some players\n                          might time out before all players are in the lobby,\n                          they might continue waiting for another timeout\n                          period. They might also leave the game and a new\n                          player can replace them. The lobby itself never times\n                          out.\n                        </li>\n                      </ul>\n                    </div>\n                  }\n                />\n              }\n            >\n              <HTMLSelect\n                name=\"timeoutType\"\n                id=\"timeoutType\"\n                onChange={this.handleChange}\n                value={timeoutType}\n              >\n                {_.map(LobbyConfigs.timeoutTypes, key => (\n                  <option key={key} value={key}>\n                    {inflection.titleize(key)}\n                  </option>\n                ))}\n              </HTMLSelect>\n            </FormGroup>\n\n            <FormGroup\n              required\n              label=\"Timeout Duration in Seconds\"\n              labelFor=\"timeoutInSeconds\"\n            >\n              <NumericInput\n                name=\"timeoutInSeconds\"\n                id=\"timeoutInSeconds\"\n                min=\"1\"\n                max={LobbyConfigs.maxTimeoutInSeconds}\n                stepSize=\"1\"\n                majorStepSize=\"10\"\n                onValueChange={this.handleIntChange.bind(\n                  this,\n                  \"timeoutInSeconds\"\n                )}\n                value={timeoutInSeconds}\n                required\n              />\n            </FormGroup>\n\n            {timeoutType === \"individual\" ? (\n              <FormGroup\n                label=\"Extend Count\"\n                labelFor=\"extendCount\"\n                labelInfo={\n                  <HelpTooltip\n                    content={\n                      <div>\n                        Number of times to allow the user to extend their wait\n                        time by the initial timeout time. If set to 0, they are\n                        never asked to retry.\n                      </div>\n                    }\n                  />\n                }\n              >\n                <NumericInput\n                  name=\"extendCount\"\n                  id=\"extendCount\"\n                  min=\"0\"\n                  max={1000000000}\n                  stepSize=\"1\"\n                  majorStepSize=\"10\"\n                  onValueChange={this.handleIntChange.bind(this, \"extendCount\")}\n                  value={extendCount}\n                  required\n                />\n              </FormGroup>\n            ) : (\n              \"\"\n            )}\n\n            {timeoutType === \"lobby\" ? (\n              <FormGroup\n                label=\"Timeout Strategy\"\n                labelFor=\"timeoutStrategy\"\n                labelInfo={\n                  <HelpTooltip\n                    content={\n                      <div>\n                        The Timeout Strategy determines what to do in case\n                        people are waiting in the lobby for longer than the\n                        timeout duration. Available strategies:\n                        <ul>\n                          <li>\n                            <strong>Ignore:</strong> start the game anyway\n                          </li>\n                          <li>\n                            <strong>Fail:</strong> take the player to the exit\n                            survey\n                          </li>\n                          <li>\n                            <strong>Bots:</strong> fill the missing players\n                            slots with bots from timeoutBots.\n                          </li>\n                        </ul>\n                      </div>\n                    }\n                  />\n                }\n              >\n                <HTMLSelect\n                  name=\"timeoutStrategy\"\n                  id=\"timeoutStrategy\"\n                  onChange={this.handleChange}\n                  value={timeoutStrategy}\n                >\n                  {_.map(LobbyConfigs.timeoutStrategies, key => (\n                    <option key={key} value={key}>\n                      {inflection.titleize(key)}\n                    </option>\n                  ))}\n                </HTMLSelect>\n              </FormGroup>\n            ) : (\n              \"\"\n            )}\n          </div>\n\n          <div className={Classes.DIALOG_FOOTER}>\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n              <Button\n                type=\"submit\"\n                text=\"Create Lobby Configuration\"\n                intent={Intent.PRIMARY}\n              />\n            </div>\n          </div>\n        </form>\n      </Dialog>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport {\n  Callout,\n  Classes,\n  Button,\n  Dialog,\n  FormGroup,\n  Intent,\n  RadioGroup,\n  Radio\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { AlertToaster } from \"../Toasters.jsx\";\nimport { createTreatment } from \"../../../api/treatments/methods.js\";\n\nexport default class AdminNewTreatment extends React.Component {\n  state = { selected: {}, name: \"\" };\n\n  handleNameChange = () => {\n    const name = this.nameField.value;\n    this.setState({ name });\n  };\n\n  handleFactorChange = (type, event) => {\n    const factorId = event.currentTarget.value;\n    const selected = {\n      ...this.state.selected,\n      [type]: factorId\n    };\n    this.setState({ selected });\n  };\n\n  handleNewTreatment = event => {\n    const { onClose } = this.props;\n    const { name, selected } = this.state;\n    event.preventDefault();\n\n    const keys = _.compact(_.keys(selected));\n    const factorIds = _.compact(_.values(selected));\n\n    if (keys.length !== factorIds.length) {\n      const missing = keys.join(\", \");\n      const msg = `A value for each factor must be selected. (missing: ${missing})`;\n      AlertToaster.show({ message: msg });\n      return;\n    }\n\n    const params = { name, factorIds };\n    createTreatment.call(params, err => {\n      if (err) {\n        if (err.details) {\n          try {\n            const details = JSON.parse(err.details);\n            const out = details[0].details\n              .map(er => {\n                switch (er.type) {\n                  case \"required\":\n                    return `${er.name} is required.`;\n                  default:\n                    console.error(\"unknown error type\", er);\n                }\n              })\n              .join(\" \");\n            AlertToaster.show({ message: out });\n          } catch (e) {\n            console.error(JSON.stringify(err));\n            AlertToaster.show({ message: String(err.message) });\n          }\n        } else {\n          AlertToaster.show({ message: String(err.message) });\n        }\n        return;\n      }\n      onClose();\n      this.setState({\n        name: \"\",\n        selected: {}\n      });\n    });\n  };\n\n  render() {\n    const { isOpen, factors, factorTypes, onClose } = this.props;\n    const { name, selected } = this.state;\n\n    const types = factorTypes.filter(t => !t.archivedAt);\n\n    return (\n      <Dialog\n        className=\"admin\"\n        icon={IconNames.PROPERTIES}\n        isOpen={isOpen}\n        onClose={onClose}\n        title=\"New Treatment\"\n      >\n        <form className=\"new-treatment\" onSubmit={this.handleNewTreatment}>\n          <div className={Classes.DIALOG_BODY}>\n            <FormGroup label=\"Name\" labelInfo=\"(optional)\" labelFor=\"name\">\n              <input\n                className={Classes.INPUT}\n                type=\"text\"\n                dir=\"auto\"\n                name=\"name\"\n                id=\"name\"\n                autoComplete=\"off\"\n                value={name}\n                onChange={this.handleNameChange}\n                ref={e => (this.nameField = e)}\n                // pattern={/^[a-zA-Z0-9_]+$/.source}\n              />\n            </FormGroup>\n\n            {_.map(types, type => {\n              const conds = _.filter(\n                factors,\n                factor => factor.factorTypeId === type._id\n              );\n              const requiredClass = type.required ? \"required\" : \"\";\n              if (conds.length === 0) {\n                return (\n                  <FormGroup\n                    label={type.name}\n                    labelFor=\"name\"\n                    className={requiredClass}\n                    key={type._id}\n                  >\n                    <Callout\n                      icon={\n                        type.required\n                          ? IconNames.WARNING_SIGN\n                          : IconNames.INFO_SIGN\n                      }\n                      intent={type.required ? Intent.DANGER : null}\n                    >\n                      There are no factor values for the\n                      {type.required ? <strong> required </strong> : \" \"}\n                      {type.name} factor type yet.{\" \"}\n                      <Link to=\"/admin/factors\">Add factor values</Link>.\n                    </Callout>\n                  </FormGroup>\n                );\n              }\n              return (\n                <RadioGroup\n                  key={type._id}\n                  label={type.name}\n                  onChange={this.handleFactorChange.bind(this, type._id)}\n                  selectedValue={selected[type._id]}\n                  inline={true}\n                  className={requiredClass}\n                >\n                  {_.map(conds, cond => (\n                    <Radio\n                      key={cond._id}\n                      label={cond.label()}\n                      value={cond._id}\n                    />\n                  ))}\n                </RadioGroup>\n              );\n            })}\n          </div>\n          <div className={Classes.DIALOG_FOOTER}>\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n              <Button\n                type=\"submit\"\n                text=\"Create Treatment\"\n                intent={Intent.PRIMARY}\n              />\n            </div>\n          </div>\n        </form>\n      </Dialog>\n    );\n  }\n}\n","import React from \"react\";\nimport moment from \"moment\";\nimport { Link } from \"react-router-dom\";\n\nimport {\n  Button,\n  FormGroup,\n  HTMLSelect,\n  Intent,\n  NonIdealState,\n  Tag,\n  HTMLTable,\n  Classes\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { AdminPageHeader } from \"./AdminHeading.jsx\";\nimport { AlertToaster, SuccessToaster } from \"../Toasters.jsx\";\nimport {\n  retireGameFullPlayers,\n  retireSinglePlayer\n} from \"../../../api/players/methods\";\nimport { exitStatuses } from \"../../../api/players/players.js\";\n\nexport default class AdminPlayers extends React.Component {\n  state = {\n    retiredReason: exitStatuses[0],\n    players: [],\n    searchParam: { id: \"\", createdAt: \"\", status: \"\", exitStatus: \"\" }\n  };\n\n  componentDidMount() {\n    const { players } = this.props;\n    this.setState({\n      players: players\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    const { players } = this.props;\n\n    if (prevProps.players.length !== players.length) {\n      this.setState({\n        players: players\n      });\n    }\n  }\n\n  handleChange = event => {\n    const retiredReason = event.currentTarget.value;\n    this.setState({\n      retiredReason\n    });\n  };\n\n  handleRetirePlayers = event => {\n    event.preventDefault();\n    const { retiredReason } = this.state;\n    retireGameFullPlayers.call({ retiredReason }, (err, playersAffected) => {\n      if (err) {\n        AlertToaster.show({ message: `Failed to retire players: ${err}` });\n      } else {\n        SuccessToaster.show({ message: `${playersAffected} players affected` });\n      }\n    });\n  };\n\n  handleRetireSinglePlayer = (event, playerId) => {\n    event.preventDefault();\n    retireSinglePlayer.call({ playerId }, (err, _) => {\n      if (err) {\n        AlertToaster.show({ message: `Failed to retire player: ${err}` });\n      } else {\n        SuccessToaster.show({\n          message: `Succeed to retire player`\n        });\n      }\n    });\n  };\n\n  handleColumnHeaderChange = (event, key) => {\n    const value = event.currentTarget.value;\n\n    this.setState(\n      {\n        searchParam: { ...this.state.searchParam, [key]: value }\n      },\n      this.filterPlayers\n    );\n  };\n\n  filterPlayers = () => {\n    const {\n      searchParam: { createdAt, id, status, exitStatus }\n    } = this.state;\n    const { players } = this.props;\n\n    this.setState({\n      players: players\n        .filter(p => {\n          // Filter id\n          if (!id) {\n            return true;\n          }\n\n          return p.id.includes(id);\n        })\n        .filter(p => {\n          // Filter status\n          if (!status) {\n            return true;\n          }\n\n          switch (status) {\n            case \"online\":\n              return p.online && p.idle === false;\n\n            case \"offline\":\n              return !p.online;\n\n            case \"idle\":\n              return p.idle;\n\n            default:\n              return true;\n          }\n        })\n        .filter(p => {\n          // Filter createdAt\n          if (!createdAt) {\n            return true;\n          }\n\n          const fromNow = moment(p.createdAt).fromNow();\n          return fromNow.includes(createdAt);\n        })\n        .filter(p => {\n          // Filter exitStatus\n          if (!exitStatus) {\n            return true;\n          }\n\n          return p.exitStatus ? p.exitStatus.includes(exitStatus) : false;\n        })\n    });\n  };\n\n  render() {\n    const { retired } = this.props;\n    const { retiredReason, players, searchParam } = this.state;\n\n    return (\n      <div className=\"players\">\n        <AdminPageHeader icon={IconNames.PERSON}>\n          {retired ? \"Retired Players\" : \"Players\"}\n        </AdminPageHeader>\n\n        {this.props.players.length === 0 ? (\n          <p>{retired ? \"No retired players.\" : \"No players yet.\"}</p>\n        ) : (\n          <HTMLTable striped>\n            <thead>\n              <tr>\n                <th>#</th>\n                <th>\n                  <input\n                    className={Classes.INPUT}\n                    value={searchParam.id}\n                    type=\"text\"\n                    placeholder=\"ID\"\n                    onChange={e => this.handleColumnHeaderChange(e, \"id\")}\n                  />\n                </th>\n                <th>\n                  <input\n                    className={Classes.INPUT}\n                    value={searchParam.status}\n                    type=\"text\"\n                    placeholder=\"Status\"\n                    onChange={e => this.handleColumnHeaderChange(e, \"status\")}\n                  />\n                </th>\n                <th>\n                  <input\n                    className={Classes.INPUT}\n                    value={searchParam.createdAt}\n                    type=\"text\"\n                    placeholder=\"First Registered\"\n                    onChange={e =>\n                      this.handleColumnHeaderChange(e, \"createdAt\")\n                    }\n                  />\n                </th>\n                <th>\n                  <input\n                    className={Classes.INPUT}\n                    value={searchParam.exitStatus}\n                    type=\"text\"\n                    placeholder=\"Exit Status\"\n                    onChange={e =>\n                      this.handleColumnHeaderChange(e, \"exitStatus\")\n                    }\n                  />\n                </th>\n                <th />\n              </tr>\n            </thead>\n            <tbody>\n              {_.map(players, player => (\n                <tr key={player._id}>\n                  <td>{player.index}</td>\n                  <td>{player.id}</td>\n                  <td>\n                    <Tag\n                      intent={\n                        player.online\n                          ? player.idle\n                            ? Intent.WARNING\n                            : Intent.SUCCESS\n                          : Intent.DANGER\n                      }\n                    >\n                      {player.online\n                        ? player.idle\n                          ? \"idle\"\n                          : \"online\"\n                        : \"offline\"}\n                    </Tag>\n                  </td>\n                  <td title={moment(player.createdAt).format()}>\n                    {moment(player.createdAt).fromNow()}\n                  </td>\n                  <td>{player.exitStatus}</td>\n                  <td>\n                    {!player.retireAt && (\n                      <Button\n                        text={\"Retire\"}\n                        className={Classes.SMALL}\n                        minimal\n                        icon={IconNames.LOG_OUT}\n                        intent={Intent.DANGER}\n                        onClick={e =>\n                          this.handleRetireSinglePlayer(e, player._id)\n                        }\n                      />\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </HTMLTable>\n        )}\n\n        {retired ? (\n          <p>\n            <br />\n            <Link to=\"/admin/players\">Back to Active Players</Link>\n          </p>\n        ) : (\n          <>\n            <br />\n\n            <p>\n              <br />\n              <Link to=\"/admin/players/retired\">View Retired Players</Link>\n            </p>\n\n            <br />\n\n            <br />\n\n            <h4>Retire Players</h4>\n\n            <FormGroup label=\"Exit Status\" labelFor=\"retire\">\n              <HTMLSelect\n                name=\"retire\"\n                id=\"retire\"\n                onChange={this.handleChange}\n                value={retiredReason}\n              >\n                {_.map(exitStatuses, name => (\n                  <option key={name} value={name}>\n                    {name}\n                  </option>\n                ))}\n              </HTMLSelect>\n              <br />\n              <br />\n              <Button\n                intent={Intent.PRIMARY}\n                onClick={this.handleRetirePlayers}\n              >\n                Retire Players with exitStatus <strong>{retiredReason}</strong>\n              </Button>\n            </FormGroup>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport { Button, Classes, EditableText, Intent } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { AlertToaster } from \"../Toasters.jsx\";\nimport { updateTreatment } from \"../../../api/treatments/methods.js\";\n\nexport default class AdminTreatment extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.treatment.name || \"\"\n    };\n  }\n\n  componentWillUpdate(props) {\n    if (props.treatment.name !== this.props.treatment.name) {\n      this.setState({ name: props.treatment.name });\n    }\n  }\n\n  handleNameChange = name => {\n    this.setState({ name: name || \"\" });\n  };\n\n  handleNameConfirm = () => {\n    const { _id, name: prevName } = this.props.treatment;\n    const { name: nameRaw } = this.state;\n    const name = nameRaw.trim();\n    if (name === prevName) {\n      this.handleNameChange(prevName);\n      return;\n    }\n\n    updateTreatment.call({ _id, name }, err => {\n      if (err) {\n        AlertToaster.show({ message: String(err) });\n        this.handleNameChange(prevName);\n        return;\n      }\n    });\n  };\n\n  handleArchive = () => {\n    const {\n      archived,\n      treatment: { _id }\n    } = this.props;\n    updateTreatment.call({ _id, archived: !archived });\n  };\n\n  render() {\n    const { treatment, factorTypes, archived } = this.props;\n    const { name } = this.state;\n    const conds = treatment.factors();\n\n    const archiveIntent = archived ? Intent.SUCCESS : Intent.DANGER;\n    return (\n      <tr>\n        <td>\n          <EditableText\n            onChange={this.handleNameChange}\n            onConfirm={this.handleNameConfirm}\n            value={name}\n          />\n        </td>\n\n        {factorTypes.map(type => {\n          const cond = conds.find(c => c.factorTypeId === type._id);\n          return <td key={type._id}>{cond ? cond.label() : \"-\"}</td>;\n        })}\n\n        <td>\n          <Button\n            text={archived ? \"Unarchive\" : \"Archive\"}\n            intent={archiveIntent}\n            minimal\n            icon={IconNames.BOX}\n            className={Classes.SMALL}\n            onClick={this.handleArchive}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { Button, HTMLTable, Icon } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { AdminPageHeader } from \"./AdminHeading.jsx\";\nimport AdminNewTreatment from \"./AdminNewTreatment.jsx\";\nimport AdminTreatment from \"./AdminTreatment.jsx\";\nimport Loading from \"../Loading.jsx\";\n\nexport default class AdminTreatments extends React.Component {\n  state = { newTreatmentIsOpen: false };\n\n  render() {\n    const { loading, treatments, factors, factorTypes, archived } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    return (\n      <div className=\"treatments\">\n        <AdminPageHeader icon={IconNames.PROPERTIES}>\n          {archived ? \"Archived Treatments\" : \"Treatments\"}\n        </AdminPageHeader>\n\n        {treatments.length === 0 ? (\n          <p>\n            {archived\n              ? \"No archived treatments.\"\n              : \"No treatments yet, create some bellow.\"}\n          </p>\n        ) : (\n          <HTMLTable striped>\n            <thead>\n              <tr>\n                <th>Name</th>\n                {factorTypes.map(type => (\n                  <th key={type._id}>\n                    <em label={type.description}>{type.name}</em>\n                  </th>\n                ))}\n                <th />\n              </tr>\n            </thead>\n            <tbody>\n              {_.map(treatments, treatment => (\n                <AdminTreatment\n                  key={treatment._id}\n                  treatment={treatment}\n                  factorTypes={factorTypes}\n                  archived={archived}\n                />\n              ))}\n            </tbody>\n          </HTMLTable>\n        )}\n\n        {archived ? (\n          <p>\n            <br />\n            <Link to=\"/admin/treatments\">Back to Active Treatments</Link>\n          </p>\n        ) : (\n          <>\n            <br />\n\n            <Button\n              text=\"New Treatment\"\n              onClick={() => this.setState({ newTreatmentIsOpen: true })}\n            />\n\n            <AdminNewTreatment\n              factors={factors}\n              factorTypes={factorTypes}\n              onClose={() => this.setState({ newTreatmentIsOpen: false })}\n              isOpen={this.state.newTreatmentIsOpen}\n            />\n\n            <p>\n              <br />\n              <Link to=\"/admin/treatments/archived\">\n                View Archived Treatments\n              </Link>\n            </p>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n","import { Meteor } from \"meteor/meteor\";\nimport { withTracker } from \"meteor/react-meteor-data\";\n\nexport default (Comp, props) =>\n  withTracker(rest => ({\n    ...rest,\n    ...props,\n    user: Meteor.user(),\n    loggingIn: Meteor.loggingIn(),\n    loading: Meteor.loggingIn(),\n    connected: Meteor.status().connected\n  }))(Comp);\n","// gameContainer.jsx\n\nimport { TimeSync } from \"meteor/mizzao:timesync\";\nimport { withTracker } from \"meteor/react-meteor-data\";\nimport moment from \"moment\";\nimport { PlayerRounds } from \"../../api/player-rounds/player-rounds\";\nimport {\n  augmentGameStageRound,\n  augmentPlayer,\n  augmentPlayerLobby,\n  augmentPlayerStageRound,\n  augmentGameLobby\n} from \"../../api/player-stages/augment\";\nimport { PlayerStages } from \"../../api/player-stages/player-stages\";\nimport { Players } from \"../../api/players/players\";\nimport { Rounds } from \"../../api/rounds/rounds\";\nimport { Stages } from \"../../api/stages/stages\";\nimport { Treatments } from \"../../api/treatments/treatments.js\";\nimport Game from \"../components/Game.jsx\";\n\nconst loadingObj = { loading: true };\n\n// Handles all the timing stuff\nconst withTimer = withTracker(({ game, stage, player, ...rest }) => {\n  // We no longer need timers if the game ended, skip the timing stuff.\n  if (game && game.finishedAt) {\n    return { game, stage, player };\n  }\n\n  // TimeSync.serverTime() is a reactive source that will trigger this\n  // withTracker function every 1s.\n  const now = moment(TimeSync.serverTime(null, 100));\n\n  const startTimeAt = stage && stage.startTimeAt && moment(stage.startTimeAt);\n  const started = startTimeAt && now.isSameOrAfter(startTimeAt);\n  const endTimeAt =\n    startTimeAt && startTimeAt.add(stage.durationInSeconds, \"seconds\");\n  const ended = endTimeAt && now.isSameOrAfter(endTimeAt);\n  const timedOut = stage && !player.stage.submitted && ended;\n  const roundOver = (stage && player.stage.submitted) || timedOut;\n\n  return {\n    game,\n    stage,\n    player,\n    timedOut,\n    roundOver,\n    started,\n    ended,\n    endTimeAt,\n    ...rest\n  };\n})(Game);\n\n// Handles all the info below game\nconst withGameInfo = withTracker(\n  ({ game, gameLobby, player, treatment, ...rest }) => {\n    if (!game) {\n      return {\n        gameLobby,\n        player,\n        treatment\n      };\n    }\n\n    const gameId = game._id;\n    treatment = Treatments.findOne(game.treatmentId);\n    if (!treatment) {\n      return loadingObj;\n    }\n\n    game.treatment = treatment.factorsObject();\n    game.players = Players.find({ gameId }).fetch();\n    game.rounds = Rounds.find({ gameId }, { sort: { index: 1 } }).fetch();\n    game.rounds.forEach(round => {\n      round.stages = Stages.find(\n        { roundId: round._id },\n        { sort: { index: 1 } }\n      ).fetch();\n    });\n\n    const stage = Stages.findOne(game.currentStageId);\n    if (!stage) {\n      return loadingObj;\n    }\n    const round = game.rounds.find(r => r._id === stage.roundId);\n\n    // We're having streaming updates from the backend that put us in an\n    // uncertain state until everything is loaded correctly.\n    const playerIds = game.players.map(p => p._id);\n    const playerStagesCount = PlayerStages.find({\n      stageId: stage._id,\n      playerId: { $in: playerIds }\n    }).count();\n    const playerRoundsCount = PlayerRounds.find({\n      roundId: round._id,\n      playerId: { $in: playerIds }\n    }).count();\n\n    if (\n      playerIds.length !== playerStagesCount ||\n      playerIds.length !== playerRoundsCount\n    ) {\n      return loadingObj;\n    }\n\n    augmentGameStageRound(game, stage, round);\n    const applyAugment = player => {\n      player.stage = { _id: stage._id };\n      player.round = { _id: round._id };\n      augmentPlayerStageRound(player, player.stage, player.round, game);\n    };\n    applyAugment(player);\n    game.players.forEach(applyAugment);\n\n    const params = {\n      ...rest,\n      game,\n      round,\n      stage,\n      player,\n      treatment,\n      playerStagesCount,\n      playerRoundsCount\n    };\n\n    return params;\n  }\n)(withTimer);\n\n// Loads top level Players, Game, Round and Stage data\nexport default withTracker(({ player, gameLobby, game, ...rest }) => {\n  // If no game, we're at lobby level\n  if (!game) {\n    if (!gameLobby) {\n      throw new Error(\"game not found\");\n    }\n    const treatment = Treatments.findOne(gameLobby.treatmentId);\n    if (!treatment) {\n      return loadingObj;\n    }\n\n    gameLobby.treatment = treatment.factorsObject();\n    gameLobby.queuedCount = gameLobby.queuedPlayerIds.length;\n    gameLobby.readyCount = gameLobby.playerIds.length;\n    gameLobby.players = Players.find({\n      _id: { $in: gameLobby.playerIds }\n    }).fetch();\n\n    gameLobby.players.forEach(p => augmentPlayerLobby(p, {}, {}, gameLobby));\n\n    augmentGameLobby(gameLobby);\n    augmentPlayerLobby(player, {}, {}, gameLobby);\n\n    return {\n      ...rest,\n      gameLobby,\n      player,\n      treatment\n    };\n  }\n\n  return {\n    ...rest,\n    game,\n    player\n  };\n})(withGameInfo);\n","import { TimeSync } from \"meteor/mizzao:timesync\";\nimport { withTracker } from \"meteor/react-meteor-data\";\nimport React from \"react\";\nimport moment from \"moment\";\n\nimport { LobbyConfigs } from \"../../api/lobby-configs/lobby-configs.js\";\n\nexport default class GameLobbyContainer extends React.Component {\n  render() {\n    return <div>{this.props.children}</div>;\n  }\n}\n\nreturn withTracker(({ gameLobby, player, ...rest }) => {\n  const lobbyConfig = LobbyConfigs.findOne(gameLobby.lobbyConfigId);\n\n  // TimeSync.serverTime() is a reactive source that will trigger this\n  // withTracker function every 1s.\n  const now = moment(TimeSync.serverTime(null, 100));\n\n  const startObj = lobbyConfig.timeoutType === \"lobby\" ? gameLobby : player;\n  const startTimeAt = moment(startObj.timeoutStartedAt);\n  const endTimeAt = startTimeAt.add(lobbyConfig.timeoutInSeconds, \"seconds\");\n  const timedOut = now.isSameOrAfter(endTimeAt);\n  const remainingSeconds = endTimeAt.diff(now, \"seconds\");\n  if (remainingSeconds && remainingSeconds < 0) {\n    remainingSeconds = 0;\n  }\n  const elapsedSeconds = now.diff(startTimeAt, \"seconds\");\n\n  return {\n    lobbyConfig,\n    gameLobby,\n    player,\n    timedOut,\n    remainingSeconds,\n    elapsedSeconds,\n    // endTimeAt,\n    ...rest\n  };\n})(GameLobbyContainer);\n","import { withTracker } from \"meteor/react-meteor-data\";\nimport React from \"react\";\n\nimport { Players } from \"../../api/players/players.js\";\nimport { playerWasRetired } from \"../../api/players/methods.js\";\n\nconst defaultPlayerIdKey = \"d4900a09cf1f41a494d4fc32a626dfef\";\n\nconst urlParams = new URLSearchParams(window.location.search);\nlet playerIdKeyOverride = urlParams.get(\"playerIdKey\");\nif (playerIdKeyOverride) {\n  playerIdKeyOverride += \"-\" + defaultPlayerIdKey;\n}\n\nconst playerIdKey = playerIdKeyOverride || defaultPlayerIdKey;\nconst playerIdDep = new Tracker.Dependency();\n\nexport const getPlayerId = () => {\n  playerIdDep.depend();\n  return localStorage.getItem(playerIdKey);\n};\n\nexport const setPlayerId = playerId => {\n  if (!playerId) {\n    // Avoid storing falsey value\n    return;\n  }\n  const existing = localStorage.getItem(playerIdKey);\n  if (existing === playerId) {\n    return;\n  }\n  localStorage.setItem(playerIdKey, playerId);\n  playerIdDep.changed();\n};\n\nexport const removePlayerId = () => {\n  localStorage.removeItem(playerIdKey);\n  playerIdDep.changed();\n};\n\nexport default (Component, props) => {\n  class IdentifiedContainerInner extends React.Component {\n    componentDidMount() {\n      const { playerId: _id } = this.props;\n      if (_id) {\n        playerWasRetired.call({ _id }, (err, wasRetired) => {\n          if (!err && wasRetired) {\n            removePlayerId();\n          }\n        });\n      }\n    }\n\n    render() {\n      return <Component {...this.props} {...props} />;\n    }\n  }\n\n  const HasPlayers = new Mongo.Collection(\"hasPlayers\");\n  let hasPlayers = false;\n  return withTracker(rest => {\n    const playerId = getPlayerId();\n\n    const loading = !Meteor.subscribe(\"playerInfo\", { playerId }).ready();\n    const player = Players.findOne();\n\n    // We load a flag telling us if the players were cleared, if so remove the\n    // playerId from the local store.\n    const hasPlayersObj = HasPlayers.findOne();\n    if (hasPlayersObj) {\n      if (hasPlayersObj.hasPlayers === false && hasPlayers === true) {\n        console.info(`clearing player: (${playerId})`);\n        removePlayerId();\n      }\n      hasPlayers = hasPlayersObj.hasPlayers;\n    }\n\n    return {\n      ...rest,\n      loading,\n      playerId,\n      player,\n      connected: Meteor.status().connected,\n      playerIdKey: (playerIdKeyOverride || \"\").slice(0, 5)\n    };\n  })(IdentifiedContainerInner);\n};\n","import { withTracker } from \"meteor/react-meteor-data\";\nimport { Batches } from \"../../api/batches/batches.js\";\nimport { GameLobbies } from \"../../api/game-lobbies/game-lobbies.js\";\nimport { Games } from \"../../api/games/games.js\";\nimport { PlayerRounds } from \"../../api/player-rounds/player-rounds.js\";\nimport { PlayerStages } from \"../../api/player-stages/player-stages.js\";\nimport { Rounds } from \"../../api/rounds/rounds.js\";\nimport { Stages } from \"../../api/stages/stages.js\";\nimport { Players } from \"../../api/players/players.js\";\nimport { ActivityMonitor } from \"../../lib/monitor.js\";\nimport Public from \"../components/Public\";\n\nconst withStageDependencies = withTracker(({ loading, game, ...rest }) => {\n  const gameId = game && game._id;\n  const stageId = game && game.currentStageId;\n\n  const sub = Meteor.subscribe(\"gameCurrentRoundStage\", {\n    gameId,\n    stageId\n  });\n\n  const playerStage = PlayerStages.findOne({ gameId, stageId });\n  const playerRound =\n    playerStage &&\n    PlayerRounds.findOne({ gameId, roundId: playerStage.roundId });\n\n  const stage = Stages.findOne({ gameId, _id: stageId });\n  const stages =\n    stage && Stages.find({ gameId, roundId: stage.roundId }).fetch();\n  const round = stage && Rounds.findOne({ gameId, _id: stage.roundId });\n\n  return {\n    loading: loading || !sub.ready(),\n    game,\n    playerStage,\n    playerRound,\n    stage,\n    stages,\n    round,\n    ...rest\n  };\n})(Public);\n\nconst withGameDependencies = withTracker(\n  ({ loading, game, gameLobby, ...rest }) => {\n    if (loading) {\n      return { loading: true };\n    }\n\n    const gameId = game && game._id;\n    const gameLobbyId = gameLobby && gameLobby._id;\n    const sub = Meteor.subscribe(\"gameDependencies\", { gameId });\n    const subGameLobby = Meteor.subscribe(\"gameLobbyDependencies\", {\n      gameLobbyId\n    });\n    const treatmentId =\n      (game && game.treatmentId) || (gameLobby && gameLobby.treatmentId);\n    const subTreatment = Meteor.subscribe(\"treatment\", treatmentId);\n\n    return {\n      loading: !sub.ready() || !subTreatment.ready() || !subGameLobby.ready(),\n      game,\n      gameLobby,\n      ...rest\n    };\n  }\n)(withStageDependencies);\n\nexport default withTracker(({ loading, player, playerId, ...rest }) => {\n  ActivityMonitor.start();\n\n  if (loading) {\n    return { loading: true };\n  }\n\n  const subBatches = Meteor.subscribe(\"runningBatches\", { playerId });\n  const subLobby = Meteor.subscribe(\"gameLobby\", { playerId });\n  const subGame = Meteor.subscribe(\"game\", { playerId });\n  loading = !subBatches.ready() || !subLobby.ready() || !subGame.ready();\n\n  // Are there non-full batches left\n  const batchAvailable = Batches.find({ full: false }).count() > 0;\n\n  // Current user's assigned game and lobby\n  const gameLobby = GameLobbies.findOne({\n    $or: [{ playerIds: playerId }, { queuedPlayerIds: playerId }]\n  });\n  const game = Games.findOne({ playerIds: playerId });\n\n  if (player && !game && !gameLobby) {\n    return { loading: true };\n  }\n\n  // Check if playerId parameter is required, make sure it's present.\n  const { playerIdParam, playerIdParamExclusive } = Meteor.settings.public;\n  const playerIdParamRequired = playerIdParam && playerIdParamExclusive;\n  const urlParams = new window.URL(document.location).searchParams;\n  const playerIdParamPresent = urlParams.get(playerIdParam);\n  const playerIdParamOk = playerIdParamRequired ? playerIdParamPresent : true;\n\n  // Only open if a batch is available and the playerIdParam configuration is\n  // fulfilled, or a game lobby, or a game assigned.\n  const renderPublic = (batchAvailable && playerIdParamOk) || gameLobby || game;\n\n  return {\n    batchAvailable,\n    renderPublic,\n    loading,\n    player,\n    gameLobby,\n    game,\n    ...rest\n  };\n})(withGameDependencies);\n","import { withTracker } from \"meteor/react-meteor-data\";\nimport { Rounds } from \"../../../api/rounds/rounds\";\nimport { Stages } from \"../../../api/stages/stages\";\nimport AdminBatchGame from \"../../components/admin/AdminBatchGame\";\n\nexport default withTracker(props => {\n  const { game } = props;\n\n  if (!game) {\n    return props;\n  }\n\n  const { _id: gameId } = game;\n  const gameLoading = !Meteor.subscribe(\"admin-batch-game\", {\n    gameId\n  }).ready();\n\n  const rounds = Rounds.find({ gameId }).fetch();\n  const stages = Stages.find({ gameId }).fetch();\n\n  return {\n    loading: gameLoading,\n    rounds,\n    stages,\n    ...props\n  };\n})(AdminBatchGame);\n","import { withTracker } from \"meteor/react-meteor-data\";\nimport { GameLobbies } from \"../../../api/game-lobbies/game-lobbies\";\nimport { Games } from \"../../../api/games/games\";\nimport AdminBatchGames from \"../../components/admin/AdminBatchGames\";\n\nexport default withTracker(props => {\n  const { batchId } = props;\n  const batchLoading = !Meteor.subscribe(\"admin-batch\", {\n    batchId\n  }).ready();\n\n  return {\n    loading: batchLoading,\n    games: Games.find({ batchId }).fetch(),\n    gameLobbies: GameLobbies.find({ batchId }).fetch(),\n    ...props\n  };\n})(AdminBatchGames);\n","import { withTracker } from \"meteor/react-meteor-data\";\n\nimport { Batches } from \"../../../api/batches/batches\";\nimport { Factors } from \"../../../api/factors/factors.js\";\nimport { FactorTypes } from \"../../../api/factor-types/factor-types.js\";\nimport { LobbyConfigs } from \"../../../api/lobby-configs/lobby-configs.js\";\nimport { Treatments } from \"../../../api/treatments/treatments\";\nimport AdminBatches from \"../../components/admin/AdminBatches\";\n\nexport default withTracker(props => {\n  const { archived } = props;\n  const batchesLoading = !Meteor.subscribe(\"admin-batches\", {\n    archived\n  }).ready();\n  const treatmentsLoading = !Meteor.subscribe(\"admin-treatments\", {}).ready();\n  const factorsLoading = !Meteor.subscribe(\"admin-factors\").ready();\n  const factorTypesLoading = !Meteor.subscribe(\"admin-factor-types\").ready();\n  const lobbyConfigsLoading = !Meteor.subscribe(\n    \"admin-lobby-configs\",\n    {}\n  ).ready();\n\n  const batches = Batches.find(\n    {\n      archivedAt: { $exists: Boolean(archived) }\n    },\n    { sort: { index: 1 } }\n  ).fetch();\n  const sortedBatches = [];\n\n  if (batches.length > 0) {\n    const runningBatches = [];\n    const initBatches = [];\n\n    batches.forEach(b => {\n      switch (b.status) {\n        case \"running\":\n        case \"finished\":\n          runningBatches.push(b);\n          break;\n        case \"init\":\n          initBatches.push(b);\n          break;\n\n        default:\n          sortedBatches.push(b);\n          break;\n      }\n    });\n\n    if (runningBatches.length > 0) {\n      sortedBatches.push(\n        ...runningBatches.sort((a, b) => a.runningAt - b.runningAt)\n      );\n    }\n\n    if (initBatches.length > 0) {\n      sortedBatches.push(...initBatches);\n    }\n  }\n\n  return {\n    loading:\n      batchesLoading ||\n      treatmentsLoading ||\n      factorsLoading ||\n      lobbyConfigsLoading ||\n      factorTypesLoading,\n    batches: sortedBatches,\n    treatments: Treatments.find().fetch(),\n    factors: Factors.find().fetch(),\n    factorTypes: FactorTypes.find().fetch(),\n    lobbyConfigs: LobbyConfigs.find().fetch(),\n    ...props\n  };\n})(AdminBatches);\n","import { withTracker } from \"meteor/react-meteor-data\";\n\nimport { Factors } from \"../../../api/factors/factors.js\";\nimport { FactorTypes } from \"../../../api/factor-types/factor-types.js\";\nimport { Treatments } from \"../../../api/treatments/treatments\";\nimport AdminFactors from \"../../components/admin/AdminFactors.jsx\";\n\nexport default withTracker(props => {\n  const { archived } = props;\n  const treatmentsLoading = !Meteor.subscribe(\"admin-treatments\", {}).ready();\n  const factorsLoading = !Meteor.subscribe(\"admin-factors\").ready();\n  const typesLoading = !Meteor.subscribe(\"admin-factor-types\").ready();\n\n  return {\n    loading: treatmentsLoading || factorsLoading || typesLoading,\n    treatments: Treatments.find().fetch(),\n    factors: Factors.find(\n      { archivedAt: { $exists: Boolean(archived) } },\n      { sort: { value: 1 } }\n    ).fetch(),\n    factorTypes: FactorTypes.find({\n      archivedAt: { $exists: Boolean(archived) }\n    }).fetch(),\n    archived\n  };\n})(AdminFactors);\n","import { withTracker } from \"meteor/react-meteor-data\";\n\nimport { LobbyConfigs } from \"../../../api/lobby-configs/lobby-configs.js\";\nimport AdminLobbyConfigs from \"../../components/admin/AdminLobbyConfigs.jsx\";\n\nexport default withTracker(props => {\n  const { archived } = props;\n  const loading = !Meteor.subscribe(\"admin-lobby-configs\", {\n    archived\n  }).ready();\n\n  return {\n    loading,\n    lobbyConfigs: LobbyConfigs.find({\n      archivedAt: { $exists: Boolean(archived) }\n    }).fetch(),\n    ...props\n  };\n})(AdminLobbyConfigs);\n","import { withTracker } from \"meteor/react-meteor-data\";\n\nimport { Players } from \"../../../api/players/players.js\";\nimport AdminPlayers from \"../../components/admin/AdminPlayers.jsx\";\n\nexport default withTracker(props => {\n  const { retired } = props;\n  const loading = !Meteor.subscribe(\"admin-players\", {\n    retired\n  }).ready();\n\n  return {\n    loading,\n    retired,\n    players: Players.find(\n      {\n        retiredAt: { $exists: Boolean(retired) }\n      },\n      { sort: { index: 1 } }\n    ).fetch(),\n    ...props\n  };\n})(AdminPlayers);\n","import { withTracker } from \"meteor/react-meteor-data\";\n\nimport { FactorTypes } from \"../../../api/factor-types/factor-types.js\";\nimport { Factors } from \"../../../api/factors/factors.js\";\nimport { Treatments } from \"../../../api/treatments/treatments\";\nimport AdminTreatments from \"../../components/admin/AdminTreatments\";\n\nexport default withTracker(props => {\n  const { archived } = props;\n  const treatmentsLoading = !Meteor.subscribe(\"admin-treatments\", {\n    archived\n  }).ready();\n  const factorsLoading = !Meteor.subscribe(\"admin-factors\").ready();\n  const typesLoading = !Meteor.subscribe(\"admin-factor-types\").ready();\n\n  return {\n    loading: treatmentsLoading || factorsLoading,\n    typesLoading,\n    treatments: Treatments.find().fetch({\n      archivedAt: { $exists: Boolean(archived) }\n    }),\n    factors: Factors.find(\n      { archivedAt: { $exists: Boolean(archived) } },\n      { sort: { value: 1 } }\n    ).fetch(),\n    factorTypes: FactorTypes.find().fetch(),\n    ...props\n  };\n})(AdminTreatments);\n"]}