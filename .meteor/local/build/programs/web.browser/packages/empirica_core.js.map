{"version":3,"sources":["meteor://ðŸ’»app/packages/empirica:core/client.js","meteor://ðŸ’»app/packages/empirica:core/gameLobby-lock.js","meteor://ðŸ’»app/packages/empirica:core/shared.js","meteor://ðŸ’»app/packages/empirica:core/api/default-schemas.js","meteor://ðŸ’»app/packages/empirica:core/api/schema-helpers.js","meteor://ðŸ’»app/packages/empirica:core/api/batches/batches.js","meteor://ðŸ’»app/packages/empirica:core/api/batches/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/batches/status-schema.js","meteor://ðŸ’»app/packages/empirica:core/api/factor-types/factor-types.js","meteor://ðŸ’»app/packages/empirica:core/api/factor-types/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/factors/factors.js","meteor://ðŸ’»app/packages/empirica:core/api/factors/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/game-lobbies/game-lobbies.js","meteor://ðŸ’»app/packages/empirica:core/api/game-lobbies/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/games/games.js","meteor://ðŸ’»app/packages/empirica:core/api/games/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/lobby-configs/lobby-configs.js","meteor://ðŸ’»app/packages/empirica:core/api/lobby-configs/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/player-inputs/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/player-inputs/player-inputs.js","meteor://ðŸ’»app/packages/empirica:core/api/player-logs/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/player-logs/player-logs.js","meteor://ðŸ’»app/packages/empirica:core/api/player-rounds/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/player-rounds/player-rounds.js","meteor://ðŸ’»app/packages/empirica:core/api/player-stages/augment.js","meteor://ðŸ’»app/packages/empirica:core/api/player-stages/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/player-stages/player-stages.js","meteor://ðŸ’»app/packages/empirica:core/api/players/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/players/players.js","meteor://ðŸ’»app/packages/empirica:core/api/rounds/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/rounds/rounds.js","meteor://ðŸ’»app/packages/empirica:core/api/stages/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/stages/stages.js","meteor://ðŸ’»app/packages/empirica:core/api/treatments/methods.js","meteor://ðŸ’»app/packages/empirica:core/api/treatments/treatments.js","meteor://ðŸ’»app/packages/empirica:core/lib/componentChecker.js","meteor://ðŸ’»app/packages/empirica:core/lib/counters.js","meteor://ðŸ’»app/packages/empirica:core/lib/monitor.js","meteor://ðŸ’»app/packages/empirica:core/lib/utils.js","meteor://ðŸ’»app/packages/empirica:core/startup/both/index.js","meteor://ðŸ’»app/packages/empirica:core/startup/client/accounts.js","meteor://ðŸ’»app/packages/empirica:core/startup/client/idle.js","meteor://ðŸ’»app/packages/empirica:core/startup/client/index.js","meteor://ðŸ’»app/packages/empirica:core/startup/client/style.js","meteor://ðŸ’»app/packages/empirica:core/ui/components/About.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Admin.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Breadcrumb.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Centered.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Consent.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/DelayedDisplay.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/ExitSteps.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Game.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/GameLobby.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Heading.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/HelpTooltip.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Helpers.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/InstructionSteps.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Loading.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/LoadingInline.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Login.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/NewPlayer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/NewPlayerForm.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/NoBatch.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Public.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/StageTimeWrapper.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/Toasters.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/WaitingForServer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminBatch.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminBatchGame.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminBatchGames.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminBatches.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminExport.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminFactor.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminFactors.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminGames.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminHeading.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminLobbyConfig.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminLobbyConfigs.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminNewBatch.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminNewFactor.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminNewFactorType.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminNewLobbyConfig.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminNewTreatment.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminPlayers.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminTreatment.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/components/admin/AdminTreatments.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/AuthorizedContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/GameContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/GameLobbyContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/IdentifiedContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/PublicContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/admin/AdminBatchGameContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/admin/AdminBatchGamesContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/admin/AdminBatchesContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/admin/AdminFactorsContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/admin/AdminLobbyConfigsContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/admin/AdminPlayersContainer.jsx","meteor://ðŸ’»app/packages/empirica:core/ui/containers/admin/AdminTreatmentsContainer.jsx"],"names":["module","export","StageTimeWrapper","Centered","AlertToaster","ConsentButton","React","link","default","v","BrowserRouter","Route","Switch","isReactComponents","About","Admin","Consent","Login","NewPlayer","NoBatch","AuthorizedContainer","IdentifiedContainer","PublicContainer","config","exitSteps","introSteps","Empirica","about","AboutComp","noBatch","NoBatchComp","consent","ConsentComp","newPlayer","NewPlayerComp","round","RoundComp","Round","header","HeaderComp","Header","lobby","LobbyComp","Lobby","breadcrumb","BreadcrumbComp","Breadcrumb","waiting","WaitingComp","Waiting","func","_","isFunction","Error","results","apply","arguments","console","error","routes","appComp","adminComp","loginComp","loginPath","adminPath","exportDefault","gameLobbyLock","sharedNamespace","IdSchema","ArchivedSchema","DebugModeSchema","TimestampSchema","CreatorSchema","UserDataSchema","PolymorphicSchema","HasManyByRef","BelongsTo","SimpleSchema","inflection","_id","type","String","optional","regEx","RegEx","Id","archivedById","autoValue","field","isSet","userId","undefined","archivedAt","Date","label","debugMode","Boolean","defaultValue","createdAt","index","isInsert","isUpsert","$setOnInsert","unset","updatedAt","isUpdate","createdById","isFromTrustedCode","updatedById","data","Object","blackbox","collTypes","objectType","allowedValues","objectId","coll","camel","camelize","singularize","titleize","fieldName","Array","required","singular","Collection2","extendOptions","on","collection","ss","version","messageBox","messages","scopedUnique","addValidator","def","definition","uniqueFieldScope","val","value","key","find","count","en","insertNotAllowed","updateNotAllowed","schemaDenyValidator","denyInsert","denyUpdate","Batches","maxGamesCount","assignmentTypes","statusSchema","Treatments","Counter","BatchesCollection","Mongo","Collection","insert","doc","callback","inc","helpers","gameCount","assignment","simpleConfig","completeGameCount","reduce","completeConfig","treatments","sum","t","duplicate","status","simple","complete","schema","Integer","full","runningAt","finishedAt","custom","min","max","minCount","maxCount","Meteor","isDevelopment","settings","public","debug_gameDebugMode","extend","attachSchema","createBatch","duplicateBatch","updateBatch","updateBatchStatus","ValidatedMethod","GameLobbies","Games","name","validate","omit","validator","run","batch","autoConvert","filter","findOne","archived","$set","$unset","modifier","keys","length","update","pick","batchId","multi","setBatchInDebugMode","FactorTypes","requiredTypes","types","unique","description","Number","notUnique","createFactorType","updateFactorType","Factors","initialValues","oneOf","factorType","factorTypeId","forEach","typeConversion","factorTypeName","fullLabel","valueValidation","simpleSchmemaType","fieldSchema","newContext","isValid","validationErrors","errors","addValidationErrors","isClient","slice","createFactor","updateFactor","handleFactorValueErrorMessage","factor","map","e","join","Players","players","$in","playerIds","fetch","treatment","treatmentId","availableCount","timeoutStartedAt","timedOutAt","endReason","queuedPlayerIds","updateGameLobbyData","earlyExitGameLobby","shared","gameLobbyId","append","noCallback","gameLobby","JSON","parse","$push","trimStrings","removeEmptyStrings","isServer","callOnChange","conn","connection","prevValue","exitReason","exitStatus","exitAt","availableLobby","$and","gameLobbyIds","Stages","Rounds","GamesCollection","estFinishedTime","currentStageId","updateGameData","earlyExitGame","gameId","game","log","playerId","LobbyConfigs","displayName","timeoutType","base","timeoutInSeconds","details","timeoutStrategy","timeoutBots","extendCount","timeoutTypes","timeoutStrategies","maxTimeoutInSeconds","defaultTimeoutInSeconds","createLobbyConfig","updateLobbyConfig","lobbyConfig","addPlayerInput","PlayerInputs","rawData","player","playerLog","PlayerLogs","stageId","roundId","jsonData","updatePlayerRoundData","PlayerRounds","playerRoundId","playerRound","augmentGameLobby","augmentPlayerLobby","augmentPlayer","augmentPlayerStageRound","stubPlayerStageRound","augmentGameStageRound","stubStageRound","updatePlayerData","earlyExitPlayer","earlyExitPlayerLobby","updateRoundData","updateStageData","submitPlayerStage","updatePlayerStageData","PlayerStages","gameSet","call","stringify","gameLobbySet","playerSet","stageSet","playerStageId","stageSubmit","cb","roundSet","set","obj","k","push","nullFunc","get","stage","exit","reason","playerStage","submit","err","submitted","submittedAt","end","callOnSubmit","createPlayer","playerReady","markPlayerExitStepDone","extendPlayerTimeoutWait","endPlayerTimeoutWait","retireSinglePlayer","retireGameFullPlayers","playerWasRetired","updatePlayerStatus","exitStatuses","sleep","weightedRandom","id","urlParams","sort","existing","lobbies","$exists","lobbyPool","l","weigthedLobbyPool","weight","$addToSet","skipInstructions","readyAt","assignToLobby","includes","lobbyUpdated","lobbyConfigId","timeoutWaitCount","stepName","exitStepsDone","$inc","$pull","currentPlayer","onlinePlayers","retiredAt","timestamp","toISOString","retiredReason","i","idle","lastActivityAt","playerIdConn","playerIdForConn","PlayersCollection","online","lastLogin","bot","moment","stagePaddingDuration","duration","startTimeAt","durationInSeconds","createTreatment","updateTreatment","factorIds","requiredFactorTypes","createdFactors","createdFactorTypes","f","factors","c","query","factorsObject","addDocValidator","$size","$all","module1","isClassComponent","component","prototype","isReactComponent","isFunctionComponent","isElement","element","isValidElement","isDOMTypeElement","isCompositeTypeElement","exports","incset","raw","rawCollection","findAndModify","wrapAsync","op","amount","res","new","upsert","ActivityMonitor","Tracker","TimeSync","idleThreshold","checkInterval","monitorInterval","lastActivityTime","serverTime","idleDep","Dependency","activityDep","focused","document","hasFocus","monitor","hasActivity","now","nonreactive","changed","newIdleness","trueMonitor","bind","signalActivity","throttle","signalInactivity","startup","window","addEventListener","setInterval","start","isIdle","depend","isActive","isNaN","getFunctionParameters","ms","Promise","resolve","setTimeout","values","samples","hasOwnProperty","j","Math","floor","random","components","isArray","STRIP_COMMENTS","ARGUMENT_NAMES","fnStr","toString","replace","split","argsList","indexOf","result","match","stripped","resetToken","originalSetItem","_localStorage","setItem","defer","originalRemoveItem","removeItem","loginToken","getItem","loginTokenExpires","setToken","expires","cookie","toUTCString","getPlayerId","autorun","newPlayerId","FocusStyleManager","loggingEnabled","onlyShowFocusOnTabs","Component","render","Alert","Button","Classes","Divider","Intent","Menu","MenuItem","Navbar","NavbarDivider","NavbarGroup","NavbarHeading","Popover","IconNames","PropTypes","Helmet","NavLink","AdminBatchesContainer","AdminFactorsContainer","AdminLobbyConfigsContainer","AdminPlayersContainer","AdminTreatmentsContainer","AdminExport","AdminGames","withStaticProps","SuccessToaster","configurationPaths","NavBarLink","path","exact","ACTIVE","BUTTON","MINIMAL","constructor","props","handleConfigImport","uploadRef","current","click","onImportConfigFileSelected","event","file","currentTarget","files","show","message","setState","importing","r","FileReader","onload","text","target","size","readAsText","handleConfigExport","exporting","yaml","ts","format","filename","a","createElement","setAttribute","encodeURIComponent","style","display","body","appendChild","removeChild","setMode","mode","router","context","history","setBodyDark","classList","add","DARK","remove","handleOpenApp","open","handleLogout","logout","handleResetGames","isOpenResetGames","resetDatabaseIsActived","handleResetApp","isOpenResetApp","location","pathname","state","createRef","componentDidMount","redirectLoggedOut","componentWillReceiveProps","nextProps","debug_resetDatabase","user","loggingIn","isConfigMode","TEXT_MUTED","IMPORT","EXPORT","PLAY","COG","WARNING","ERASER","DANGER","TRASH","LOG_OUT","retired","propTypes","object","bool","loading","contextTypes","Crumb","BREADCRUMBS","stages","s","disabled","BREADCRUMB_CURRENT","children","ConsentButtonContext","onConsent","consentCallback","TICK","SUCCESS","DelayedDisplay","delay","visible","timeout","componentWillUnmount","clearTimeout","_extends","ExitSteps","NonIdealState","errExitStepMissingName","errExitStepDups","dups","onSubmit","steps","Step","unfilteredSteps","stepNames","trim","sname","isEmpty","alert","failed","uniq","counts","n","compact","done","renderDefault","hasNext","_objectSpread","_objectWithoutProperties","Game","GameLobby","GameLobbyContainer","DefaultBreadcrumb","InstructionSteps","Loading","WaitingForServer","DelayedWaitingForServer","DelayedGameLobby","playerReadyClicked","shouldComponentUpdate","nextState","isEqual","rest","started","timedOut","nativeEvent","encoded","gameLobbyProps","content","BC","CoreWrapper","handleWaitLonger","handleExitNow","total","exisiting","showExtensionAlert","TIME","PRIMARY","Heading","H1","H2","H3","H4","H5","H6","Icon","level","icon","iconSize","className","classNames","HEADING","Tooltip","Position","HelpTooltip","TOP","DevNote","block","WrappedComponent","onNext","onDone","currentIntroStep","onPrev","resetIntroSteps","setIntroStepIndex","componentWillMount","noInstruction","hasPrev","conds","introPlayer","LoadingInline","ControlGroup","InputGroup","username","password","onChange","handleForm","preventDefault","loginWithPassword","redirecting","redirectLoggedIn","querySelector","focus","PERSON","LOCK","setPlayerId","NewPlayerForm","playerIdParam","createContext","consented","handleConsent","playerFromIdParam","handleNewPlayer","searchParams","URL","pair","entries","componentDidUpdate","prevProps","prevState","idField","attemptingAutoLogin","CustomNewPlayer","Form","FormGroup","handleUpdate","handleSubmit","INPUT","KEY_ENTER","Link","ISSUE","Public","Dialog","GameContainer","removePlayerId","NoBatchOriginal","showOpenAdmin","showOpenAltPlayer","debug_resetSession","showReset","debug_newPlayer","loadDocTitle","title","isAboutOpen","handleToggleAbout","handleOpenAdmin","handleReset","handleOpenAltPlayer","playerIdParamExclusive","playerIdParamRequired","randPlayerIdKey","substring","randId","renderPublic","playerIdKey","adminProps","onOpenAltPlayer","onReset","showAbout","onToggleAbout","LARGE","EXCHANGE","BUTTON_TEXT","REPEAT","info_sign","INBOX","DIALOG_BODY","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","withTracker","isSameOrAfter","endTimeAt","ended","roundOver","remainingSeconds","diff","elapsedSeconds","Toaster","toaster","create","position","iconName","intent","AUTOMATIC_UPDATES","AdminBatch","ButtonGroup","Tag","AdminBatchGamesContainer","newIsOpen","detailsVisible","toggleDetails","handleArchive","handleStatusChange","ctrlKey","metaKey","handleDuplicate","textAlign","actions","STOP","BOX","SMALL","DUPLICATE","tt","statusIntent","statusMinimal","detailsVisibleClass","detailsClass","fromNow","AdminBatchGame","rounds","currentRound","currentStage","notReadyPlayers","bots","p","playerCountFactor","playerCount","botsFactor","botsCount","Random","statusMsg","showCancelButton","color","AdminBatchGames","HTMLTable","AdminBatchGameContainer","games","gameLobbies","g","AdminBatches","Callout","AdminPageHeader","AdminNewBatch","batches","lobbyConfigs","LAYERS","HTMLSelect","Checkbox","includePii","handleChange","checked","handleExport","toLowerCase","AdminFactor","EditableText","handleNameChange","handleNameConfirm","initialName","componentWillUpdate","AdminFactors","Card","Elevation","AdminNewFactor","AdminNewFactorType","factorTypes","PROPERTY","hasNewForm","requiredType","TWO","PLUS","MONOSPACE_TEXT","TEXT_DISABLED","newFactorIsOpen","FLOWS","BUILD","SIZE_LARGE","AdminLobbyConfig","prevName","nameRaw","archiveIntent","AdminLobbyConfigs","AdminNewLobbyConfig","newLobbyIsOpen","NumericInput","simpleTreatments","completeTreatments","simpleGamesCount","gamesCount","handleAssignmentChange","gamesCountCalc","handleGamesCountChange","handleAddTreatment","validLobbyConfigs","params","handleTreatmentCountChange","handleLobbyConfigChange","handleRemoveTreatment","dataset","reject","handleNewBatch","onClose","inject","validTreatments","renderRequired","issues","issue","renderContent","isComplete","currentTreatments","width","tr","isOpen","handleIntUpdate","handleNewFactor","clean","parseFloat","valueInputRef","prevProp","node","input","properties","isUndefined","source","TagInput","TextArea","handleNumberUpdate","valueAsString","handleChangeCheckbox","handleNewFactorType","stopsubmit","firstInputRef","extraInputs","stringType","handleIntChange","handleNewLobbyConfig","AdminNewTreatment","RadioGroup","Radio","selected","nameField","handleFactorChange","factorId","handleNewTreatment","missing","msg","out","er","PROPERTIES","requiredClass","WARNING_SIGN","INFO_SIGN","cond","AdminPlayers","searchParam","handleRetirePlayers","playersAffected","handleRetireSinglePlayer","handleColumnHeaderChange","filterPlayers","retireAt","AdminTreatment","AdminTreatments","newTreatmentIsOpen","Comp","connected","loadingObj","withTimer","withGameInfo","playerStagesCount","playerRoundsCount","applyAugment","queuedCount","readyCount","startObj","defaultPlayerIdKey","URLSearchParams","search","playerIdKeyOverride","playerIdDep","localStorage","IdentifiedContainerInner","wasRetired","HasPlayers","hasPlayers","subscribe","ready","hasPlayersObj","info","withStageDependencies","sub","withGameDependencies","subGameLobby","subTreatment","subBatches","subLobby","subGame","batchAvailable","$or","playerIdParamPresent","playerIdParamOk","gameLoading","batchLoading","batchesLoading","treatmentsLoading","factorsLoading","factorTypesLoading","lobbyConfigsLoading","sortedBatches","runningBatches","initBatches","b","typesLoading"],"mappings":"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","file":"/packages/empirica_core.js","sourcesContent":["import React from \"react\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport { isReactComponents } from \"./lib/utils\";\nimport \"./startup/client/index.js\";\nimport About from \"./ui/components/About.jsx\";\nimport Admin from \"./ui/components/Admin.jsx\";\nimport Centered from \"./ui/components/Centered.jsx\";\nimport Consent, { ConsentButton } from \"./ui/components/Consent.jsx\";\nimport Login from \"./ui/components/Login.jsx\";\nimport NewPlayer from \"./ui/components/NewPlayer.jsx\";\nimport NoBatch from \"./ui/components/NoBatch\";\nimport StageTimeWrapper from \"./ui/components/StageTimeWrapper.jsx\";\nimport { AlertToaster } from \"./ui/components/Toasters.jsx\";\nimport AuthorizedContainer from \"./ui/containers/AuthorizedContainer.jsx\";\nimport IdentifiedContainer from \"./ui/containers/IdentifiedContainer.jsx\";\nimport PublicContainer from \"./ui/containers/PublicContainer.jsx\";\n\nconst config = {\n  exitSteps: () => [],\n  introSteps: () => []\n};\n\nconst Empirica = {\n  about(AboutComp) {\n    config.About = AboutComp || About;\n  },\n\n  noBatch(NoBatchComp) {\n    config.NoBatch = NoBatchComp || NoBatch;\n  },\n\n  consent(ConsentComp) {\n    config.Consent = ConsentComp || Consent;\n  },\n\n  newPlayer(NewPlayerComp) {\n    config.NewPlayer = NewPlayerComp || NewPlayer;\n  },\n\n  round(RoundComp) {\n    config.Round = RoundComp;\n  },\n\n  header(HeaderComp) {\n    config.Header = HeaderComp;\n  },\n\n  // gameLobby, treatment, player\n  lobby(LobbyComp) {\n    config.Lobby = LobbyComp;\n  },\n\n  breadcrumb(BreadcrumbComp) {\n    config.Breadcrumb = BreadcrumbComp;\n  },\n\n  waiting(WaitingComp) {\n    config.Waiting = WaitingComp;\n  },\n\n  introSteps(func) {\n    if (!_.isFunction(func)) {\n      throw new Error(\"Empirica.introSteps() requires a function\");\n    }\n\n    config.introSteps = function() {\n      const results = func.apply(null, arguments);\n      if (!results || isReactComponents(results)) {\n        return results || [];\n      } else {\n        console.error(\n          \"Empirica.introSteps() is not returning an array of components as expected.\"\n        );\n        return [];\n      }\n    };\n  },\n\n  exitSteps(func) {\n    if (!_.isFunction(func)) {\n      throw new Error(\"Empirica.exitSteps() requires a function\");\n    }\n\n    config.exitSteps = function() {\n      const results = func.apply(null, arguments);\n      if (!results || isReactComponents(results)) {\n        return results || [];\n      } else {\n        console.error(\n          \"Empirica.exitSteps() is not returning an array of components as expected.\"\n        );\n        return [];\n      }\n    };\n  },\n\n  routes() {\n    return (\n      <BrowserRouter>\n        <div className=\"app\">\n          <Switch>\n            <Route path=\"/\" exact component={this.appComp()} />\n            <Route path=\"/admin\" component={this.adminComp()} />\n            <Route path=\"/login\" component={this.loginComp()} />\n          </Switch>\n        </div>\n      </BrowserRouter>\n    );\n  },\n\n  appComp() {\n    return IdentifiedContainer(PublicContainer, config);\n  },\n  adminComp({ loginPath = \"/login\" } = {}) {\n    return AuthorizedContainer(Admin, { loginPath });\n  },\n  loginComp({ adminPath = \"/admin\" } = {}) {\n    return AuthorizedContainer(Login, { adminPath });\n  }\n};\n\nexport default Empirica;\nexport { StageTimeWrapper, Centered, AlertToaster, ConsentButton };\n","const gameLobbyLock = {};\n\nexport default gameLobbyLock;\n","// sharedNamespace is used for being able to loading files on client or server\n// exclusively, from files which are themselves shared.\n\nconst sharedNamespace = {};\n\nexport default sharedNamespace;\n","import SimpleSchema from \"simpl-schema\";\nimport inflection from \"inflection\";\n\nexport const IdSchema = new SimpleSchema({\n  _id: {\n    type: String,\n    optional: true,\n    regEx: SimpleSchema.RegEx.Id\n  }\n});\n\nexport const ArchivedSchema = new SimpleSchema({\n  archivedById: {\n    type: String,\n    optional: true,\n    regEx: SimpleSchema.RegEx.Id,\n    autoValue() {\n      if (this.field(\"archivedAt\").isSet) {\n        return this.userId;\n      }\n      return undefined;\n    }\n  },\n  archivedAt: {\n    type: Date,\n    label: \"Archived at\",\n    optional: true\n  }\n});\n\nexport const DebugModeSchema = new SimpleSchema({\n  debugMode: {\n    type: Boolean,\n    defaultValue: false\n  }\n});\n\nexport const TimestampSchema = new SimpleSchema({\n  createdAt: {\n    type: Date,\n    label: \"Created at\",\n    // denyUpdate: true,\n    index: true,\n    autoValue() {\n      if (this.isInsert) {\n        return new Date();\n      } else if (this.isUpsert) {\n        return { $setOnInsert: new Date() };\n      } else {\n        this.unset(); // Prevent user from supplying their own value\n      }\n    }\n  },\n  updatedAt: {\n    type: Date,\n    label: \"Last updated at\",\n    optional: true,\n    // denyInsert: true,\n    index: true,\n    autoValue() {\n      if (this.isUpdate) {\n        return new Date();\n      }\n    }\n  }\n});\n\n// Userful for admin operations, tracking who created what.\nexport const CreatorSchema = new SimpleSchema({\n  createdById: {\n    type: String,\n    label: \"Created by\",\n    // denyUpdate: true,\n    regEx: SimpleSchema.RegEx.Id,\n    autoValue() {\n      if (this.isInsert) {\n        return this.isSet && this.isFromTrustedCode ? undefined : this.userId;\n      }\n      return undefined;\n    },\n    index: true\n  },\n  updatedById: {\n    type: String,\n    label: \"Last updated by\",\n    optional: true,\n    regEx: SimpleSchema.RegEx.Id,\n    autoValue() {\n      if (this.isUpdate) {\n        return this.userId;\n      }\n    },\n    index: true\n  }\n});\n\nexport const UserDataSchema = new SimpleSchema({\n  data: {\n    type: Object,\n    blackbox: true,\n    defaultValue: {}\n  }\n});\n\n// The PolymorphicSchema allows to have records be attached to different\n// types of collection. (belongs_to :coll, polymorphic: true)\n// objectType and objectId point to the owning object of the record\n// objectTypes are the names of the collection that the record can be\n// associated with. ex. [\"BriefSection\", \"Brief\", \"Board\"]\nexport const PolymorphicSchema = function(collTypes) {\n  return new SimpleSchema({\n    objectType: {\n      type: String,\n      allowedValues: collTypes,\n      // denyUpdate: true,\n      index: true\n    },\n    objectId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      // denyUpdate: true,\n      index: true\n    }\n  });\n};\n\nexport const HasManyByRef = function(coll) {\n  const camel = inflection.camelize(inflection.singularize(coll), true);\n  const label = inflection.titleize(coll);\n  const fieldName = `${camel}Ids`;\n  return new SimpleSchema({\n    [fieldName]: {\n      type: Array,\n      defaultValue: [],\n      label,\n      index: true\n    },\n    [`${fieldName}.$`]: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      label: `${label} Item`\n    }\n  });\n};\n\nexport const BelongsTo = function(coll, required = true) {\n  const singular = inflection.singularize(coll);\n  const camel = inflection.camelize(singular, true);\n  const label = inflection.titleize(singular);\n  const fieldName = `${camel}Id`;\n  return new SimpleSchema({\n    [fieldName]: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      label,\n      // denyUpdate,\n      index: true,\n      optional: !required\n    }\n  });\n};\n","import Collection2 from \"meteor/aldeed:collection2\";\nimport SimpleSchema from \"simpl-schema\";\n\n// Must be unique scoped by other field (for given value of passed field,\n// The current field should be unique). For ex:\n//   Name: {\n//     Type: String,\n//     ScopedUnique: \"orgId\"\n//   }\n// Name must be unique for document with equal orgId.\n// Documents with different orgId can have same name.\nSimpleSchema.extendOptions([\"scopedUnique\"]);\n\nCollection2.on(\"schema.attached\", (collection, ss) => {\n  if (ss.version >= 2) {\n    ss.messageBox.messages({\n      scopedUnique: \"Already exists\"\n    });\n  }\n\n  ss.addValidator(function() {\n    if (!this.isSet) {\n      return;\n    }\n\n    const def = this.definition;\n    const uniqueFieldScope = def.scopedUnique;\n\n    if (!uniqueFieldScope) {\n      return;\n    }\n\n    const val = this.field(uniqueFieldScope).value;\n    const key = this.key;\n    if (\n      collection\n        .find({\n          [uniqueFieldScope]: val,\n          [key]: this.value\n        })\n        .count() > 0\n    ) {\n      return \"uniqueScoped\";\n    }\n  });\n});\n\n// Extend the schema options allowed by SimpleSchema\nSimpleSchema.extendOptions([\"denyInsert\", \"denyUpdate\"]);\n\nCollection2.on(\"schema.attached\", (collection, ss) => {\n  if (\n    ss.version >= 2 &&\n    ss.messageBox &&\n    typeof ss.messageBox.messages === \"function\"\n  ) {\n    ss.messageBox.messages({\n      en: {\n        insertNotAllowed: \"{{label}} cannot be set during an insert\",\n        updateNotAllowed: \"{{label}} cannot be set during an update\"\n      }\n    });\n  }\n\n  ss.addValidator(function schemaDenyValidator() {\n    if (!this.isSet) return;\n\n    const def = this.definition;\n\n    if (def.denyInsert && this.isInsert) return \"insertNotAllowed\";\n    if (def.denyUpdate && (this.isUpdate || this.isUpsert))\n      return \"updateNotAllowed\";\n  });\n});\n\n// Extend the schema options allowed by SimpleSchema\nSimpleSchema.extendOptions([\n  \"index\", // one of Number, String, Boolean\n  \"unique\", // Boolean\n  \"sparse\" // Boolean\n]);\n","import SimpleSchema from \"simpl-schema\";\n\nimport { statusSchema } from \"./status-schema\";\nimport {\n  ArchivedSchema,\n  TimestampSchema,\n  HasManyByRef,\n  DebugModeSchema\n} from \"../default-schemas\";\nimport { Treatments } from \"../treatments/treatments\";\nimport { Counter } from \"../../lib/counters\";\n\nclass BatchesCollection extends Mongo.Collection {\n  insert(doc, callback) {\n    doc.index = Counter.inc(\"batches\");\n    return super.insert(doc, callback);\n  }\n}\n\nexport const Batches = new BatchesCollection(\"batches\");\n\nBatches.helpers({\n  gameCount() {\n    return this.assignment === \"simple\"\n      ? this.simpleConfig.count\n      : this.completeGameCount();\n  },\n\n  completeGameCount() {\n    return _.reduce(\n      this.completeConfig.treatments,\n      (sum, t) => sum + t.count,\n      0\n    );\n  },\n\n  duplicate() {\n    const { assignment, simpleConfig, completeConfig } = this;\n    Batches.insert({\n      assignment,\n      simpleConfig,\n      completeConfig,\n      status: \"init\"\n    });\n  }\n});\n\nexport const maxGamesCount = 10000000;\n\nexport const assignmentTypes = {\n  simple: \"Simple\",\n  complete: \"Complete\"\n};\n\nBatches.schema = new SimpleSchema({\n  // Auto-incremented number assigned to batches as they are created\n  index: {\n    type: SimpleSchema.Integer\n  },\n\n  assignment: {\n    type: String,\n    // \"custom\" not yet supported\n    allowedValues: [\"simple\", \"complete\", \"custom\"]\n  },\n\n  full: {\n    label: \"Batch is full, all games are running\",\n    type: Boolean,\n    defaultValue: false\n  },\n\n  runningAt: {\n    label: \"Time when batch started running\",\n    type: Date,\n    optional: true\n  },\n\n  finishedAt: {\n    label: \"Time when batch finished running\",\n    type: Date,\n    optional: true\n  },\n\n  // Simple configuration at init\n  simpleConfig: {\n    type: Object,\n    optional: true,\n    custom() {\n      if (!this.value && this.field(\"assignment\").value === \"simple\") {\n        return \"required\";\n      }\n    }\n  },\n  \"simpleConfig.count\": {\n    type: SimpleSchema.Integer,\n    min: 1,\n    max: maxGamesCount\n  },\n  \"simpleConfig.treatments\": {\n    type: Array,\n    minCount: 1,\n    maxCount() {\n      return Treatments.find().count();\n    }\n  },\n  \"simpleConfig.treatments.$\": {\n    type: Object\n  },\n  \"simpleConfig.treatments.$._id\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id\n  },\n  \"simpleConfig.treatments.$.lobbyConfigId\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id\n  },\n\n  // Complete configuration at init\n  completeConfig: {\n    type: Object,\n    optional: true,\n    custom() {\n      if (!this.value && this.field(\"assignment\").value === \"complete\") {\n        return \"required\";\n      }\n    }\n  },\n  \"completeConfig.treatments\": {\n    type: Array,\n    minCount: 1,\n    maxCount() {\n      return Treatments.find().count();\n    }\n  },\n  \"completeConfig.treatments.$\": {\n    type: Object\n  },\n  \"completeConfig.treatments.$._id\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id\n  },\n  \"completeConfig.treatments.$.count\": {\n    type: SimpleSchema.Integer,\n    minCount: 1,\n    maxCount: maxGamesCount\n  },\n  \"completeConfig.treatments.$.lobbyConfigId\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id\n  }\n});\n\nif (Meteor.isDevelopment || Meteor.settings.public.debug_gameDebugMode) {\n  Batches.schema.extend(DebugModeSchema);\n}\n\nBatches.schema.extend(statusSchema);\nBatches.schema.extend(TimestampSchema);\nBatches.schema.extend(ArchivedSchema);\nBatches.schema.extend(HasManyByRef(\"Games\"));\nBatches.schema.extend(HasManyByRef(\"GameLobbies\"));\nBatches.attachSchema(Batches.schema);\n","import SimpleSchema from \"simpl-schema\";\nimport { ValidatedMethod } from \"meteor/mdg:validated-method\";\n\nimport { Batches } from \"./batches\";\nimport { GameLobbies } from \"../game-lobbies/game-lobbies.js\";\nimport { Games } from \"../games/games.js\";\nimport { IdSchema } from \"../default-schemas\";\n\nexport const createBatch = new ValidatedMethod({\n  name: \"Batches.methods.create\",\n\n  validate: Batches.schema\n    .omit(\n      \"gameIds\",\n      \"gameLobbyIds\",\n      \"status\",\n      \"createdAt\",\n      \"updatedAt\",\n      \"debugMode\",\n      \"full\",\n      \"index\"\n    )\n    .validator(),\n\n  run(batch) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    Batches.insert(batch, {\n      autoConvert: false,\n      filter: false,\n      validate: false\n    });\n  }\n});\n\nexport const duplicateBatch = new ValidatedMethod({\n  name: \"Batches.methods.duplicate\",\n\n  validate: IdSchema.validator(),\n\n  run({ _id }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const batch = Batches.findOne(_id);\n    batch.duplicate();\n  }\n});\n\nexport const updateBatch = new ValidatedMethod({\n  name: \"Batches.methods.updateBatch\",\n\n  validate: new SimpleSchema({\n    archived: {\n      type: Boolean,\n      optional: true\n    }\n  })\n    .extend(IdSchema)\n    .validator(),\n\n  run({ _id, archived }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const batch = Batches.findOne(_id);\n    if (!batch) {\n      throw new Error(\"not found\");\n    }\n\n    const $set = {},\n      $unset = {};\n\n    if (archived !== undefined) {\n      if (archived) {\n        if (batch.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $set.archivedAt = new Date();\n        $set.archivedById = this.userId;\n      }\n      if (!archived) {\n        if (!batch.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $unset.archivedAt = true;\n        $unset.archivedById = true;\n      }\n    }\n\n    const modifier = {};\n    if (Object.keys($set).length > 0) {\n      modifier.$set = $set;\n    }\n    if (Object.keys($unset).length > 0) {\n      modifier.$unset = $unset;\n    }\n    if (Object.keys(modifier).length === 0) {\n      return;\n    }\n\n    Batches.update(_id, modifier);\n  }\n});\n\nexport const updateBatchStatus = new ValidatedMethod({\n  name: \"Batches.methods.updateStatus\",\n\n  validate: Batches.schema\n    .pick(\"status\")\n    .extend(IdSchema)\n    .validator(),\n\n  run({ _id, status }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const batch = Batches.findOne(_id);\n    if (!batch) {\n      throw new Error(\"not found\");\n    }\n\n    if (status === \"init\") {\n      throw new Error(\"invalid\");\n    }\n\n    const $set = { status };\n\n    if (status === \"running\") {\n      $set.runningAt = new Date();\n      GameLobbies.update(\n        { batchId: _id },\n        { $set: { status: \"running\" } },\n        { multi: true }\n      );\n    }\n\n    Batches.update(_id, { $set });\n  }\n});\n\nif (Meteor.isDevelopment || Meteor.settings.public.debug_gameDebugMode) {\n  export const setBatchInDebugMode = new ValidatedMethod({\n    name: \"Batches.methods.debugMode\",\n\n    validate: IdSchema.validator(),\n\n    run({ _id }) {\n      if (!this.userId) {\n        throw new Error(\"unauthorized\");\n      }\n\n      const batch = Batches.findOne(_id);\n      if (!batch) {\n        throw new Error(\"not found\");\n      }\n\n      Batches.update(_id, { $set: { debugMode: true } });\n      GameLobbies.update({ batchId: _id }, { $set: { debugMode: true } });\n      Games.update({ batchId: _id }, { $set: { debugMode: true } });\n    }\n  });\n}\n","import SimpleSchema from \"simpl-schema\";\n\nexport const statusSchema = new SimpleSchema({\n  status: {\n    type: String,\n    allowedValues: [\n      \"init\", // Batch created, not running yet\n      \"running\", // Batch is running\n\n      // NOTE(np): paused: for now, we don't support paused because we need to do something about timers\n      // \"paused\", // Batch has been pause, ongoing games keep on going but no more new players are accepted. Can be restarted.\n\n      \"finished\", // Batch has finished and cannot be restarted\n\n      // NOTE(np): cancelled might break a game if it's running at the moment, gotta be careful\n      \"cancelled\", // Batch was cancelled and cannot be restarted\n      \"failed\",\n      \"custom\" // used for game.end(\"custom reason\")\n    ],\n    defaultValue: \"init\",\n    index: 1\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\nimport { ArchivedSchema, TimestampSchema } from \"../default-schemas.js\";\n\nexport const FactorTypes = new Mongo.Collection(\"factor_types\");\n\nFactorTypes.helpers({});\n\n// requiredFactors hold a list of factors keys that are required by\n// Empirica core to be able to run a game.\n// Required factors are:\n// -`playerCount` determines how many players participate in a game and is\n//   therefore critical to run a game.\nFactorTypes.requiredTypes = [\"playerCount\"];\n\nFactorTypes.types = [\"String\", \"Integer\", \"Number\", \"Boolean\"];\n\nFactorTypes.schema = new SimpleSchema({\n  required: {\n    type: Boolean\n  },\n\n  name: {\n    type: String,\n    max: 256,\n    regEx: /^[a-z]+[a-zA-Z0-9]*$/,\n    index: true,\n    unique: true,\n    custom() {\n      if (this.isSet && FactorTypes.find({ name: this.value }).count() > 0) {\n        return \"notUnique\";\n      }\n    }\n  },\n\n  description: {\n    type: String,\n    min: 1,\n    max: 2048\n  },\n\n  type: {\n    type: String,\n    allowedValues: FactorTypes.types\n  },\n\n  min: {\n    type: Number,\n    optional: true\n  },\n\n  max: {\n    type: Number,\n    optional: true\n  }\n});\n\nFactorTypes.schema.messageBox.messages({\n  en: {\n    notUnique: \"{{label}} already exists.\"\n  }\n});\n\nFactorTypes.schema.extend(ArchivedSchema);\nFactorTypes.schema.extend(TimestampSchema);\nFactorTypes.attachSchema(FactorTypes.schema);\n","import SimpleSchema from \"simpl-schema\";\nimport { ValidatedMethod } from \"meteor/mdg:validated-method\";\n\nimport { Factors } from \"../factors/factors.js\";\nimport { FactorTypes } from \"./factor-types.js\";\nimport { IdSchema } from \"../default-schemas.js\";\n\nexport const createFactorType = new ValidatedMethod({\n  name: \"FactorTypes.methods.create\",\n\n  validate: FactorTypes.schema\n    .omit(\"createdAt\", \"updatedAt\")\n    .extend(\n      new SimpleSchema({\n        initialValues: {\n          type: Array,\n          optional: true\n        },\n\n        \"initialValues.$\": {\n          type: SimpleSchema.oneOf(\n            {\n              type: String,\n              scopedUnique: \"type\"\n            },\n            {\n              type: SimpleSchema.Integer,\n              scopedUnique: \"type\"\n            },\n            {\n              type: Number,\n              scopedUnique: \"type\"\n            },\n            {\n              type: Boolean,\n              scopedUnique: \"type\"\n            }\n          )\n        }\n      })\n    )\n    .validator(),\n\n  run(factorType) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const { initialValues } = factorType;\n    const factorTypeId = FactorTypes.insert(\n      _.omit(factorType, \"initialValues\"),\n      { autoConvert: false }\n    );\n\n    initialValues.forEach(value => Factors.insert({ factorTypeId, value }));\n  }\n});\n\nexport const updateFactorType = new ValidatedMethod({\n  name: \"FactorTypes.methods.update\",\n\n  validate: new SimpleSchema({\n    archived: {\n      type: Boolean,\n      optional: true\n    }\n  })\n    .extend(IdSchema)\n    .validator(),\n\n  run({ _id, archived }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n    const factorType = FactorTypes.findOne(_id);\n    if (!factorType) {\n      throw new Error(\"not found\");\n    }\n\n    const $set = {},\n      $unset = {};\n\n    if (archived !== undefined) {\n      if (archived) {\n        if (factorType.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $set.archivedAt = new Date();\n        $set.archivedById = this.userId;\n      }\n      if (!archived) {\n        if (!factorType.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $unset.archivedAt = true;\n        $unset.archivedById = true;\n      }\n    }\n\n    const modifier = {};\n    if (Object.keys($set).length > 0) {\n      modifier.$set = $set;\n    }\n    if (Object.keys($unset).length > 0) {\n      modifier.$unset = $unset;\n    }\n    if (Object.keys(modifier).length === 0) {\n      return;\n    }\n\n    FactorTypes.update(_id, modifier);\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\nimport {\n  ArchivedSchema,\n  BelongsTo,\n  TimestampSchema\n} from \"../default-schemas.js\";\nimport { FactorTypes } from \"../factor-types/factor-types.js\";\n\nexport const Factors = new Mongo.Collection(\"factors\");\n\nFactors.helpers({\n  label() {\n    let label = this.name;\n    const value = String(this.value);\n    if (label !== value) {\n      label += ` (${value})`;\n    }\n    return label;\n  },\n\n  factorType() {\n    return FactorTypes.findOne(this.factorTypeId);\n  },\n\n  factorTypeName() {\n    const t = this.factorType();\n    return t && t.name;\n  },\n\n  fullLabel() {\n    return `${this.factorTypeName()}: ${this.label()}`;\n  }\n});\n\nexport const typeConversion = {\n  Integer: SimpleSchema.Integer,\n  String: String,\n  Number: Number,\n  Boolean: Boolean\n};\n\nFactors.valueValidation = function(factorType, value, simpleSchmemaType) {\n  const type = typeConversion[factorType.type];\n\n  if (simpleSchmemaType && simpleSchmemaType !== type) {\n    return;\n  }\n\n  const fieldSchema = { type };\n  if (factorType.min) {\n    fieldSchema.min = factorType.min;\n  }\n  if (factorType.max) {\n    fieldSchema.max = factorType.max;\n  }\n  const schema = { value: fieldSchema };\n  const val = new SimpleSchema(schema).newContext();\n\n  val.validate({ value });\n\n  if (!val.isValid()) {\n    return val.validationErrors();\n  }\n\n  if (Factors.find({ factorTypeId: factorType._id, value }).count() > 0) {\n    return [{ name: \"value\", type: \"scopedUnique\" }];\n  }\n};\n\nconst valueValidation = function() {\n  if (this.key !== \"value\") {\n    return;\n  }\n  const factorTypeId = this.field(\"factorTypeId\").value;\n  const factorType = FactorTypes.findOne(factorTypeId);\n  const value = this.value;\n  const errors = Factors.valueValidation(factorType, value);\n\n  if (errors) {\n    this.addValidationErrors(errors);\n    return false;\n  }\n};\n\nFactors.schema = new SimpleSchema({\n  name: {\n    type: String,\n    autoValue() {\n      if (!this.isSet && (this.isInsert || Meteor.isClient)) {\n        return String(this.field(\"value\").value).slice(0, 32);\n      }\n    },\n    max: 256,\n    regEx: /^[a-zA-Z0-9_\\.]+$/\n  },\n\n  value: {\n    type: SimpleSchema.oneOf(\n      {\n        type: String\n      },\n      {\n        type: SimpleSchema.Integer\n      },\n      {\n        type: Number\n      },\n      {\n        type: Boolean\n      }\n    )\n  }\n});\n\nFactors.schema.addValidator(valueValidation);\nFactors.schema.extend(ArchivedSchema);\nFactors.schema.extend(BelongsTo(\"FactorTypes\"));\nFactors.schema.extend(TimestampSchema);\nFactors.attachSchema(Factors.schema);\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { Factors } from \"./factors.js\";\nimport { FactorTypes } from \"../factor-types/factor-types.js\";\nimport { IdSchema } from \"../default-schemas.js\";\nimport { handleFactorValueErrorMessage } from \"../../lib/utils.js\";\n\nexport const createFactor = new ValidatedMethod({\n  name: \"Factors.methods.create\",\n\n  validate: Factors.schema.omit(\"createdAt\", \"updatedAt\").validator(),\n\n  run(factor) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const factorType = FactorTypes.findOne(factor.factorTypeId);\n    if (!factorType) {\n      throw new Error(\"not found\");\n    }\n\n    const errors = Factors.valueValidation(factorType, factor.value);\n    if (errors) {\n      throw new Error(\n        errors.map(e => handleFactorValueErrorMessage(e)).join(\"\\n\")\n      );\n    }\n\n    Factors.insert(factor, { autoConvert: false });\n  }\n});\n\nexport const updateFactor = new ValidatedMethod({\n  name: \"Factors.methods.update\",\n\n  validate: Factors.schema\n    .pick(\"name\")\n    .extend(IdSchema)\n    .extend(\n      new SimpleSchema({\n        archived: {\n          type: Boolean,\n          optional: true\n        }\n      })\n    )\n    .validator(),\n\n  run({ _id, name, archived }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const factor = Factors.findOne(_id);\n    if (!factor) {\n      throw new Error(\"not found\");\n    }\n\n    const $set = {},\n      $unset = {};\n    if (name !== undefined) {\n      $set.name = name;\n    }\n\n    if (archived !== undefined) {\n      if (archived) {\n        if (factor.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $set.archivedAt = new Date();\n        $set.archivedById = this.userId;\n      }\n\n      if (!archived) {\n        if (!factor.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $unset.archivedAt = true;\n        $unset.archivedById = true;\n      }\n    }\n\n    const modifier = {};\n    if (Object.keys($set).length > 0) {\n      modifier.$set = $set;\n    }\n    if (Object.keys($unset).length > 0) {\n      modifier.$unset = $unset;\n    }\n    if (Object.keys(modifier).length === 0) {\n      return;\n    }\n\n    Factors.update(_id, modifier);\n  }\n});\n","// game-lobbies.js\nimport SimpleSchema from \"simpl-schema\";\n\nimport { statusSchema } from \"../batches/status-schema\";\nimport { Batches } from \"../batches/batches\";\nimport { BelongsTo, HasManyByRef, TimestampSchema } from \"../default-schemas\";\nimport { DebugModeSchema, UserDataSchema } from \"../default-schemas.js\";\nimport { Players } from \"../players/players\";\nimport { Treatments } from \"../treatments/treatments\";\n\nexport const GameLobbies = new Mongo.Collection(\"game_lobbies\");\n\nGameLobbies.helpers({\n  players() {\n    return Players.find({ _id: { $in: this.playerIds } }).fetch();\n  },\n  batch() {\n    return Batches.findOne({ _id: this.batchId });\n  },\n  treatment() {\n    return Treatments.findOne({ _id: this.treatmentId });\n  }\n});\n\nGameLobbies.schema = new SimpleSchema({\n  // index allows for an ordering of lobbies so we know which one\n  // to choose from next\n  index: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    label: \"Position\"\n  },\n\n  // availableCount tells us how many slots are available in this lobby\n  // (== treatment.playerCount)\n  availableCount: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    label: \"Available Slots Count\"\n  },\n\n  timeoutStartedAt: {\n    label: \"Time the first player arrived in the lobby\",\n    type: Date,\n    optional: true\n  },\n\n  timedOutAt: {\n    label: \"Time when the lobby timed out and was cancelled\",\n    type: Date,\n    optional: true,\n    index: 1\n  },\n\n  endReason: {\n    label: \"Ended Reason\",\n    type: String,\n    optional: true,\n    regEx: /[a-zA-Z0-9_]+/\n  },\n\n  // Queued players are players that have been associated with the lobby\n  // but are not confirmed for the game yet. playerIds is used for confirmed\n  // players\n  // There might be more queued player than availableCount as we\n  // allow overbooking to make games start faster.\n  queuedPlayerIds: {\n    type: Array,\n    defaultValue: [],\n    label: `Queued Players`,\n    index: true\n  },\n  \"queuedPlayerIds.$\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n    label: `Queued Player`\n  }\n});\n\nif (Meteor.isDevelopment || Meteor.settings.public.debug_gameDebugMode) {\n  GameLobbies.schema.extend(DebugModeSchema);\n}\n\nGameLobbies.schema.extend(UserDataSchema);\nGameLobbies.schema.extend(TimestampSchema);\n// playerIds tells us how many players are ready to start (finished intro)\n// Once playerIds.length == availableCount, the game starts. Player that are\n// queued but haven't made it past the intro in time will be led to the outro\n// directly.\nGameLobbies.schema.extend(HasManyByRef(\"Players\"));\nGameLobbies.schema.extend(BelongsTo(\"Games\", false));\nGameLobbies.schema.extend(BelongsTo(\"Treatments\"));\nGameLobbies.schema.extend(BelongsTo(\"Batches\"));\nGameLobbies.schema.extend(BelongsTo(\"LobbyConfigs\"));\n// We are denormalizing the parent batch status in order to make clean queries\nGameLobbies.schema.extend(statusSchema);\nGameLobbies.attachSchema(GameLobbies.schema);\n","import shared from \"../../shared.js\";\nimport { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { GameLobbies } from \"./game-lobbies\";\nimport { Players } from \"../players/players\";\nimport { Batches } from \"../batches/batches.js\";\n\nexport const updateGameLobbyData = new ValidatedMethod({\n  name: \"GameLobbies.methods.updateData\",\n\n  validate: new SimpleSchema({\n    gameLobbyId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    key: {\n      type: String\n    },\n    value: {\n      type: String\n    },\n    append: {\n      type: Boolean,\n      optional: true\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ gameLobbyId, key, value, append, noCallback }) {\n    const gameLobby = GameLobbies.findOne(gameLobbyId);\n    if (!gameLobby) {\n      throw new Error(\"game lobbies not found\");\n    }\n    // TODO check can update this record game\n\n    const val = JSON.parse(value);\n    let update = { [`data.${key}`]: val };\n    const modifier = append ? { $push: update } : { $set: update };\n\n    GameLobbies.update(gameLobbyId, modifier, {\n      autoConvert: false,\n      filter: false,\n      validate: false,\n      trimStrings: false,\n      removeEmptyStrings: false\n    });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnChange({\n        conn: this.connection,\n        gameLobbyId,\n        gameLobby,\n        key,\n        value: val,\n        prevValue: gameLobby.data && gameLobby.data[key],\n        append\n      });\n    }\n  }\n});\n\nexport const earlyExitGameLobby = new ValidatedMethod({\n  name: \"GameLobbies.methods.earlyExit\",\n\n  validate: new SimpleSchema({\n    exitReason: {\n      label: \"Reason for Exit\",\n      type: String,\n      regEx: /[a-zA-Z0-9_]+/\n    },\n    gameLobbyId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    status: {\n      label: \"Status for lobby after exit\",\n      type: String,\n      regEx: /[a-zA-Z0-9_]+/,\n      optional: true\n    }\n  }).validator(),\n\n  run({ exitReason, gameLobbyId, status }) {\n    if (!Meteor.isServer) {\n      return;\n    }\n\n    const gameLobby = GameLobbies.findOne(gameLobbyId);\n    const exitStatus = status || \"failed\";\n    if (!gameLobby) {\n      throw new Error(\"gameLobby not found\");\n    }\n\n    Players.update(\n      { gameLobbyId },\n      {\n        $set: {\n          exitAt: new Date(),\n          exitStatus: exitStatus,\n          exitReason\n        }\n      }\n    );\n\n    GameLobbies.update(gameLobbyId, {\n      $set: {\n        status: exitStatus,\n        endReason: exitReason\n      }\n    });\n\n    const batch = Batches.findOne(gameLobby.batchId);\n    const availableLobby = GameLobbies.findOne({\n      $and: [\n        {\n          _id: { $in: batch.gameLobbyIds }\n        },\n        { status: { $in: [\"init\", \"running\"] } }\n      ]\n    });\n\n    // End batch if there is no available lobby\n    if (!availableLobby) {\n      Batches.update(\n        { gameLobbyIds: gameLobbyId },\n        { $set: { status: exitStatus, finishedAt: new Date() } }\n      );\n    }\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\nimport { Counter } from \"../../lib/counters\";\nimport { statusSchema } from \"../batches/status-schema\";\nimport { BelongsTo, HasManyByRef, TimestampSchema } from \"../default-schemas\";\nimport { DebugModeSchema, UserDataSchema } from \"../default-schemas.js\";\nimport { GameLobbies } from \"../game-lobbies/game-lobbies\";\nimport { Treatments } from \"../treatments/treatments\";\nimport { Batches } from \"../batches/batches\";\nimport { Players } from \"../players/players\";\nimport { Stages } from \"../stages/stages\";\nimport { Rounds } from \"../rounds/rounds\";\n\nclass GamesCollection extends Mongo.Collection {\n  insert(doc, callback) {\n    doc.index = Counter.inc(\"games\");\n    return super.insert(doc, callback);\n  }\n}\n\nexport const Games = new GamesCollection(\"games\");\n\nGames.schema = new SimpleSchema({\n  // Auto-incremented number assigned to games as they are created\n  index: {\n    type: SimpleSchema.Integer\n  },\n\n  // estFinishedTime is adding up all stages timings when the game is\n  // created/started to estimate when the game should be done at the latests.\n  estFinishedTime: {\n    type: Date,\n    index: 1\n  },\n\n  // Time the game actually finished\n  finishedAt: {\n    type: Date,\n    optional: true,\n    index: 1\n  },\n\n  // Indicates which stage is ongoing\n  currentStageId: {\n    type: String,\n    optional: true,\n    regEx: SimpleSchema.RegEx.Id,\n    index: 1\n  },\n\n  endReason: {\n    label: \"Ended Reason\",\n    type: String,\n    optional: true,\n    regEx: /[a-zA-Z0-9_]+/\n  }\n});\n\nif (Meteor.isDevelopment || Meteor.settings.public.debug_gameDebugMode) {\n  Games.schema.extend(DebugModeSchema);\n}\n\nGames.schema.extend(TimestampSchema);\nGames.schema.extend(UserDataSchema);\nGames.schema.extend(BelongsTo(\"GameLobbies\", false));\nGames.schema.extend(BelongsTo(\"Treatments\"));\nGames.schema.extend(HasManyByRef(\"Rounds\"));\nGames.schema.extend(HasManyByRef(\"Players\"));\nGames.schema.extend(BelongsTo(\"Batches\"));\n// We are denormalizing the parent batch status in order to make clean queries\nGames.schema.extend(statusSchema);\nGames.attachSchema(Games.schema);\n","import shared from \"../../shared.js\";\nimport { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { Games } from \"./games.js\";\nimport { GameLobbies } from \"../game-lobbies/game-lobbies.js\";\nimport { Players } from \"../players/players.js\";\nimport { Stages } from \"../stages/stages.js\";\nimport { Batches } from \"../batches/batches.js\";\n\nexport const updateGameData = new ValidatedMethod({\n  name: \"Games.methods.updateData\",\n\n  validate: new SimpleSchema({\n    gameId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    key: {\n      type: String\n    },\n    value: {\n      type: String\n    },\n    append: {\n      type: Boolean,\n      optional: true\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ gameId, key, value, append, noCallback }) {\n    const game = Games.findOne(gameId);\n    if (!game) {\n      throw new Error(\"game not found\");\n    }\n    // TODO check can update this record game\n\n    const val = JSON.parse(value);\n    let update = { [`data.${key}`]: val };\n    const modifier = append ? { $push: update } : { $set: update };\n\n    Games.update(gameId, modifier, {\n      autoConvert: false,\n      filter: false,\n      validate: false,\n      trimStrings: false,\n      removeEmptyStrings: false\n    });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnChange({\n        conn: this.connection,\n        gameId,\n        game,\n        key,\n        value: val,\n        prevValue: game.data && game.data[key],\n        append\n      });\n    }\n  }\n});\n\nexport const earlyExitGame = new ValidatedMethod({\n  name: \"Games.methods.earlyExitGame\",\n\n  validate: new SimpleSchema({\n    gameId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    endReason: {\n      label: \"Reason for End\",\n      type: String,\n      regEx: /[a-zA-Z0-9_]+/\n    },\n    status: {\n      label: \"status for games and players after exit\",\n      type: String,\n      regEx: /[a-zA-Z0-9_]+/\n    }\n  }).validator(),\n\n  run({ gameId, endReason, status }) {\n    if (!Meteor.isServer) {\n      return;\n    }\n\n    const game = Games.findOne(gameId);\n\n    if (!game) {\n      throw new Error(\"game not found\");\n    }\n\n    if (game && game.finishedAt) {\n      if (Meteor.isDevelopment) {\n        console.log(\"\\n\\ngame already ended!\");\n      }\n\n      return;\n    }\n\n    Games.update(gameId, {\n      $set: {\n        finishedAt: new Date(),\n        status,\n        endReason\n      }\n    });\n\n    GameLobbies.update(\n      { gameId },\n      {\n        $set: {\n          status,\n          endReason\n        }\n      }\n    );\n\n    game.playerIds.forEach(playerId =>\n      Players.update(playerId, {\n        $set: {\n          exitAt: new Date(),\n          exitStatus: status,\n          exitReason: endReason\n        }\n      })\n    );\n\n    const batch = Batches.findOne(game.batchId);\n    const availableLobby = GameLobbies.findOne({\n      $and: [\n        {\n          _id: { $in: batch.gameLobbyIds }\n        },\n        { status: { $in: [\"init\", \"running\"] } }\n      ]\n    });\n\n    // End batch if there is no available game\n    if (!availableLobby) {\n      Batches.update(\n        { gameLobbyIds: gameId },\n        { $set: { status: status, finishedAt: new Date() } }\n      );\n    }\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\nimport inflection from \"inflection\";\n\nimport {\n  HasManyByRef,\n  TimestampSchema,\n  ArchivedSchema\n} from \"../default-schemas\";\n\nexport const LobbyConfigs = new Mongo.Collection(\"lobby_configs\");\n\nLobbyConfigs.helpers({\n  displayName() {\n    if (this.name) {\n      return this.name;\n    }\n\n    const type = inflection.titleize(this.timeoutType);\n    const base = `${type}: ${this.timeoutInSeconds}s`;\n    let details;\n    switch (this.timeoutType) {\n      case \"lobby\":\n        details = `â†’ ${inflection.titleize(this.timeoutStrategy)}`;\n        if (this.timeoutStrategy === \"bots\") {\n          details += `(${this.timeoutBots.join(\",\")})`;\n        }\n        break;\n      case \"individual\":\n        details = `â¨‰ ${this.extendCount + 1}`;\n        break;\n      default:\n        console.error(`unknown timeoutType: ${this.timeoutType}`);\n        return base;\n    }\n\n    return `${base} ${details}`;\n  }\n});\n\n// There are 2 exclusive timeout types:\n// - lobby: the timeout start when the first player reaches the lobby and runs\n//   out for all the players whether they have even reached the lobby or not.\n// - individual: the timeout is started for each player as they reach the room.\n//   Some players might time out before all players are in the lobby, they might\n//   continue waiting for another timeout period. They might also leave the game\n//   and a new player can replace them. The lobby itself never times out.\nLobbyConfigs.timeoutTypes = [\"lobby\", \"individual\"];\n\n// The timeoutStrategy determines what to do in case people are waiting\n// in the lobby for longer than the timeoutInSeconds duration.\n// Only for \"lobby\" timeoutType.\n// Available strategies:\n// - ignore: start the game anyway\n// - fail: take the player to the exit survey\n// - bots: fill the missing players slots with bots from timeoutBots\nLobbyConfigs.timeoutStrategies = [\"fail\", \"ignore\"];\n// DEACTIVATING bots until bots implemented.\n// LobbyConfigs.timeoutStrategies = [\"fail\", \"ignore\", \"bots\"];\n\n// One year, that's a lot, just need to block from something too wild like 10M\n// years. We don't actually care, Inf would be fine...\nLobbyConfigs.maxTimeoutInSeconds = 365 * 24 * 60 * 60;\n\n// defaultTimeoutInSeconds is simply used as the default value in the Lobby\n// Configuration creation form.\nLobbyConfigs.defaultTimeoutInSeconds = 5 * 60;\n\nLobbyConfigs.schema = new SimpleSchema({\n  // Optional experimenter given name for the treatment\n  name: {\n    type: String,\n    max: 256,\n    optional: true,\n    custom() {\n      if (this.isSet && LobbyConfigs.find({ name: this.value }).count() > 0) {\n        return \"notUnique\";\n      }\n    }\n    // regEx: /^[a-zA-Z0-9_]+$/\n  },\n\n  // The timeoutType fundamentally changes the behavior of the lobby. See\n  // LobbyConfigs.timeoutTypes above for details.\n  timeoutType: {\n    type: String,\n    allowedValues: LobbyConfigs.timeoutTypes\n  },\n\n  // Number of seconds for one player to wait in lobby before timeoutStrategy\n  // is applied. This timeout applies only to the waiting for the game to start.\n  // It is either a \"Lobby Timeout\", or an \"Individual Timeout\", depending on\n  // the timeoutType value.\n  timeoutInSeconds: {\n    type: SimpleSchema.Integer,\n    max: LobbyConfigs.maxTimeoutInSeconds,\n    // It would be difficult to manage a timer that is less than 5s, and it\n    // would be  weird. 5s is already weird...\n    min: 5\n  },\n\n  // The timeoutStrategy determines what to do in case people are waiting\n  // in the lobby for longer than the timeoutInSeconds duration.\n  // Only for \"lobby\" timeoutType.\n  // See LobbyConfigs.timeoutStrategies for details.\n  timeoutStrategy: {\n    type: String,\n    allowedValues: LobbyConfigs.timeoutStrategies,\n    defaultValue: \"fail\",\n    optional: true\n  },\n\n  // Names of bot to use if timed out and still not enough player.\n  // Only for \"lobby\" timeoutType and timeoutStrategy is \"bots\".\n  timeoutBots: {\n    type: Array,\n    // Should add custom validation to verify the timeoutStrategy and make\n    // required if \"bots\" and should verify bot with name exists.\n    optional: true\n  },\n  \"timeoutBots.$\": {\n    type: String\n  },\n\n  // Number of times to allow the user to extend their wait time by\n  // timeoutInSeconds.\n  // If set to 0, they are never asked to retry.\n  // Only for \"individual\" timeoutType.\n  extendCount: {\n    type: SimpleSchema.Integer,\n    // 1 millard times, that should be a sufficient upper bound\n    max: 1000000000,\n    min: 0,\n    optional: true\n  }\n});\n\nLobbyConfigs.schema.extend(TimestampSchema);\nLobbyConfigs.schema.extend(ArchivedSchema);\nLobbyConfigs.schema.extend(HasManyByRef(\"Batches\"));\nLobbyConfigs.schema.extend(HasManyByRef(\"GameLobbies\"));\nLobbyConfigs.attachSchema(LobbyConfigs.schema);\n","import SimpleSchema from \"simpl-schema\";\nimport { ValidatedMethod } from \"meteor/mdg:validated-method\";\n\nimport { LobbyConfigs } from \"./lobby-configs.js\";\nimport { IdSchema } from \"../default-schemas.js\";\n\nexport const createLobbyConfig = new ValidatedMethod({\n  name: \"LobbyConfigs.methods.create\",\n\n  validate: LobbyConfigs.schema\n    .pick(\n      \"name\",\n      \"timeoutType\",\n      \"timeoutInSeconds\",\n      \"timeoutStrategy\",\n      \"timeoutBots\",\n      \"timeoutBots.$\",\n      \"extendCount\"\n    )\n    .validator(),\n\n  run(lobbyConfig) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    LobbyConfigs.insert(lobbyConfig);\n  }\n});\n\nexport const updateLobbyConfig = new ValidatedMethod({\n  name: \"LobbyConfigs.methods.update\",\n\n  validate: LobbyConfigs.schema\n    .pick(\"name\")\n    .extend(\n      new SimpleSchema({\n        archived: {\n          type: Boolean,\n          optional: true\n        }\n      })\n    )\n    .extend(IdSchema)\n    .validator(),\n\n  run({ _id, name, archived }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n    const lobbyConfig = LobbyConfigs.findOne(_id);\n    if (!lobbyConfig) {\n      throw new Error(\"not found\");\n    }\n\n    const $set = {},\n      $unset = {};\n    if (name !== undefined) {\n      $set.name = name;\n    }\n    if (archived !== undefined) {\n      if (archived) {\n        if (lobbyConfig.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $set.archivedAt = new Date();\n        $set.archivedById = this.userId;\n      }\n      if (!archived) {\n        if (!lobbyConfig.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $unset.archivedAt = true;\n        $unset.archivedById = true;\n      }\n    }\n\n    const modifier = {};\n    if (Object.keys($set).length > 0) {\n      modifier.$set = $set;\n    }\n    if (Object.keys($unset).length > 0) {\n      modifier.$unset = $unset;\n    }\n    if (Object.keys(modifier).length === 0) {\n      return;\n    }\n\n    LobbyConfigs.update(_id, modifier);\n  }\n});\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\nimport { Players } from \"../players/players.js\";\nimport { PlayerInputs } from \"./player-inputs.js\";\n\n// addPlayerInput is non-destructive, it just keeps adding onto a player's\n// input data.\nexport const addPlayerInput = new ValidatedMethod({\n  name: \"PlayerInputs.methods.add\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    gameId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      optional: true\n    },\n    gameLobbyId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      optional: true\n    },\n    data: {\n      type: String\n    }\n  }).validator(),\n\n  run({ playerId, gameId, gameLobbyId, data: rawData }) {\n    const player = Players.findOne(playerId);\n    if (!player) {\n      throw new Error(\"player not found\");\n    }\n    if (!gameId && !gameLobbyId) {\n      throw new Error(\"gameId or gameLobbyId required\");\n    }\n\n    const data = JSON.parse(rawData);\n    PlayerInputs.insert(\n      { playerId, gameId, gameLobbyId, data },\n      {\n        autoConvert: false,\n        filter: false,\n        validate: false,\n        trimStrings: false,\n        removeEmptyStrings: false\n      }\n    );\n  }\n});\n","// PlayerInputs contains small pieces of information associated with a player\n// This can be input forms from intro/outro or intermediate input values while\n// playing the game (e.g. all values while moving a range input, mouse,\n// movements...)\n\nimport SimpleSchema from \"simpl-schema\";\nimport { BelongsTo, TimestampSchema, UserDataSchema } from \"../default-schemas\";\n\nexport const PlayerInputs = new Mongo.Collection(\"player_inputs\");\n\nPlayerInputs.schema = new SimpleSchema({});\n\nPlayerInputs.schema.extend(TimestampSchema);\nPlayerInputs.schema.extend(UserDataSchema);\nPlayerInputs.schema.extend(BelongsTo(\"Games\", false));\nPlayerInputs.schema.extend(BelongsTo(\"GameLobbies\", false));\nPlayerInputs.schema.extend(BelongsTo(\"Players\"));\nPlayerInputs.attachSchema(PlayerInputs.schema);\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { PlayerLogs } from \"./player-logs.js\";\nimport { Players } from \"../players/players.js\";\n\n// playerLog is non-destructive, it just keeps adding onto a player's logs.\nexport const playerLog = new ValidatedMethod({\n  name: \"PlayerLogs.methods.add\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    stageId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      optional: true\n    },\n    roundId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      optional: true\n    },\n    gameId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id,\n      optional: true\n    },\n    name: {\n      type: String,\n      max: 255\n    },\n    jsonData: {\n      type: String\n    }\n  }).validator(),\n\n  run({ playerId, gameId, roundId, stageId, name, jsonData }) {\n    const player = Players.findOne(playerId);\n    if (!player) {\n      throw new Error(\"player not found\");\n    }\n\n    PlayerLogs.insert(\n      { playerId, gameId, roundId, stageId, name, jsonData },\n      {\n        autoConvert: false,\n        filter: false,\n        validate: false,\n        trimStrings: false,\n        removeEmptyStrings: false\n      }\n    );\n  }\n});\n","// PlayerInputs contains small pieces of information associated with a player\n// This can be input forms from intro/outro or intermediate input values while\n// playing the game (e.g. all values while moving a range input, mouse,\n// movements...)\n\nimport SimpleSchema from \"simpl-schema\";\n\nimport { TimestampSchema, BelongsTo } from \"../default-schemas\";\n\nexport const PlayerLogs = new Mongo.Collection(\"player_logs\");\n\nPlayerLogs.schema = new SimpleSchema({\n  stageId: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n    optional: true\n  },\n  roundId: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n    optional: true\n  },\n  gameId: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n    optional: true\n  },\n  name: {\n    type: String,\n    max: 255\n  },\n  jsonData: {\n    type: String\n  }\n});\n\nPlayerLogs.schema.extend(TimestampSchema);\nPlayerLogs.schema.extend(BelongsTo(\"Players\"));\nPlayerLogs.attachSchema(PlayerLogs.schema);\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\nimport { PlayerRounds } from \"./player-rounds\";\nimport shared from \"../../shared.js\";\n\nexport const updatePlayerRoundData = new ValidatedMethod({\n  name: \"PlayerRounds.methods.updateData\",\n\n  validate: new SimpleSchema({\n    playerRoundId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    key: {\n      type: String\n    },\n    value: {\n      type: String\n    },\n    append: {\n      type: Boolean,\n      optional: true\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ playerRoundId, key, value, append, noCallback }) {\n    const playerRound = PlayerRounds.findOne(playerRoundId);\n    if (!playerRound) {\n      throw new Error(\"playerRound not found\");\n    }\n    // TODO check can update this record playerRound\n\n    const val = JSON.parse(value);\n    let update = { [`data.${key}`]: val };\n    const modifier = append ? { $push: update } : { $set: update };\n\n    PlayerRounds.update(playerRoundId, modifier, {\n      autoConvert: false,\n      filter: false,\n      validate: false,\n      trimStrings: false,\n      removeEmptyStrings: false\n    });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnChange({\n        playerId: playerRound.playerId,\n        playerRoundId,\n        playerRound,\n        key,\n        value: val,\n        prevValue: playerRound.data && playerRound.data[key],\n        append\n      });\n    }\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\n\nimport { TimestampSchema, UserDataSchema, BelongsTo } from \"../default-schemas\";\n\nexport const PlayerRounds = new Mongo.Collection(\"player_rounds\");\n\nPlayerRounds.schema = new SimpleSchema({});\n\nPlayerRounds.schema.extend(TimestampSchema);\nPlayerRounds.schema.extend(UserDataSchema);\nPlayerRounds.schema.extend(BelongsTo(\"Players\"));\nPlayerRounds.schema.extend(BelongsTo(\"Rounds\"));\nPlayerRounds.schema.extend(BelongsTo(\"Games\"));\nPlayerRounds.schema.extend(BelongsTo(\"Batches\"));\nPlayerRounds.attachSchema(PlayerRounds.schema);\n","// augment.js\nimport { updateGameData, earlyExitGame } from \"../games/methods.js\";\nimport { updateGameLobbyData } from \"../game-lobbies/methods\";\nimport { updatePlayerRoundData } from \"../player-rounds/methods\";\nimport { PlayerRounds } from \"../player-rounds/player-rounds\";\nimport {\n  updatePlayerData,\n  earlyExitPlayer,\n  earlyExitPlayerLobby\n} from \"../players/methods.js\";\nimport { playerLog } from \"../player-logs/methods.js\";\nimport { updateRoundData } from \"../rounds/methods.js\";\nimport { updateStageData } from \"../stages/methods.js\";\nimport { submitPlayerStage, updatePlayerStageData } from \"./methods\";\nimport { PlayerStages } from \"./player-stages\";\n\nconst gameSet = (gameId, append = false) => (key, value) => {\n  updateGameData.call({\n    gameId,\n    key,\n    value: JSON.stringify(value),\n    append,\n    noCallback: Meteor.isServer\n  });\n};\n\nconst gameLobbySet = (gameLobbyId, append = false) => (key, value) => {\n  updateGameLobbyData.call({\n    gameLobbyId,\n    key,\n    value: JSON.stringify(value),\n    append,\n    noCallback: Meteor.isServer\n  });\n};\n\nconst playerSet = (playerId, append = false) => (key, value) => {\n  updatePlayerData.call({\n    playerId,\n    key,\n    value: JSON.stringify(value),\n    append,\n    noCallback: Meteor.isServer\n  });\n};\nconst stageSet = (playerStageId, append = false) => (key, value) => {\n  updatePlayerStageData.call({\n    playerStageId,\n    key,\n    value: JSON.stringify(value),\n    append,\n    noCallback: Meteor.isServer\n  });\n};\nconst stageSubmit = playerStageId => cb => {\n  submitPlayerStage.call(\n    {\n      playerStageId,\n      noCallback: Meteor.isServer\n    },\n    cb\n  );\n};\nconst roundSet = (playerRoundId, append = false) => (key, value) => {\n  updatePlayerRoundData.call({\n    playerRoundId,\n    key,\n    value: JSON.stringify(value),\n    append,\n    noCallback: Meteor.isServer\n  });\n};\n\n// Once the operation has succeeded (no throw), set the value\n// undefined is not supported, null is, replace undefineds by nulls.\nconst set = (obj, func) => (k, v) => {\n  const val = v === undefined ? null : v;\n  func(k, val);\n  obj[k] = val;\n};\n\nconst append = (obj, func) => (k, v) => {\n  const val = v === undefined ? null : v;\n  func(k, val);\n  if (!obj[k]) {\n    obj[k] = [];\n  }\n  obj[k].push(val);\n};\n\nconst nullFunc = () => {\n  throw \"You called .get(...) or .set(...) but there is no data for the player yet. Did the game run for this player?\";\n};\n\nexport const augmentGameLobby = gameLobby => {\n  gameLobby.get = key => gameLobby.data[key];\n  gameLobby.set = set(gameLobby.data, gameLobbySet(gameLobby._id));\n  gameLobby.append = append(gameLobby.data, gameLobbySet(gameLobby._id, true));\n};\n\nexport const augmentPlayerLobby = (\n  player,\n  round = {},\n  stage = {},\n  gameLobby = {}\n) => {\n  const { _id: playerId } = player;\n\n  player.exit = reason =>\n    earlyExitPlayerLobby.call({\n      playerId,\n      exitReason: reason,\n      gameLobbyId: gameLobby._id\n    });\n  player.get = key => player.data[key];\n  player.set = set(player.data, playerSet(playerId));\n  player.append = append(player.data, playerSet(playerId, true));\n  player.log = (name, data) => {\n    playerLog.call({\n      playerId,\n      name,\n      jsonData: JSON.stringify(data),\n      stageId: stage._id,\n      roundId: round._id,\n      gameLobbyId: gameLobby._id\n    });\n  };\n};\n\nexport const augmentPlayer = (player, stage = {}, round = {}, game = {}) => {\n  const { _id: playerId } = player;\n\n  player.exit = reason =>\n    earlyExitPlayer.call({\n      playerId,\n      exitReason: reason,\n      gameId: game._id\n    });\n  player.get = key => player.data[key];\n  player.set = set(player.data, playerSet(playerId));\n  player.append = append(player.data, playerSet(playerId, true));\n  player.log = (name, data) => {\n    playerLog.call({\n      playerId,\n      name,\n      jsonData: JSON.stringify(data),\n      stageId: stage._id,\n      roundId: round._id,\n      gameId: game._id\n    });\n  };\n};\n\nexport const augmentPlayerStageRound = (\n  player,\n  stage = {},\n  round = {},\n  game = {}\n) => {\n  const { _id: playerId } = player;\n\n  augmentPlayer(player, stage, round, game);\n\n  if (stage) {\n    const playerStage = PlayerStages.findOne({\n      stageId: stage._id,\n      playerId\n    });\n    stage.get = key => playerStage.data[key];\n    stage.set = set(playerStage.data, stageSet(playerStage._id));\n    stage.append = append(playerStage.data, stageSet(playerStage._id, true));\n    stage.submit = stageSubmit(playerStage._id, err => {\n      if (!err) {\n        stage.submitted = true;\n      }\n    });\n    stage.submitted = Boolean(playerStage.submittedAt);\n    stage.submittedAt = playerStage.submittedAt;\n  }\n\n  if (round) {\n    const playerRound = PlayerRounds.findOne({\n      roundId: round._id,\n      playerId\n    });\n    round.get = key => playerRound.data[key];\n    round.set = set(playerRound.data, roundSet(playerRound._id));\n    round.append = append(playerRound.data, roundSet(playerRound._id, true));\n  }\n};\n\nexport const stubPlayerStageRound = (player, stage, round) => {\n  player.get = nullFunc;\n  player.set = nullFunc;\n  player.append = nullFunc;\n\n  if (stage) {\n    stage.get = nullFunc;\n    stage.set = nullFunc;\n    stage.append = nullFunc;\n    stage.submit = nullFunc;\n    stage.submitted = false;\n  }\n\n  if (round) {\n    round.get = nullFunc;\n    round.set = nullFunc;\n    round.append = nullFunc;\n  }\n};\n\nexport const augmentGameStageRound = (game, stage, round) => {\n  if (game) {\n    game.get = key => game.data[key];\n    game.set = set(game.data, gameSet(game._id));\n    game.append = append(game.data, gameSet(game._id, true));\n    game.end = endReason =>\n      earlyExitGame.call({\n        gameId: game._id,\n        endReason,\n        status: \"custom\"\n      });\n  }\n\n  if (stage) {\n    stage.get = key => {\n      return stage.data[key];\n    };\n    stage.set = set(stage.data, (key, value) => {\n      updateStageData.call({\n        stageId: stage._id,\n        key,\n        value: JSON.stringify(value),\n        append: false,\n        noCallback: Meteor.isServer\n      });\n    });\n    stage.append = append(stage.data, (key, value) => {\n      updateStageData.call({\n        stageId: stage._id,\n        key,\n        value: JSON.stringify(value),\n        append: true,\n        noCallback: Meteor.isServer\n      });\n    });\n    stage.submit = () => {\n      throw \"You cannot submit the entire stage at the moment\";\n    };\n  }\n\n  if (round) {\n    round.get = key => {\n      return round.data[key];\n    };\n    round.set = set(round.data, (key, value) => {\n      updateRoundData.call({\n        roundId: round._id,\n        key,\n        value: JSON.stringify(value),\n        append: false,\n        noCallback: Meteor.isServer\n      });\n    });\n    round.append = append(round.data, (key, value) => {\n      updateRoundData.call({\n        roundId: round._id,\n        key,\n        value: JSON.stringify(value),\n        append: true,\n        noCallback: Meteor.isServer\n      });\n    });\n  }\n};\n\nexport const stubStageRound = (stage, round) => {\n  stage.get = nullFunc;\n  stage.set = nullFunc;\n  stage.append = nullFunc;\n  stage.submit = nullFunc;\n  round.get = nullFunc;\n  round.set = nullFunc;\n  round.append = nullFunc;\n};\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\nimport { PlayerStages } from \"./player-stages\";\nimport shared from \"../../shared.js\";\n\nexport const updatePlayerStageData = new ValidatedMethod({\n  name: \"PlayerStages.methods.updateData\",\n\n  validate: new SimpleSchema({\n    playerStageId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    key: {\n      type: String\n    },\n    value: {\n      type: String\n    },\n    append: {\n      type: Boolean,\n      optional: true\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ playerStageId, key, value, append, noCallback }) {\n    const playerStage = PlayerStages.findOne(playerStageId);\n    if (!playerStage) {\n      throw new Error(\"playerStage not found\");\n    }\n\n    // TODO check can update this record playerStage\n\n    const val = JSON.parse(value);\n    let update = { [`data.${key}`]: val };\n    const modifier = append ? { $push: update } : { $set: update };\n\n    PlayerStages.update(playerStageId, modifier, {\n      autoConvert: false,\n      filter: false,\n      validate: false,\n      trimStrings: false,\n      removeEmptyStrings: false\n    });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnChange({\n        playerId: playerStage.playerId,\n        playerStageId,\n        playerStage,\n        key,\n        value: val,\n        prevValue: playerStage.data && playerStage.data[key],\n        append\n      });\n    }\n  }\n});\n\nexport const submitPlayerStage = new ValidatedMethod({\n  name: \"PlayerStages.methods.submit\",\n\n  validate: new SimpleSchema({\n    playerStageId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ playerStageId, noCallback }) {\n    const playerStage = PlayerStages.findOne(playerStageId);\n    if (!playerStage) {\n      throw new Error(\"playerStage not found\");\n    }\n    // TODO check can update this record playerStage\n\n    if (playerStage.submittedAt) {\n      if (Meteor.isDevelopment) {\n        console.log(\"stage already submitted\");\n      }\n\n      return;\n    }\n\n    PlayerStages.update(playerStageId, { $set: { submittedAt: new Date() } });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnSubmit({\n        playerId: playerStage.playerId,\n        playerStage\n      });\n    }\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\n\nimport { TimestampSchema, UserDataSchema, BelongsTo } from \"../default-schemas\";\n\nexport const PlayerStages = new Mongo.Collection(\"player_stages\");\n\nPlayerStages.schema = new SimpleSchema({\n  submittedAt: {\n    type: Date,\n    denyInsert: true,\n    optional: true,\n    index: 1\n  }\n});\n\nPlayerStages.schema.extend(TimestampSchema);\nPlayerStages.schema.extend(UserDataSchema);\nPlayerStages.schema.extend(BelongsTo(\"Players\"));\nPlayerStages.schema.extend(BelongsTo(\"Stages\"));\nPlayerStages.schema.extend(BelongsTo(\"Rounds\"));\nPlayerStages.schema.extend(BelongsTo(\"Games\"));\nPlayerStages.schema.extend(BelongsTo(\"Batches\"));\nPlayerStages.attachSchema(PlayerStages.schema);\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { Batches } from \"../batches/batches.js\";\nimport { GameLobbies } from \"../game-lobbies/game-lobbies\";\nimport { IdSchema } from \"../default-schemas.js\";\nimport { LobbyConfigs } from \"../lobby-configs/lobby-configs.js\";\nimport { Games } from \"../games/games.js\";\nimport { Players } from \"./players\";\nimport { exitStatuses } from \"./players.js\";\nimport { sleep, weightedRandom } from \"../../lib/utils.js\";\nimport shared from \"../../shared.js\";\nimport gameLobbyLock from \"../../gameLobby-lock.js\";\n\nexport const createPlayer = new ValidatedMethod({\n  name: \"Players.methods.create\",\n\n  validate: new SimpleSchema({\n    id: {\n      type: String\n    },\n    urlParams: {\n      type: Object,\n      blackbox: true,\n      defaultValue: {}\n    }\n  }).validator(),\n\n  run(player) {\n    // Find the first running batch (in order of running started time)\n    const batch = Batches.findOne(\n      { status: \"running\", full: false },\n      { sort: { runningAt: 1 } }\n    );\n\n    if (!batch) {\n      // The UI should update and realize there is no batch available\n      // This should be a rare case where a fraction of a second of\n      // desynchornisation when the last available batch just finished.\n      // If this is the case, since the user exist in the DB at this point\n      // but has no lobby assigned, and the UI will soon determine there\n      // is no available game, the UI will switch to \"No experiments\n      // available\", nothing else to do.\n      return;\n    }\n\n    // TODO: MAYBE, add verification that the user is not current connected\n    // elsewhere and this is not a flagrant impersonation. Note that is\n    // extremely difficult to guaranty. Could also add verification of user's\n    // id with email verication for example. For now the assumption is that\n    // there is no immediate reason or long-term motiviation for people to hack\n    // each other's player account.\n\n    const existing = Players.findOne({ id: player.id });\n\n    // If the player already has a game lobby assigned, no need to\n    // re-initialize them\n    if (existing && existing.gameLobbyId) {\n      return existing._id;\n    }\n\n    if (existing) {\n      player = existing;\n    } else {\n      // Because of a bug in SimpleSchema around blackbox: true, skipping\n      // validation here. Validation did happen at the method level though.\n      player._id = Players.insert(player, {\n        filter: false,\n        validate: false\n      });\n    }\n\n    // Looking for all lobbies for batch (for which that game has not started yet)\n    const lobbies = GameLobbies.find({\n      batchId: batch._id,\n      status: \"running\",\n      timedOutAt: { $exists: false },\n      gameId: { $exists: false }\n    }).fetch();\n\n    if (lobbies.length === 0) {\n      // This is the same case as when there are no batches available.\n      return;\n    }\n\n    // Let's first try to find lobbies for which their queue isn't full yet\n    let lobbyPool = lobbies.filter(\n      l => l.availableCount > l.queuedPlayerIds.length\n    );\n\n    // If no lobbies still have \"availability\", just fill any lobby\n    if (lobbyPool.length === 0) {\n      lobbyPool = lobbies;\n    }\n\n    // Book proportially to total expected playerCount\n    const weigthedLobbyPool = lobbyPool.map(lobby => {\n      return {\n        value: lobby,\n        weight: lobby.availableCount\n      };\n    });\n\n    // Choose a lobby in the available weigthed pool\n    const lobby = weightedRandom(weigthedLobbyPool)();\n\n    // Adding the player to specified lobby queue\n    GameLobbies.update(lobby._id, {\n      $addToSet: {\n        queuedPlayerIds: player._id\n      }\n    });\n\n    const gameLobbyId = lobby._id;\n    const $set = { gameLobbyId };\n\n    // Check if there will be instructions\n    let skipInstructions = lobby.debugMode;\n\n    // If there are no instruction, mark the player as ready immediately\n    if (skipInstructions) {\n      $set.readyAt = new Date();\n    }\n\n    Players.update(player._id, { $set });\n\n    // If there are no instruction, player is ready, notify the lobby\n    if (skipInstructions) {\n      GameLobbies.update(gameLobbyId, {\n        $addToSet: { playerIds: player._id }\n      });\n    }\n\n    return player._id;\n  }\n});\n\nexport const playerReady = new ValidatedMethod({\n  name: \"Players.methods.ready\",\n\n  validate: IdSchema.validator(),\n\n  async run({ _id }) {\n    if (!Meteor.isServer) {\n      return;\n    }\n\n    try {\n      // Lobby might be locked if game is currently being created.\n      // We retry until lobby is unlocked.\n      while (!assignToLobby(_id)) {\n        await sleep(1000);\n      }\n    } catch (error) {\n      console.error(\"Players.methods.ready\", error);\n    }\n  }\n});\n\nfunction assignToLobby(_id) {\n  const player = Players.findOne(_id);\n\n  if (!player) {\n    throw `unknown ready player: ${_id}`;\n  }\n  const { readyAt, gameLobbyId } = player;\n\n  if (readyAt) {\n    // Already ready\n    return true;\n  }\n\n  const lobby = GameLobbies.findOne(gameLobbyId);\n\n  if (!lobby) {\n    throw `unknown lobby for ready player: ${_id}`;\n  }\n\n  // GameLobby is locked.\n  if (gameLobbyLock[gameLobbyId]) {\n    return false;\n  }\n\n  // Game is Full, bail the player\n  if (lobby.playerIds.length === lobby.availableCount) {\n    // User already ready, something happened out of order\n    if (lobby.playerIds.includes(_id)) {\n      return true;\n    }\n\n    // Mark the player's participation attemp as failed if\n    // not already marked exited\n    Players.update(\n      {\n        _id,\n        exitAt: { $exists: false }\n      },\n      {\n        $set: {\n          exitAt: new Date(),\n          exitStatus: \"gameFull\"\n        }\n      }\n    );\n\n    return true;\n  }\n\n  // Try to update the GameLobby with the playerIds we just queried.\n  GameLobbies.update(\n    { _id: gameLobbyId, playerIds: lobby.playerIds },\n    {\n      $addToSet: { playerIds: _id }\n    }\n  );\n\n  // If the playerId insert succeeded (playerId WAS added to playerIds),\n  // mark the user record as ready and potentially start the individual\n  // lobby timer.\n  const lobbyUpdated = GameLobbies.findOne(gameLobbyId);\n  if (lobbyUpdated.playerIds.includes(_id)) {\n    // If it did work, mark player as ready\n    $set = { readyAt: new Date() };\n\n    // If it's an individual lobby timeout, mark the first timer as started.\n    const lobbyConfig = LobbyConfigs.findOne(lobbyUpdated.lobbyConfigId);\n    if (lobbyConfig.timeoutType === \"individual\") {\n      $set.timeoutStartedAt = new Date();\n      $set.timeoutWaitCount = 1;\n    }\n\n    Players.update(_id, { $set });\n    return true;\n  }\n\n  // If the playerId insert failed (playerId NOT added to playerIds), the\n  // playerIds has changed since it was queried and the lobby might not\n  // have any available slots left, loop and retry.\n  return false;\n}\n\nexport const updatePlayerData = new ValidatedMethod({\n  name: \"Players.methods.updateData\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    key: {\n      type: String\n    },\n    value: {\n      type: String\n    },\n    append: {\n      type: Boolean,\n      optional: true\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ playerId, key, value, append, noCallback }) {\n    const player = Players.findOne(playerId);\n    if (!player) {\n      throw new Error(\"player not found\");\n    }\n    // TODO check can update this record player\n\n    const val = JSON.parse(value);\n    let update = { [`data.${key}`]: val };\n    const modifier = append ? { $push: update } : { $set: update };\n\n    Players.update(playerId, modifier, {\n      autoConvert: false,\n      filter: false,\n      validate: false,\n      trimStrings: false,\n      removeEmptyStrings: false\n    });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnChange({\n        playerId,\n        player,\n        key,\n        value: val,\n        prevValue: player.data && player.data[key],\n        append\n      });\n    }\n  }\n});\n\nexport const markPlayerExitStepDone = new ValidatedMethod({\n  name: \"Players.methods.markExitStepDone\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    stepName: {\n      type: String\n    }\n  }).validator(),\n\n  run({ playerId, stepName }) {\n    const player = Players.findOne(playerId);\n    if (!player) {\n      throw new Error(\"player not found\");\n    }\n    // TODO check can update this record player\n\n    Players.update(playerId, { $addToSet: { exitStepsDone: stepName } });\n  }\n});\n\nexport const extendPlayerTimeoutWait = new ValidatedMethod({\n  name: \"Players.methods.extendTimeoutWait\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    }\n  }).validator(),\n\n  run({ playerId }) {\n    const player = Players.findOne(playerId);\n    if (!player) {\n      throw new Error(\"player not found\");\n    }\n\n    Players.update(playerId, {\n      $inc: { timeoutWaitCount: 1 },\n      $set: { timeoutStartedAt: new Date() }\n    });\n  }\n});\n\nexport const endPlayerTimeoutWait = new ValidatedMethod({\n  name: \"Players.methods.endTimeoutWait\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    }\n  }).validator(),\n\n  run({ playerId }) {\n    const player = Players.findOne(playerId);\n    if (!player) {\n      throw new Error(\"player not found\");\n    }\n\n    Players.update(playerId, {\n      $set: {\n        exitStatus: \"playerEndedLobbyWait\",\n        exitAt: new Date()\n      }\n    });\n    GameLobbies.update(player.gameLobbyId, {\n      $pull: {\n        playerIds: playerId\n        // We keep the player in queuedPlayerIds so they will still have the\n        // fact they were in a lobby available in the UI, and so we can show\n        // them the exit steps.\n      }\n    });\n  }\n});\n\nexport const earlyExitPlayer = new ValidatedMethod({\n  name: \"Players.methods.admin.earlyExitPlayer\",\n\n  validate: new SimpleSchema({\n    exitReason: {\n      label: \"Reason for Exit\",\n      type: String,\n      regEx: /[a-zA-Z0-9_]+/\n    },\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    gameId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    }\n  }).validator(),\n\n  run({ exitReason, playerId, gameId }) {\n    if (!Meteor.isServer) {\n      return;\n    }\n\n    const game = Games.findOne(gameId);\n\n    if (!game) {\n      throw new Error(\"game not found\");\n    }\n\n    if (game && game.finishedAt) {\n      if (Meteor.isDevelopment) {\n        console.log(\"\\n\\ngame already ended!\");\n      }\n\n      return;\n    }\n\n    const currentPlayer = Players.findOne(playerId);\n\n    if (currentPlayer && currentPlayer.exitAt) {\n      if (Meteor.isDevelopment) {\n        console.log(\"\\nplayer already exited!\");\n      }\n\n      return;\n    }\n\n    Players.update(playerId, {\n      $set: {\n        exitAt: new Date(),\n        exitStatus: \"custom\",\n        exitReason\n      }\n    });\n\n    const players = Players.find({ gameId }).fetch();\n    const onlinePlayers = players.filter(player => !player.exitAt);\n\n    if (!onlinePlayers || (onlinePlayers && onlinePlayers.length === 0)) {\n      Games.update(gameId, {\n        $set: {\n          finishedAt: new Date(),\n          status: \"custom\",\n          endReason: \"finished_early\"\n        }\n      });\n\n      GameLobbies.update(\n        { gameId },\n        {\n          $set: {\n            status: \"custom\",\n            endReason: \"finished_early\"\n          }\n        }\n      );\n    }\n  }\n});\n\nexport const earlyExitPlayerLobby = new ValidatedMethod({\n  name: \"Players.methods.admin.earlyExitPlayerLobby\",\n\n  validate: new SimpleSchema({\n    exitReason: {\n      label: \"Reason for Exit\",\n      type: String,\n      regEx: /[a-zA-Z0-9_]+/\n    },\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    gameLobbyId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    }\n  }).validator(),\n\n  run({ exitReason, playerId, gameLobbyId }) {\n    if (!Meteor.isServer) {\n      return;\n    }\n\n    const gameLobby = GameLobbies.findOne(gameLobbyId);\n\n    if (!gameLobby) {\n      throw new Error(\"gameLobby not found\");\n    }\n\n    const currentPlayer = Players.findOne(playerId);\n\n    if (currentPlayer && currentPlayer.exitAt) {\n      if (Meteor.isDevelopment) {\n        console.log(\"\\nplayer already exited!\");\n      }\n\n      return;\n    }\n\n    Players.update(playerId, {\n      $set: {\n        exitAt: new Date(),\n        exitStatus: \"custom\",\n        exitReason\n      }\n    });\n  }\n});\n\nexport const retireSinglePlayer = new ValidatedMethod({\n  name: \"Players.methods.admin.retireSingle\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    }\n  }).validator(),\n\n  run({ playerId }) {\n    if (!playerId) {\n      throw new Error(\"empty playerId\");\n    }\n\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const player = Players.findOne({\n      _id: playerId,\n      retiredAt: { $exists: false }\n    });\n\n    if (!player) {\n      throw new Error(\"Player not found\");\n    }\n\n    const timestamp = new Date().toISOString();\n\n    Players.update(playerId, {\n      $set: {\n        id: `${player.id} (Retired custom at ${timestamp})`,\n        retiredAt: new Date(),\n        retiredReason: \"custom\"\n      }\n    });\n\n    return player;\n  }\n});\n\nexport const retireGameFullPlayers = new ValidatedMethod({\n  name: \"Players.methods.admin.retireGameFull\",\n\n  validate: new SimpleSchema({\n    retiredReason: {\n      label: \"Retired Reason\",\n      type: String,\n      optional: true,\n      allowedValues: exitStatuses\n    }\n  }).validator(),\n\n  run({ retiredReason }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    const players = Players.find({\n      exitStatus: retiredReason,\n      retiredAt: { $exists: false }\n    }).fetch();\n\n    const timestamp = new Date().toISOString();\n\n    for (let i = 0; i < players.length; i++) {\n      const player = players[i];\n\n      Players.update(player._id, {\n        $set: {\n          id: `${player.id} (Retired ${retiredReason} at ${timestamp})`,\n          retiredAt: new Date(),\n          retiredReason\n        }\n      });\n    }\n\n    return players.length;\n  }\n});\n\nexport const playerWasRetired = new ValidatedMethod({\n  name: \"Players.methods.playerWasRetired\",\n\n  validate: IdSchema.validator(),\n\n  run({ _id }) {\n    return Boolean(\n      Players.findOne({\n        _id,\n        exitStatus: { $exists: true },\n        retiredAt: { $exists: true }\n      })\n    );\n  }\n});\n\nexport const updatePlayerStatus = new ValidatedMethod({\n  name: \"Players.methods.updateStatus\",\n\n  validate: new SimpleSchema({\n    playerId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n\n    idle: {\n      type: Boolean\n    },\n\n    lastActivityAt: {\n      type: Date\n    }\n  }).validator(),\n\n  run({ playerId, idle, lastActivityAt }) {\n    if (Meteor.isServer) {\n      const playerIdConn = shared.playerIdForConn(this.connection);\n      if (!playerIdConn) {\n        return;\n      }\n      if (playerId !== playerIdConn) {\n        console.error(\n          \"Attempting to update player status from wrong connection\"\n        );\n        return;\n      }\n    }\n\n    Players.update(playerId, {\n      $set: {\n        idle,\n        lastActivityAt\n      }\n    });\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\nimport { Counter } from \"../../lib/counters\";\nimport { BelongsTo, TimestampSchema, UserDataSchema } from \"../default-schemas\";\n\nclass PlayersCollection extends Mongo.Collection {\n  insert(doc, callback) {\n    doc.index = Counter.inc(\"players\");\n    return super.insert(doc, callback);\n  }\n}\n\nexport const Players = new PlayersCollection(\"players\");\n\nexport const exitStatuses = [\n  \"gameFull\",\n  \"gameCancelled\",\n  \"gameLobbyTimedOut\",\n  \"playerEndedLobbyWait\",\n  \"playerLobbyTimedOut\",\n  \"finished\",\n  \"cancelled\",\n  \"failed\",\n  \"custom\"\n];\n\nPlayers.schema = new SimpleSchema({\n  // The Player `id` is used to uniquely identify the player to avoid\n  // having a user play multiple times. It can be any string, for example\n  // an email address, a Mechanical Turk ID, a manually assigned participation\n  // number (saved as string), etc...\n  id: {\n    type: String,\n    max: 256\n  },\n\n  // True if the player is currently online and idle\n  idle: {\n    label: \"Idle\",\n    type: Boolean,\n    optional: true\n  },\n\n  // True if the player is currently online\n  online: {\n    label: \"Online\",\n    type: Boolean,\n    optional: true\n  },\n\n  // Time when the player was last seen online and active\n  lastActivityAt: {\n    label: \"Last Activity At\",\n    type: Date,\n    optional: true\n  },\n\n  lastLogin: { type: Object, optional: true },\n  \"lastLogin.at\": { type: Date, optional: true },\n  \"lastLogin.ip\": { type: String, optional: true },\n  \"lastLogin.userAgent\": { type: String, optional: true },\n\n  // Auto-incremented number assigned to players as they are created\n  index: {\n    type: SimpleSchema.Integer\n  },\n\n  // params contains any URL passed parameters\n  urlParams: {\n    type: Object,\n    blackbox: true,\n    defaultValue: {}\n  },\n\n  bot: {\n    label: \"Name of bot definition if player is a bot\",\n    type: String,\n    optional: true,\n    index: 1\n  },\n\n  // Time at witch the player became ready (done with intro)\n  readyAt: {\n    label: \"Ready At\",\n    type: Date,\n    optional: true\n  },\n\n  timeoutStartedAt: {\n    label: \"Time the first player arrived in the lobby\",\n    type: Date,\n    optional: true\n  },\n  timeoutWaitCount: {\n    label: \"Number of time the player has waited for timeoutStartedAt\",\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 1\n  },\n\n  exitStepsDone: {\n    type: Array,\n    defaultValue: []\n  },\n  \"exitStepsDone.$\": {\n    type: String\n  },\n\n  // Failed fields are filled when the player's participation in a game failed\n  exitAt: {\n    label: \"Exited At\",\n    type: Date,\n    optional: true\n  },\n  exitStatus: {\n    label: \"Failed Status\",\n    type: String,\n    optional: true,\n    allowedValues: exitStatuses\n  },\n  exitReason: {\n    label: \"Failed Reason\",\n    type: String,\n    optional: true,\n    regEx: /[a-zA-Z0-9_]+/\n  },\n\n  // A player can be retired. Retired players should no longer be used in active\n  // game, but NOTHING is done in the code to block that from happening. It's\n  // more of an indicator for debugging down the line.\n  retiredAt: {\n    label: \"Retired At\",\n    type: Date,\n    optional: true\n  },\n  retiredReason: {\n    label: \"Retired Reason\",\n    type: String,\n    optional: true,\n    allowedValues: exitStatuses\n  }\n});\n\nPlayers.schema.extend(TimestampSchema);\nPlayers.schema.extend(UserDataSchema);\nPlayers.schema.extend(BelongsTo(\"Games\", false));\nPlayers.schema.extend(BelongsTo(\"GameLobbies\", false));\nPlayers.attachSchema(Players.schema);\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { Rounds } from \"./rounds.js\";\nimport shared from \"../../shared.js\";\n\nexport const updateRoundData = new ValidatedMethod({\n  name: \"Rounds.methods.updateData\",\n\n  validate: new SimpleSchema({\n    roundId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    key: {\n      type: String\n    },\n    value: {\n      type: String\n    },\n    append: {\n      type: Boolean,\n      optional: true\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ roundId, key, value, append, noCallback }) {\n    const round = Rounds.findOne(roundId);\n    if (!round) {\n      throw new Error(\"round not found\");\n    }\n    // TODO check can update this record round\n\n    const val = JSON.parse(value);\n    let update = { [`data.${key}`]: val };\n    const modifier = append ? { $push: update } : { $set: update };\n\n    Rounds.update(roundId, modifier, {\n      autoConvert: false,\n      filter: false,\n      validate: false,\n      trimStrings: false,\n      removeEmptyStrings: false\n    });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnChange({\n        conn: this.connection,\n        roundId,\n        round,\n        key,\n        value: val,\n        prevValue: round.data && round.data[key],\n        append\n      });\n    }\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\n\nimport {\n  BelongsTo,\n  HasManyByRef,\n  UserDataSchema,\n  TimestampSchema\n} from \"../default-schemas\";\n\nexport const Rounds = new Mongo.Collection(\"rounds\");\n\nRounds.schema = new SimpleSchema({\n  // Index represents the 0 based position of the current round in the ordered\n  // list of a game's rounds. For display, add 1.\n  index: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 9999 // That's a lot of rounds...\n  }\n});\n\nRounds.schema.extend(TimestampSchema);\nRounds.schema.extend(UserDataSchema);\nRounds.schema.extend(HasManyByRef(\"Stages\"));\nRounds.schema.extend(BelongsTo(\"Games\"));\nRounds.schema.extend(HasManyByRef(\"PlayerRounds\"));\nRounds.attachSchema(Rounds.schema);\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { Stages } from \"./stages.js\";\nimport shared from \"../../shared.js\";\n\nexport const updateStageData = new ValidatedMethod({\n  name: \"Stages.methods.updateData\",\n\n  validate: new SimpleSchema({\n    stageId: {\n      type: String,\n      regEx: SimpleSchema.RegEx.Id\n    },\n    key: {\n      type: String\n    },\n    value: {\n      type: String\n    },\n    append: {\n      type: Boolean,\n      optional: true\n    },\n    noCallback: {\n      type: Boolean,\n      optional: true\n    }\n  }).validator(),\n\n  run({ stageId, key, value, append, noCallback }) {\n    const stage = Stages.findOne(stageId);\n    if (!stage) {\n      throw new Error(\"stage not found\");\n    }\n    // TODO check can update this record stage\n\n    const val = JSON.parse(value);\n    let update = { [`data.${key}`]: val };\n    const modifier = append ? { $push: update } : { $set: update };\n\n    Stages.update(stageId, modifier, {\n      autoConvert: false,\n      filter: false,\n      validate: false,\n      trimStrings: false,\n      removeEmptyStrings: false\n    });\n\n    if (Meteor.isServer && !noCallback) {\n      shared.callOnChange({\n        conn: this.connection,\n        stageId,\n        stage,\n        key,\n        value: val,\n        prevValue: stage.data && stage.data[key],\n        append\n      });\n    }\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\nimport moment from \"moment\";\n\nimport {\n  BelongsTo,\n  TimestampSchema,\n  UserDataSchema,\n  HasManyByRef\n} from \"../default-schemas\";\nimport { Games } from \"../games/games\";\nimport { PlayerStages } from \"../player-stages/player-stages\";\nimport { Rounds } from \"../rounds/rounds\";\n\nexport const Stages = new Mongo.Collection(\"stages\");\n\nStages.helpers({\n  round() {\n    return Rounds.findOne(this.roundId);\n  }\n});\n\nStages.stagePaddingDuration = moment.duration(0.25, \"seconds\");\n\nStages.schema = new SimpleSchema({\n  // Index represents the 0 based position of the current stage in the ordered\n  // list of a all the game's stages. For display, add 1.\n  index: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 999999 // That's a lot of stages...\n  },\n  name: {\n    type: String,\n    max: 64\n  },\n  displayName: {\n    type: String,\n    max: 128\n    // TODO Add auto value to by default copy the name into the displayName?\n  },\n  // This will synchronize the clients timer start time and record start time\n  // for the record\n  startTimeAt: {\n    type: Date,\n    optional: true\n  },\n  durationInSeconds: {\n    type: SimpleSchema.Integer,\n    // One day, that's a lot, but could be \"weird\" experiment, yet no going nuts\n    // into hundreds of years for example.\n    max: 24 * 60 * 60,\n    // It would be difficult to manage a timer that is less than 5s given all\n    // the multi-peer synchronization going on.\n    min: 5\n  }\n});\n\nStages.schema.extend(TimestampSchema);\nStages.schema.extend(UserDataSchema);\nStages.schema.extend(BelongsTo(\"Rounds\"));\nStages.schema.extend(BelongsTo(\"Games\"));\nStages.schema.extend(HasManyByRef(\"PlayerStages\"));\nStages.attachSchema(Stages.schema);\n","import { ValidatedMethod } from \"meteor/mdg:validated-method\";\nimport SimpleSchema from \"simpl-schema\";\n\nimport { IdSchema } from \"../default-schemas.js\";\nimport { FactorTypes } from \"../factor-types/factor-types.js\";\nimport { Factors } from \"../factors/factors.js\";\nimport { Treatments } from \"./treatments\";\n\nexport const createTreatment = new ValidatedMethod({\n  name: \"Treatments.methods.create\",\n\n  validate: new SimpleSchema({\n    name: {\n      type: String,\n      max: 256,\n      optional: true\n    },\n    factorIds: {\n      type: Array,\n      label: \"Factors\"\n    },\n    \"factorIds.$\": {\n      type: String\n    }\n  }).validator(),\n\n  run(treatment) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n\n    // Validate the required factor types\n    const requiredFactorTypes = FactorTypes.find({\n      required: true,\n      archivedAt: { $exists: false }\n    }).fetch();\n\n    if (requiredFactorTypes.length > 0) {\n      const createdFactors = Factors.find({\n        _id: { $in: treatment.factorIds }\n      }).fetch();\n      const createdFactorTypes = FactorTypes.find({\n        $and: [\n          {\n            _id: {\n              $in: createdFactors.map(f => f.factorTypeId)\n            }\n          },\n          { required: true }\n        ]\n      }).fetch();\n\n      if (requiredFactorTypes.length !== createdFactorTypes.length) {\n        throw new Error(\"Fill all required factors!\");\n      }\n    }\n\n    Treatments.insert(treatment);\n  }\n});\n\nexport const updateTreatment = new ValidatedMethod({\n  name: \"Treatments.methods.update\",\n\n  validate: Treatments.schema\n    .pick(\"name\")\n    .extend(\n      new SimpleSchema({\n        archived: {\n          type: Boolean,\n          optional: true\n        }\n      })\n    )\n    .extend(IdSchema)\n    .validator(),\n\n  run({ _id, name, archived }) {\n    if (!this.userId) {\n      throw new Error(\"unauthorized\");\n    }\n    const treatment = Treatments.findOne(_id);\n    if (!treatment) {\n      throw new Error(\"not found\");\n    }\n\n    const $set = {},\n      $unset = {};\n    if (name !== undefined) {\n      $set.name = name;\n    }\n    if (archived !== undefined) {\n      if (archived) {\n        if (treatment.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $set.archivedAt = new Date();\n        $set.archivedById = this.userId;\n      }\n      if (!archived) {\n        if (!treatment.archivedAt) {\n          throw new Error(\"not found\");\n        }\n\n        $unset.archivedAt = true;\n        $unset.archivedById = true;\n      }\n    }\n\n    const modifier = {};\n    if (Object.keys($set).length > 0) {\n      modifier.$set = $set;\n    }\n    if (Object.keys($unset).length > 0) {\n      modifier.$unset = $unset;\n    }\n    if (Object.keys(modifier).length === 0) {\n      return;\n    }\n\n    Treatments.update(_id, modifier);\n  }\n});\n","import SimpleSchema from \"simpl-schema\";\n\nimport { Factors } from \"../factors/factors.js\";\nimport { FactorTypes } from \"../factor-types/factor-types.js\";\nimport { TimestampSchema, ArchivedSchema } from \"../default-schemas\";\n\nexport const Treatments = new Mongo.Collection(\"treatments\");\n\nTreatments.helpers({\n  displayName() {\n    return this.name || _.map(this.factors(), c => c.fullLabel()).join(\" - \");\n  },\n\n  factor(name) {\n    const type = FactorTypes.findOne({ name });\n    if (!type) {\n      return;\n    }\n    return this.factors().find(c => c.factorTypeId === type._id);\n  },\n\n  factors() {\n    const query = { _id: { $in: this.factorIds } };\n    return Factors.find(query).fetch();\n  },\n\n  factorsObject() {\n    const doc = {};\n    this.factors().forEach(c => {\n      const type = FactorTypes.findOne(c.factorTypeId);\n      doc[type.name] = c.value;\n    });\n    return doc;\n  }\n});\n\nTreatments.schema = new SimpleSchema({\n  // Optional experimenter given name for the treatment\n  name: {\n    type: String,\n    max: 256,\n    optional: true,\n    custom() {\n      if (this.isSet && Treatments.find({ name: this.value }).count() > 0) {\n        return \"notUnique\";\n      }\n    }\n\n    // regEx: /^[a-zA-Z0-9_]+$/\n  },\n\n  // Array of factorIds\n  factorIds: {\n    type: Array,\n    minCount: FactorTypes.requiredTypes,\n    label: \"Factors\",\n    index: true,\n    denyUpdate: true\n    // // Custom validation verifies required factors are present and that\n    // // there are no duplicate factors with the same key. We cannot easily\n    // // verify one of each factors is present.\n    // custom() {\n    //   if (!Meteor.isServer || !this.isInsert) {\n    //     return;\n    //   }\n\n    //   const factors = Factors.find({ _id: { $in: this.value } }).fetch();\n    //   const doc = {};\n    //   factors.forEach(c => (doc[c.type] = c.value));\n\n    //   const context = factorsSchema.newContext();\n    //   context.validate(doc);\n    //   if (!context.isValid()) {\n    //     const error = {\n    //       name: \"factorIds\",\n    //       type: \"invalid\",\n    //       details: context.validationErrors()\n    //     };\n    //     this.addValidationErrors([error]);\n    //     return \"invalid\";\n    //   }\n    // }\n  },\n\n  \"factorIds.$\": {\n    type: String,\n    regEx: SimpleSchema.RegEx.Id,\n    label: `Factor Item`\n  }\n});\n\nTreatments.schema.addDocValidator(({ factorIds }) => {\n  if (!this.isInsert) {\n    return [];\n  }\n  const query = {\n    factorIds: {\n      $size: factorIds.length,\n      $all: factorIds\n    }\n  };\n  if (Boolean(Treatments.findOne(query))) {\n    return [\n      {\n        name: \"factorIds\",\n        type: \"notUnique\"\n      }\n    ];\n  }\n  return [];\n});\n\nTreatments.schema.extend(TimestampSchema);\nTreatments.schema.extend(ArchivedSchema);\nTreatments.attachSchema(Treatments.schema);\n","import React from \"react\";\n\nfunction isClassComponent(component) {\n  return typeof component === \"function\" &&\n    !!component.prototype.isReactComponent\n    ? true\n    : false;\n}\n\nfunction isFunctionComponent(component) {\n  return typeof component === \"function\" &&\n    String(component).includes(\"return React.createElement\")\n    ? true\n    : false;\n}\n\nfunction isReactComponent(component) {\n  return isClassComponent(component) || isFunctionComponent(component)\n    ? true\n    : false;\n}\n\nfunction isElement(element) {\n  return React.isValidElement(element);\n}\n\nfunction isDOMTypeElement(element) {\n  return isElement(element) && typeof element.type === \"string\";\n}\n\nfunction isCompositeTypeElement(element) {\n  return isElement(element) && typeof element.type === \"function\";\n}\n\nmodule.exports = {\n  isClassComponent,\n  isFunctionComponent,\n  isReactComponent,\n  isElement,\n  isDOMTypeElement,\n  isCompositeTypeElement\n};\n","// Named Atomic counters\n//\n// Example:\n//    Counter.inc(\"something\") // => 1\n//    Counter.inc(\"something\") // => 2\n//    Counter.inc(\"something\", 8) // => 10\n//    Counter.inc(\"something\", -5) // => 5\n//    Counter.set(\"something\", 42) // => 42\n\nlet incset;\nif (Meteor.isServer) {\n  const raw = new Mongo.Collection(\"counters\").rawCollection();\n  findAndModify = Meteor.wrapAsync(raw.findAndModify, raw);\n\n  incset = op => (name, amount = 1) => {\n    const res = findAndModify(\n      { _id: name }, // query\n      null, // sort\n      { [`$${op}`]: { value: amount } }, // update\n      { new: true, upsert: true } // options\n    );\n    return res.value && res.value.value;\n  };\n} else {\n  incset = op => () => {};\n}\n\nexport const Counter = {\n  inc: incset(\"inc\"),\n  set: incset(\"set\")\n};\n","// ActivityMonitor tracks user activity and can emit an idle/active indicator\n// and a last active timestamp, in the browser.\n\nimport { Tracker } from \"meteor/tracker\";\nimport { TimeSync } from \"meteor/mizzao:timesync\";\n\n// idleThreshold is the duration in ms without activity after which we declare\n// the user idle.\nconst idleThreshold = 60000;\n\n// Interval at which to check if there was activity detected.\nconst checkInterval = 1000;\n\nlet monitorInterval = null;\nlet idle = false;\nlet lastActivityTime = TimeSync.serverTime();\n\nconst idleDep = new Tracker.Dependency();\nconst activityDep = new Tracker.Dependency();\n\nlet focused = document.hasFocus();\n\nfunction monitor(hasActivity) {\n  const now = Tracker.nonreactive(TimeSync.serverTime);\n\n  // Time hasn't synced yet\n  if (!now) {\n    return;\n  }\n\n  if (!lastActivityTime || (hasActivity && focused)) {\n    lastActivityTime = now;\n    activityDep.changed();\n  }\n\n  const newIdleness = !(focused && now - lastActivityTime < idleThreshold);\n  if (newIdleness !== idle) {\n    idle = newIdleness;\n    idleDep.changed();\n  }\n}\nconst trueMonitor = _.bind(monitor, null, true);\nconst signalActivity = _.throttle(trueMonitor, checkInterval);\nconst signalInactivity = () => monitor(false);\nfunction startup() {\n  if (monitorInterval) {\n    return;\n  }\n\n  // Listen for mouse and keyboard events on window\n  // TODO other stuff - e.g. touch events?\n  window.addEventListener(\"mousemove\", signalActivity);\n  window.addEventListener(\"click\", signalActivity);\n  window.addEventListener(\"keydown\", signalActivity);\n\n  // catch window blur events when requested and where supported\n  // We'll use jQuery here instead of window.blur so that other code can attach blur events:\n  // http://stackoverflow.com/q/22415296/586086\n  window.addEventListener(\"blur\", () => {\n    focused = false;\n    signalInactivity();\n  });\n  window.addEventListener(\"focus\", () => {\n    focused = true;\n    signalActivity();\n  });\n\n  // First check initial state if window loaded while blurred\n  // Some browsers don't fire focus on load: http://stackoverflow.com/a/10325169/586086\n  focused = document.hasFocus();\n\n  lastActivityTime = Tracker.nonreactive(TimeSync.serverTime);\n  activityDep.changed();\n\n  monitorInterval = Meteor.setInterval(monitor, checkInterval);\n}\n\nexport const ActivityMonitor = {\n  start() {\n    startup();\n  },\n\n  get isIdle() {\n    idleDep.depend();\n    return idle;\n  },\n\n  get isActive() {\n    idleDep.depend();\n    return !idle;\n  },\n\n  get lastActivityAt() {\n    activityDep.depend();\n\n    if (_.isNaN(lastActivityTime)) {\n      return null;\n    }\n\n    return new Date(lastActivityTime);\n  }\n};\n","import {\n  isClassComponent,\n  isFunctionComponent,\n  isReactComponent,\n  isElement\n} from \"./componentChecker\";\n\nexport const sleep = ms => {\n  return new Promise(function(resolve, _) {\n    setTimeout(() => {\n      resolve();\n    }, ms);\n  });\n};\n\nexport const weightedRandom = values => {\n  const samples = [];\n\n  for (var i = 0; i < values.length; i += 1) {\n    if (\n      !values[i] ||\n      !values[i].hasOwnProperty(\"value\") ||\n      !values[i].hasOwnProperty(\"weight\")\n    ) {\n      throw \"all values passed to weightedRandom must have a value and weight field\";\n    }\n    for (var j = 0; j < values[i].weight; j += 1) {\n      samples.push(values[i].value);\n    }\n  }\n\n  return () => samples[Math.floor(Math.random() * samples.length)];\n};\n\nexport const isReactComponents = components => {\n  let isValid = true;\n\n  if (components && _.isArray(components)) {\n    for (let i = 0; i < components.length; i++) {\n      if (\n        !isClassComponent(components[i]) &&\n        !isFunctionComponent(components[i]) &&\n        !isReactComponent(components[i]) &&\n        !isElement(components[i])\n      ) {\n        console.error(\"component is not a React Component!\", components[i]);\n        isValid = false;\n        break;\n      }\n    }\n  } else {\n    console.error(\"components is not Valid!\");\n    isValid = false;\n  }\n\n  return isValid;\n};\n\nlet STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/gm;\nlet ARGUMENT_NAMES = /(?:^|,)\\s*([^\\s,=]+)/g;\n\nexport const getFunctionParameters = func => {\n  let fnStr = func.toString().replace(STRIP_COMMENTS, \"\");\n  fnStr = fnStr.split(\"=>\")[0];\n  const argsList = fnStr.slice(fnStr.indexOf(\"(\") + 1, fnStr.indexOf(\")\"));\n  const result = argsList.match(ARGUMENT_NAMES);\n\n  if (result === null) {\n    return [];\n  } else {\n    let stripped = [];\n    for (let i = 0; i < result.length; i++) {\n      stripped.push(result[i].replace(/[\\s,]/g, \"\"));\n    }\n    return stripped;\n  }\n};\n\nexport const handleFactorValueErrorMessage = error => {\n  switch (error.type) {\n    case \"maxNumber\":\n    case \"maxString\":\n      return `Value must be less than or equal to  ${error.max} ${\n        error.type === \"maxString\" ? \"character(s)\" : \"\"\n      }.`;\n\n    case \"minNumber\":\n    case \"minString\":\n      return `Value must be greater than or equal to  ${error.min} ${\n        error.type === \"minString\" ? \"character(s)\" : \"\"\n      }.`;\n\n    case \"scopedUnique\":\n      return `${error.name} must be unique.`;\n\n    default:\n      return \"Unknown Error\";\n  }\n};\n","// Import modules used by both client and server through a single index entry point\n// e.g. useraccounts configuration file.\n\nimport \"../../api/schema-helpers.js\";\n","// This page work on saving a login token into a cookie for server requests\n// such as data export.\n//\n// Note: this is suboptimal, we are hacking the internals of account:base, but\n// there are no clea ways to integrate with tha Meteor acccount system.\n\nMeteor.startup(() => {\n  resetToken();\n});\n\n// override Meteor._localStorage methods and resetToken accordingly\nconst originalSetItem = Meteor._localStorage.setItem;\nMeteor._localStorage.setItem = function(key, value) {\n  if (key === \"Meteor.loginToken\") {\n    Meteor.defer(resetToken);\n  }\n  originalSetItem.call(Meteor._localStorage, key, value);\n};\n\nconst originalRemoveItem = Meteor._localStorage.removeItem;\nMeteor._localStorage.removeItem = function(key) {\n  if (key === \"Meteor.loginToken\") {\n    Meteor.defer(resetToken);\n  }\n  originalRemoveItem.call(Meteor._localStorage, key);\n};\n\nfunction resetToken() {\n  const loginToken = Meteor._localStorage.getItem(\"Meteor.loginToken\");\n  const loginTokenExpires = new Date(\n    Meteor._localStorage.getItem(\"Meteor.loginTokenExpires\")\n  );\n\n  if (loginToken) {\n    setToken(loginToken, loginTokenExpires);\n  } else {\n    setToken(null, new Date());\n  }\n}\n\nfunction setToken(loginToken, expires) {\n  document.cookie = `meteor_login_token=${loginToken}; expires=${expires.toUTCString()}; path=/`;\n}\n","import { ActivityMonitor } from \"../../lib/monitor.js\";\nimport { getPlayerId } from \"../../ui/containers/IdentifiedContainer.jsx\";\nimport { updatePlayerStatus } from \"../../api/players/methods.js\";\n\ntry {\n  let playerId;\n  Meteor.startup(() => {\n    Tracker.autorun(function() {\n      const newPlayerId = getPlayerId();\n      if (newPlayerId === playerId) {\n        return;\n      }\n\n      if (newPlayerId) {\n        Tracker.autorun(function() {\n          const idle = ActivityMonitor.isIdle;\n          const lastActivityAt = ActivityMonitor.lastActivityAt;\n          if (!lastActivityAt) {\n            return;\n          }\n\n          const id = playerId || newPlayerId;\n\n          if (!id) {\n            return;\n          }\n\n          updatePlayerStatus.call({\n            playerId: id,\n            idle,\n            lastActivityAt\n          });\n        });\n      }\n      playerId = newPlayerId;\n    });\n  });\n} catch (error) {\n  console.error(error);\n}\n","// Import client startup through a single index entry point\nimport { FocusStyleManager } from \"@blueprintjs/core\";\n\nTimeSync.loggingEnabled = false;\n\nimport \"../both/index.js\";\nimport \"./accounts.js\";\nimport \"./style.js\";\nimport \"./idle.js\";\n\n// https://blueprintjs.com/docs/#core/accessibility.focus-management\nFocusStyleManager.onlyShowFocusOnTabs();\n","import \"normalize.css/normalize.css\";\n// import \"@blueprintjs/icons/lib/css/blueprint-icons.css\";\nimport \"@blueprintjs/core/lib/css/blueprint.css\";\n","import React from \"react\";\n\nexport default class About extends React.Component {\n  render() {\n    return <>Here be the presentation of the experiement(ers).</>;\n  }\n}\n","import {\n  Alert,\n  Button,\n  Classes,\n  Divider,\n  Intent,\n  Menu,\n  MenuItem,\n  Navbar,\n  NavbarDivider,\n  NavbarGroup,\n  NavbarHeading,\n  Popover\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport moment from \"moment\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { NavLink, Route, Switch } from \"react-router-dom\";\nimport AdminBatchesContainer from \"../containers/admin/AdminBatchesContainer.jsx\";\nimport AdminFactorsContainer from \"../containers/admin/AdminFactorsContainer.jsx\";\nimport AdminLobbyConfigsContainer from \"../containers/admin/AdminLobbyConfigsContainer.jsx\";\nimport AdminPlayersContainer from \"../containers/admin/AdminPlayersContainer.jsx\";\nimport AdminTreatmentsContainer from \"../containers/admin/AdminTreatmentsContainer.jsx\";\nimport AdminExport from \"./admin/AdminExport.jsx\";\nimport AdminGames from \"./admin/AdminGames.jsx\";\nimport { withStaticProps } from \"./Helpers.jsx\";\nimport { AlertToaster, SuccessToaster } from \"./Toasters.jsx\";\n\nconst configurationPaths = [\n  \"/admin/treatments\",\n  \"/admin/treatments/archived\",\n  \"/admin/factors\",\n  \"/admin/factors/archived\",\n  \"/admin/lobby-configurations\",\n  \"/admin/lobby-configurations/archived\"\n];\n\nconst NavBarLink = ({ path, name, exact = false }) => (\n  <NavLink\n    exact={exact}\n    to={path}\n    activeClassName={Classes.ACTIVE}\n    className={[Classes.BUTTON, Classes.MINIMAL].join(\" \")}\n  >\n    {name}\n  </NavLink>\n);\n\nexport default class Admin extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const mode = configurationPaths.includes(props.location.pathname)\n      ? \"configuration\"\n      : \"monitoring\";\n    this.state = { mode, isOpenResetGames: false, isOpenResetApp: false };\n    this.setBodyDark(mode);\n    this.uploadRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.redirectLoggedOut(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.redirectLoggedOut(nextProps);\n\n    if (this.props.location.pathname !== nextProps.location.pathname) {\n      const mode = configurationPaths.includes(nextProps.location.pathname)\n        ? \"configuration\"\n        : \"monitoring\";\n      if (mode !== this.state.mode) {\n        this.setState({ mode });\n        this.setBodyDark(mode);\n      }\n    }\n  }\n\n  handleConfigImport = () => {\n    this.uploadRef.current.click();\n  };\n\n  onImportConfigFileSelected = event => {\n    const file = event.currentTarget.files[0];\n    event.currentTarget.value = null;\n    if (!file) {\n      AlertToaster.show({ message: \"No file selected\" });\n      return;\n    }\n\n    this.setState({ importing: true });\n\n    var r = new FileReader();\n    r.onload = e => {\n      var text = e.target.result;\n      console.log(\n        \"Got the file: \" +\n          \"name: \" +\n          file.name +\n          \"type: \" +\n          file.type +\n          \"size: \" +\n          file.size +\n          \" bytes:\"\n      );\n\n      Meteor.call(\"adminImportConfiguration\", { text }, err => {\n        this.setState({ importing: false });\n        if (err) {\n          AlertToaster.show({ message: `Failed to import: ${err}` });\n          return;\n        } else {\n          SuccessToaster.show({\n            message: \"Import Successful!\"\n          });\n        }\n      });\n    };\n    r.readAsText(file);\n  };\n\n  handleConfigExport = () => {\n    this.setState({ exporting: true });\n    Meteor.call(\"adminExportConfiguration\", (err, yaml) => {\n      this.setState({ exporting: false });\n      if (err) {\n        AlertToaster.show({\n          message: `Failed to export configuration: ${err}`\n        });\n      } else {\n        console.log(yaml);\n        const ts = moment().format(\"YYYY-MM-DD HH-mm-ss\");\n        const filename = `Empirica Configuration - ${ts}.yaml`;\n        const a = document.createElement(\"a\");\n        a.setAttribute(\n          \"href\",\n          \"data:text/plain;charset=utf-8,\" + encodeURIComponent(yaml)\n        );\n        a.setAttribute(\"download\", filename);\n        a.style.display = \"none\";\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n      }\n    });\n  };\n\n  setMode = mode => {\n    const { router } = this.context;\n\n    let path;\n    switch (mode) {\n      case \"monitoring\":\n        path = \"/admin\";\n        break;\n      case \"configuration\":\n        path = \"/admin/treatments\";\n        break;\n      default:\n        console.error(`unknown mode: ${mode}`);\n        return;\n    }\n\n    this.setState({ mode });\n    router.history.push(path);\n  };\n\n  setBodyDark = mode => {\n    if (mode === \"configuration\") {\n      document.body.classList.add(Classes.DARK);\n    } else {\n      document.body.classList.remove(Classes.DARK);\n    }\n  };\n\n  resetDatabaseIsActived() {\n    return Meteor.isDevelopment || Meteor.settings.public.debug_resetDatabase;\n  }\n\n  handleOpenApp = () => {\n    window.open(\"/\", \"_blank\");\n  };\n\n  handleLogout = () => {\n    Meteor.logout();\n  };\n\n  handleResetGames = () => {\n    this.setState({ isOpenResetGames: false });\n    if (!this.resetDatabaseIsActived()) {\n      return;\n    }\n    Meteor.call(\"adminResetDB\", true, err => {\n      if (err) {\n        AlertToaster.show({ message: `Failed to reset games: ${err}` });\n        return;\n      } else {\n        SuccessToaster.show({\n          message: \"Games reset!\"\n        });\n      }\n    });\n  };\n\n  handleResetApp = () => {\n    this.setState({ isOpenResetApp: false });\n    if (!this.resetDatabaseIsActived()) {\n      return;\n    }\n    Meteor.call(\"adminResetDB\", err => {\n      if (err) {\n        AlertToaster.show({ message: `Failed to reset app: ${err}` });\n        return;\n      } else {\n        SuccessToaster.show({\n          message: \"App reset!\"\n        });\n      }\n    });\n  };\n\n  redirectLoggedOut(props) {\n    const { user, loggingIn, loginPath } = props;\n    const { router } = this.context;\n\n    if (!loggingIn && !user) {\n      router.history.push(loginPath || `/login`);\n    }\n  }\n\n  render() {\n    const { user, loggingIn } = this.props;\n    const {\n      mode,\n      importing,\n      exporting,\n      isOpenResetGames,\n      isOpenResetApp\n    } = this.state;\n\n    if (loggingIn || !user) {\n      return null;\n    }\n\n    const isConfigMode = mode === \"configuration\";\n\n    return (\n      <div className=\"admin\">\n        <Helmet>\n          <title>Empirica Admin</title>\n        </Helmet>\n        <Navbar className=\"header\">\n          <NavbarGroup align=\"left\">\n            <NavbarHeading>\n              <strong>Empirica</strong>\n              <Divider tagName=\"span\" />\n              <span className={Classes.TEXT_MUTED}>\n                {isConfigMode ? \"Configuration\" : \"Monitoring\"}\n              </span>\n            </NavbarHeading>\n            {isConfigMode ? (\n              <>\n                <NavBarLink path=\"/admin/treatments\" name=\"Treatments\" />\n                <NavBarLink path=\"/admin/factors\" name=\"Factors\" />\n                <NavBarLink\n                  path=\"/admin/lobby-configurations\"\n                  name=\"Lobby Configurations\"\n                />\n                <NavbarDivider />\n                <Button\n                  text=\"Import\"\n                  minimal\n                  icon={IconNames.IMPORT}\n                  onClick={this.handleConfigImport}\n                  loading={importing}\n                />\n                <input\n                  ref={this.uploadRef}\n                  onChange={this.onImportConfigFileSelected}\n                  type=\"file\"\n                />\n                <Button\n                  text=\"Export\"\n                  minimal\n                  icon={IconNames.EXPORT}\n                  onClick={this.handleConfigExport}\n                  loading={exporting}\n                />\n              </>\n            ) : (\n              <>\n                <NavBarLink exact path=\"/admin\" name=\"Batches\" />\n                <NavBarLink path=\"/admin/games\" name=\"Games\" />\n                <NavBarLink path=\"/admin/players\" name=\"Players\" />\n                <NavBarLink path=\"/admin/export\" name=\"Export\" />\n              </>\n            )}\n          </NavbarGroup>\n\n          <NavbarGroup align=\"right\">\n            {isConfigMode ? (\n              <Button\n                icon={IconNames.PLAY}\n                onClick={this.setMode.bind(this, \"monitoring\")}\n              >\n                Monitoring\n              </Button>\n            ) : (\n              <Button\n                icon={IconNames.COG}\n                onClick={this.setMode.bind(this, \"configuration\")}\n              >\n                Configuration\n              </Button>\n            )}\n            <NavbarDivider />\n            {this.resetDatabaseIsActived() ? (\n              <>\n                <Popover\n                  content={\n                    <Menu>\n                      <MenuItem\n                        intent={Intent.WARNING}\n                        icon={IconNames.ERASER}\n                        text=\"Reset Games\"\n                        onClick={() =>\n                          this.setState({ isOpenResetGames: true })\n                        }\n                      />\n\n                      <MenuItem\n                        intent={Intent.DANGER}\n                        icon={IconNames.TRASH}\n                        text=\"Reset Entire App\"\n                        onClick={() => this.setState({ isOpenResetApp: true })}\n                      />\n                    </Menu>\n                  }\n                >\n                  <Button\n                    className={Classes.MINIMAL}\n                    icon={IconNames.ERASER}\n                    text=\"Reset\"\n                  />\n                </Popover>\n\n                <Alert\n                  className={isConfigMode ? Classes.DARK : \"\"}\n                  canOutsideClickCancel\n                  canEscapeKeyCancel\n                  confirmButtonText=\"Reset Games\"\n                  cancelButtonText=\"Cancel\"\n                  intent={Intent.WARNING}\n                  icon={IconNames.ERASER}\n                  isOpen={isOpenResetGames}\n                  onCancel={() => this.setState({ isOpenResetGames: false })}\n                  onConfirm={this.handleResetGames}\n                >\n                  <p>\n                    This will remove batches/games/players and keep\n                    treatments/factors.\n                  </p>\n                  <p>Do you wish to continue?</p>\n                </Alert>\n\n                <Alert\n                  className={isConfigMode ? Classes.DARK : \"\"}\n                  canOutsideClickCancel\n                  canEscapeKeyCancel\n                  confirmButtonText=\"Reset Entire App\"\n                  cancelButtonText=\"Cancel\"\n                  intent={Intent.DANGER}\n                  icon={IconNames.TRASH}\n                  isOpen={isOpenResetApp}\n                  onCancel={() => this.setState({ isOpenResetApp: false })}\n                  onConfirm={this.handleResetApp}\n                >\n                  <p>You are about to delete all data in the DB!</p>\n                  <p>Are you sure you want to do that?</p>\n                </Alert>\n              </>\n            ) : (\n              \"\"\n            )}\n            <NavbarDivider />{\" \"}\n            <Button\n              className={Classes.MINIMAL}\n              icon={IconNames.PLAY}\n              text=\"Open App\"\n              onClick={this.handleOpenApp}\n            />\n            <NavbarDivider />{\" \"}\n            <Button\n              className={Classes.MINIMAL}\n              icon={IconNames.LOG_OUT}\n              text=\"Logout\"\n              onClick={this.handleLogout}\n            />\n          </NavbarGroup>\n        </Navbar>\n\n        <main>\n          <Switch>\n            <Route path=\"/admin\" exact component={AdminBatchesContainer} />\n            <Route\n              path=\"/admin/batches/archived\"\n              component={withStaticProps(AdminBatchesContainer, {\n                archived: true\n              })}\n            />\n            <Route path=\"/admin/games\" component={AdminGames} />\n            <Route\n              path=\"/admin/players/retired\"\n              component={withStaticProps(AdminPlayersContainer, {\n                retired: true\n              })}\n            />\n            <Route path=\"/admin/players\" component={AdminPlayersContainer} />\n            <Route path=\"/admin/export\" component={AdminExport} />\n            <Route\n              path=\"/admin/treatments/archived\"\n              component={withStaticProps(AdminTreatmentsContainer, {\n                archived: true\n              })}\n            />\n            <Route\n              path=\"/admin/treatments\"\n              component={withStaticProps(AdminTreatmentsContainer, {\n                archived: false\n              })}\n            />\n            <Route\n              path=\"/admin/lobby-configurations/archived\"\n              component={withStaticProps(AdminLobbyConfigsContainer, {\n                archived: true\n              })}\n            />\n            <Route\n              path=\"/admin/lobby-configurations\"\n              component={withStaticProps(AdminLobbyConfigsContainer, {\n                archived: false\n              })}\n            />\n            <Route\n              path=\"/admin/factors/archived\"\n              component={withStaticProps(AdminFactorsContainer, {\n                archived: true\n              })}\n            />\n            <Route path=\"/admin/factors\" component={AdminFactorsContainer} />\n          </Switch>\n        </main>\n      </div>\n    );\n  }\n}\n\nAdmin.propTypes = {\n  user: PropTypes.object, // Current meteor user\n  loggingIn: PropTypes.bool, // Current meteor user logging in\n  loading: PropTypes.bool // Subscription status\n};\n\nAdmin.contextTypes = {\n  router: PropTypes.object\n};\n","import React from \"react\";\n\nimport { Breadcrumb as Crumb, Classes } from \"@blueprintjs/core\";\n\nexport default class Breadcrumb extends React.Component {\n  render() {\n    const { round, stage } = this.props;\n\n    return (\n      <nav className=\"round-nav\">\n        <ul className={Classes.BREADCRUMBS}>\n          <li>\n            <Crumb text={`Round ${round.index + 1}`} />\n          </li>\n          {round.stages.map(s => {\n            const disabled = s.name !== stage.name;\n            const current = disabled ? \"\" : Classes.BREADCRUMB_CURRENT;\n            return (\n              <li key={s.name}>\n                <Crumb\n                  text={s.displayName}\n                  disabled={disabled}\n                  className={current}\n                />\n              </li>\n            );\n          })}\n        </ul>\n      </nav>\n    );\n  }\n}\n","import React from \"react\";\n\n// Centered is a simple helper for centered pages\nexport default class Centered extends React.Component {\n  render() {\n    return <div className=\"centered\">{this.props.children}</div>;\n  }\n}\n","import React from \"react\";\n\nimport { Button, Intent } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport Centered from \"./Centered.jsx\";\nimport { ConsentButtonContext } from \"./NewPlayer.jsx\";\n\nconst ConsentButton = ({ text = \"AGREE\", onConsent }) => (\n  <ConsentButtonContext.Consumer>\n    {consentCallback => (\n      <Button\n        text={text}\n        icon={IconNames.TICK}\n        intent={Intent.SUCCESS}\n        onClick={onConsent || consentCallback}\n      />\n    )}\n  </ConsentButtonContext.Consumer>\n);\n\nexport default class Consent extends React.Component {\n  render() {\n    return (\n      <Centered>\n        <div className=\"consent\">\n          <h1> Consent Form </h1>\n          <p>\n            This experiment is part of a MIT scientific project. Your decision\n            to participate in this experiment is entirely voluntary. There are\n            no known or anticipated risks to participating in this experiment.\n            There is no way for us to identify you. The only information we will\n            have, in addition to your responses, is the timestamps of your\n            interactions with our site. The results of our research may be\n            presented at scientific meetings or published in scientific\n            journals. Clicking on the \"AGREE\" button indicates that you are at\n            least 18 years of age, and agree to participate voluntary.\n          </p>\n          <ConsentButton />\n        </div>\n      </Centered>\n    );\n  }\n}\n\nexport { ConsentButton };\n","import React from \"react\";\n\nconst DelayedDisplay = (Component, delay = 100) =>\n  class extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = { visible: false };\n      // Don't immediatelly show, short loading times don't need a spinner\n      this.timeout = setTimeout(() => this.setState({ visible: true }), delay);\n    }\n\n    componentWillUnmount() {\n      clearTimeout(this.timeout);\n    }\n\n    render() {\n      const { visible } = this.state;\n\n      return (\n        <div className={`delayed ${visible ? \"visible\" : \"\"}`}>\n          <Component {...this.props} />\n        </div>\n      );\n    }\n  };\n\nexport default DelayedDisplay;\n","import { NonIdealState } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport React from \"react\";\n\nconst errExitStepMissingName = `\nAt least one Exit Step is missing a stepName. All Exist Steps Components must\nhave a stepName. E.g.:\n\nexport default class Thanks extends React.Component {\n  static stepName = \"Thanks\";\n  render() {\n    return (\n      <div className=\"thanks\">\n        <h3>Thanks!</h3>\n      </div>\n    );\n  }\n}\n\n`;\nconst errExitStepDups = dups =>\n  `All 'Exit Steps' must be unique (have a unique stepName). Duplicated: ${dups}.`;\n\nexport default class ExitSteps extends React.Component {\n  constructor(props) {\n    super(props);\n    const { game, player, steps: unfilteredSteps } = props;\n\n    // Checks steps have a name\n    const stepNames = unfilteredSteps.map(s => (s.stepName || \"\").trim());\n    for (let index = 0; index < stepNames.length; index++) {\n      const sname = stepNames[index];\n      if (_.isEmpty(sname)) {\n        alert(errExitStepMissingName);\n        console.error(errExitStepMissingName);\n        this.state = { failed: errExitStepMissingName };\n        return;\n      }\n    }\n\n    // Checks steps are unique\n    if (stepNames.length !== _.uniq(stepNames).length) {\n      const counts = {};\n      stepNames.forEach(n => (counts[n] = (counts[n] || 0) + 1));\n      const dups = _.compact(_.map(counts, (v, k) => (v > 1 ? k : null))).join(\n        \", \"\n      );\n      const err = errExitStepDups(dups);\n      alert(err);\n      this.state = { failed: err };\n      return null;\n    }\n\n    const done = player.exitStepsDone || [];\n    const steps = unfilteredSteps.filter(s => !done.includes(s.stepName));\n\n    this.state = { current: 0, steps };\n  }\n\n  onSubmit = data => {\n    let { onSubmit } = this.props;\n    let { steps, current } = this.state;\n    const Step = steps[current];\n    onSubmit(Step.stepName, data);\n    current = current + 1;\n    this.setState({ current });\n  };\n\n  render() {\n    const { failed, steps, current } = this.state;\n\n    if (failed) {\n      return failed;\n    }\n\n    if (_.isEmpty(steps)) {\n      return this.renderDefault();\n    }\n\n    const Step = steps[current];\n    const hasNext = steps.length - 1 > current;\n\n    return <Step {...this.props} hasNext={hasNext} onSubmit={this.onSubmit} />;\n  }\n\n  renderDefault() {\n    return (\n      <div className=\"game finished\">\n        <NonIdealState\n          icon={IconNames.TICK}\n          title=\"Finished!\"\n          description=\"Thank you for participating.\"\n        />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { addPlayerInput } from \"../../api/player-inputs/methods.js\";\nimport {\n  markPlayerExitStepDone,\n  playerReady\n} from \"../../api/players/methods.js\";\nimport GameLobby from \"../components/GameLobby.jsx\";\nimport GameLobbyContainer from \"../containers/GameLobbyContainer.jsx\";\nimport DefaultBreadcrumb from \"./Breadcrumb.jsx\";\nimport DelayedDisplay from \"./DelayedDisplay.jsx\";\nimport ExitSteps from \"./ExitSteps.jsx\";\nimport InstructionSteps from \"./InstructionSteps.jsx\";\nimport Loading from \"./Loading.jsx\";\nimport WaitingForServer from \"./WaitingForServer.jsx\";\n\nconst DelayedWaitingForServer = DelayedDisplay(WaitingForServer, 250);\nconst DelayedGameLobby = DelayedDisplay(GameLobby, 250);\n\nlet playerReadyClicked = false;\n\nexport default class Game extends React.Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    return !_.isEqual(this.props, nextProps);\n  }\n\n  render() {\n    const {\n      loading,\n      gameLobby,\n      treatment,\n      Round,\n      Breadcrumb,\n      Waiting,\n      Lobby,\n      exitSteps,\n      introSteps,\n      ...rest\n    } = this.props;\n    const { started, timedOut, game, player, round, stage } = rest;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (player.exitAt) {\n      return (\n        <ExitSteps\n          {...rest}\n          steps={exitSteps(game || gameLobby, player)}\n          game={game || gameLobby}\n          player={player}\n          onSubmit={(stepName, data) => {\n            const playerId = player._id;\n            markPlayerExitStepDone.call({ playerId, stepName });\n            // Checkig for data.nativeEvent, as that indicates the data is an\n            // event object dispached by React.\n            if (data && !data.nativeEvent) {\n              try {\n                const encoded = JSON.stringify(data);\n                addPlayerInput.call({\n                  playerId,\n                  data: encoded,\n                  gameId: game && game._id,\n                  gameLobbyId: game ? null : gameLobby && gameLobby._id\n                });\n              } catch (e) {\n                console.error(\"could not encode data returned by onSubmit\", e);\n              }\n            }\n          }}\n        />\n      );\n    }\n\n    if (!game) {\n      if (playerReadyClicked) {\n        return <Loading />;\n      }\n\n      if (player.readyAt) {\n        const gameLobbyProps = {\n          ...rest,\n          gameLobby,\n          game: gameLobby,\n          treatment,\n          player\n        };\n\n        return (\n          <GameLobbyContainer {...gameLobbyProps}>\n            {Lobby ? (\n              <Lobby {...gameLobbyProps} />\n            ) : (\n              <DelayedGameLobby {...gameLobbyProps} />\n            )}\n          </GameLobbyContainer>\n        );\n      }\n\n      return (\n        <InstructionSteps\n          {...rest}\n          introSteps={introSteps}\n          treatment={treatment}\n          player={player}\n          onDone={() => {\n            playerReadyClicked = true;\n            playerReady.call({ _id: player._id }, () => {\n              playerReadyClicked = false;\n            });\n          }}\n        />\n      );\n    }\n\n    let content;\n    if (timedOut || !started) {\n      if (Waiting) {\n        content = <Waiting />;\n      } else if (treatment.factor(\"playerCount\").value === 1) {\n        content = <Loading />;\n      } else {\n        content = <DelayedWaitingForServer />;\n      }\n    } else {\n      content = <Round {...rest} />;\n    }\n\n    const BC = Breadcrumb !== undefined ? Breadcrumb : DefaultBreadcrumb;\n    const breadcrumb = BC && (\n      <BC game={game} player={player} round={round} stage={stage} />\n    );\n\n    return (\n      <div className=\"game\">\n        {breadcrumb}\n        {content}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport { Alert, Intent, NonIdealState } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { CoreWrapper } from \"./Helpers.jsx\";\nimport {\n  endPlayerTimeoutWait,\n  extendPlayerTimeoutWait\n} from \"../../api/players/methods.js\";\n\nexport default class GameLobby extends React.Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    return !_.isEqual(this.props, nextProps);\n  }\n\n  handleWaitLonger = () => {\n    extendPlayerTimeoutWait.call({ playerId: this.props.player._id });\n  };\n\n  handleExitNow = () => {\n    endPlayerTimeoutWait.call({ playerId: this.props.player._id });\n  };\n\n  render() {\n    const { gameLobby, treatment, timedOut, lobbyConfig, player } = this.props;\n\n    const total = treatment.factor(\"playerCount\").value;\n    const exisiting = gameLobby.playerIds.length;\n\n    if (exisiting >= total) {\n      return (\n        <CoreWrapper>\n          <div className=\"game-lobby\">\n            <NonIdealState\n              icon={IconNames.PLAY}\n              title=\"Game loading...\"\n              description=\"Your game will be starting shortly, get ready!\"\n            />\n          </div>\n        </CoreWrapper>\n      );\n    }\n\n    const showExtensionAlert =\n      timedOut &&\n      lobbyConfig.timeoutType === \"individual\" &&\n      lobbyConfig.extendCount >= player.timeoutWaitCount;\n\n    return (\n      <CoreWrapper>\n        <div className=\"game-lobby\">\n          <NonIdealState\n            icon={IconNames.TIME}\n            title=\"Lobby\"\n            description={\n              <>\n                <p>Please wait for the game to be ready...</p>\n                <p>\n                  {exisiting} / {total} players ready.\n                </p>\n              </>\n            }\n          />\n        </div>\n        <Alert\n          intent={Intent.PRIMARY}\n          isOpen={showExtensionAlert}\n          confirmButtonText=\"Wait Longer\"\n          cancelButtonText=\"Exit Now\"\n          onConfirm={this.handleWaitLonger}\n          onCancel={this.handleExitNow}\n        >\n          <p>\n            Sorry you have been waiting for a while. Do you wish to wait longer\n            or exit now?\n          </p>\n        </Alert>\n      </CoreWrapper>\n    );\n  }\n}\n","import React from \"react\";\n\nimport { Classes, Icon } from \"@blueprintjs/core\";\n\nexport const Heading = ({\n  level = \"h1\",\n  children,\n  icon,\n  iconSize,\n  className,\n  ...rest\n}) => {\n  const classNames = [Classes.HEADING];\n  if (className) {\n    classNames.push(className);\n  }\n  return React.createElement(\n    level,\n    { className: classNames.join(\" \"), ...rest },\n    <>\n      {icon ? (\n        <>\n          <Icon icon={icon} iconSize={iconSize} />{\" \"}\n        </>\n      ) : null}\n      {children}\n    </>\n  );\n};\n\nexport const H1 = props => {\n  return <Heading level=\"h1\" {...props} />;\n};\n\nexport const H2 = props => {\n  return <Heading level=\"h2\" {...props} />;\n};\n\nexport const H3 = props => {\n  return <Heading level=\"h3\" {...props} />;\n};\n\nexport const H4 = props => {\n  return <Heading level=\"h4\" {...props} />;\n};\n\nexport const H5 = props => {\n  return <Heading level=\"h5\" {...props} />;\n};\n\nexport const H6 = props => {\n  return <Heading level=\"h6\" {...props} />;\n};\n","import React from \"react\";\n\nimport { Icon, Tooltip, Position } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nconst HelpTooltip = ({ content }) => (\n  <Tooltip\n    className=\"help-tooltip-wrapper\"\n    content={<span className=\"help-tooltip\">{content}</span>}\n    position={Position.TOP}\n  >\n    <Icon className=\"help-tooltip-icon\" icon={(IconNames = \"help\")} />\n  </Tooltip>\n);\n\nexport default HelpTooltip;\n","import React from \"react\";\n\nexport const DevNote = ({ children, block = false }) =>\n  block ? (\n    <p className=\"devnote\">\n      <strong>DevNote</strong> {children}\n    </p>\n  ) : (\n    <span className=\"devnote\">\n      <strong>DevNote</strong> {children}\n    </span>\n  );\n\nexport const CoreWrapper = ({ children }) => (\n  <div className=\"core\">{children}</div>\n);\n\nexport const withStaticProps = (WrappedComponent, props) => {\n  return class extends React.Component {\n    render() {\n      return <WrappedComponent {...props} {...this.props} />;\n    }\n  };\n};\n","import React from \"react\";\nimport Loading from \"./Loading.jsx\";\n\nexport default class InstructionSteps extends React.Component {\n  state = { current: 0 };\n\n  componentDidMount() {\n    this.setIntroStepIndex();\n  }\n\n  setIntroStepIndex() {\n    const { player } = this.props;\n    if (!window.currentIntroStep) {\n      window.currentIntroStep = {};\n      return;\n    }\n\n    const currentIntroStep = window.currentIntroStep[player._id];\n    if (!currentIntroStep) {\n      return;\n    }\n\n    this.setState({ current: currentIntroStep });\n  }\n\n  componentWillMount() {\n    const { introSteps, treatment, onDone } = this.props;\n\n    const factors = treatment.factorsObject();\n    const steps = introSteps({ treatment: factors }, factors);\n\n    const noInstruction = !steps || steps.length === 0;\n\n    if (noInstruction) {\n      onDone();\n    }\n\n    this.setState({ steps, noInstruction });\n  }\n\n  onNext = () => {\n    let { onDone, player } = this.props;\n    let { steps, current } = this.state;\n    current = current + 1;\n    if (current >= steps.length) {\n      onDone();\n      return;\n    }\n    this.setState({ current });\n    window.currentIntroStep[player._id] = current;\n  };\n\n  onPrev = () => {\n    const { player } = this.props;\n    let current = this.state.current - 1;\n\n    this.setState({ current });\n    window.currentIntroStep[player._id] = current;\n  };\n\n  resetIntroSteps = () => {\n    const { player } = this.props;\n    this.setState({ current: 0 });\n\n    if (!window.currentIntroStep) {\n      return;\n    }\n\n    if (!window.currentIntroStep[player._id]) {\n      return;\n    }\n\n    window.currentIntroStep[player._id] = 0;\n  };\n\n  render() {\n    const { treatment, player, ...rest } = this.props;\n    const { steps, current, noInstruction } = this.state;\n\n    if (noInstruction) {\n      return <Loading />;\n    }\n\n    const Step = steps[current];\n    const hasNext = steps.length - 1 > current;\n    const hasPrev = current > 0;\n    const conds = treatment.factorsObject();\n    const introPlayer = { ...player, resetIntroSteps: this.resetIntroSteps };\n\n    return (\n      <div className=\"introduction-steps\">\n        <Step\n          {...rest}\n          hasPrev={hasPrev}\n          hasNext={hasNext}\n          onPrev={this.onPrev}\n          onNext={this.onNext}\n          player={introPlayer}\n          treatment={conds}\n          game={{ treatment: conds }}\n        />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class Loading extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { visible: false };\n    // Don't immediatelly show, short loading times don't need a spinner\n    this.timeout = setTimeout(() => this.setState({ visible: true }), 500);\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.timeout);\n  }\n\n  render() {\n    return (\n      <div className={`loading ${this.state.visible ? \"visible\" : \"\"}`}>\n        <div>\n          Loading...\n          <div className=\"la-ball-grid-beat la-dark\">\n            <div />\n            <div />\n            <div />\n            <div />\n            <div />\n            <div />\n            <div />\n            <div />\n            <div />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class LoadingInline extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { visible: false };\n    // Don't immediatelly show, short loading times don't need a spinner\n    this.timeout = setTimeout(() => this.setState({ visible: true }), 500);\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.timeout);\n  }\n\n  render() {\n    return (\n      <div className={`loading-inline ${this.state.visible ? \"visible\" : \"\"}`}>\n        <div>\n          <div className=\"la-ball-beat la-dark\">\n            <div />\n            <div />\n            <div />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { Button, ControlGroup, InputGroup, Intent } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { AlertToaster } from \"./Toasters.jsx\";\n\nexport default class Login extends React.Component {\n  state = { username: \"admin\", password: \"\" };\n\n  componentWillUnmount() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n  }\n\n  componentDidMount() {\n    const redirecting = this.redirectLoggedIn(this.props);\n    if (redirecting) {\n      return;\n    }\n    this.timeout = setTimeout(() => {\n      this.timeout = null;\n      const field = document.querySelector(\"#password\");\n      if (field) {\n        field.focus();\n      }\n    }, 100);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.redirectLoggedIn(nextProps);\n  }\n\n  onChange = event => {\n    const { value, name } = event.currentTarget;\n    this.setState({ [name]: value });\n  };\n\n  redirectLoggedIn(props) {\n    const { user, loggingIn, adminPath } = props;\n    const { router } = this.context;\n\n    if (!loggingIn && user) {\n      router.history.push(adminPath || `/admin`);\n      return true;\n    }\n  }\n\n  handleForm = event => {\n    event.preventDefault();\n    const { username, password } = this.state;\n    Meteor.loginWithPassword(username, password, err => {\n      if (err) {\n        AlertToaster.show({ message: String(err) });\n      }\n    });\n  };\n\n  render() {\n    const { user, loggingIn } = this.props;\n    const { username, password } = this.state;\n\n    if (loggingIn || user) {\n      return null;\n    }\n\n    return (\n      <div className=\"login\">\n        <form onSubmit={this.handleForm}>\n          <h1>Log in</h1>\n\n          <ControlGroup vertical>\n            <InputGroup\n              large\n              leftIcon={IconNames.PERSON}\n              name=\"username\"\n              id=\"username\"\n              placeholder=\"Username\"\n              value={username}\n              onChange={this.onChange}\n              autoComplete={\"off\"}\n            />\n            <InputGroup\n              large\n              leftIcon={IconNames.LOCK}\n              type=\"password\"\n              name=\"password\"\n              id=\"password\"\n              placeholder=\"Password\"\n              value={password}\n              onChange={this.onChange}\n            />\n            <Button text=\"Login\" large intent={Intent.PRIMARY} type=\"submit\" />\n          </ControlGroup>\n        </form>\n\n        {Meteor.isDevelopment ? (\n          <p>\n            If you have not yet set a password, you can find an autogenerated\n            password in your application's logs.\n          </p>\n        ) : (\n          \"\"\n        )}\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  user: PropTypes.object, // Current meteor user\n  loggingIn: PropTypes.bool, // Current meteor user logging in\n  loading: PropTypes.bool // Subscription status\n};\n\nLogin.contextTypes = {\n  router: PropTypes.object\n};\n","import React from \"react\";\nimport { createPlayer } from \"../../api/players/methods\";\nimport { setPlayerId } from \"../containers/IdentifiedContainer.jsx\";\nimport Loading from \"./Loading.jsx\";\nimport NewPlayerForm from \"./NewPlayerForm.jsx\";\nimport { AlertToaster } from \"./Toasters.jsx\";\n\nconst { playerIdParam } = Meteor.settings.public;\n\nexport const ConsentButtonContext = React.createContext(null);\n\nexport default class NewPlayer extends React.Component {\n  state = { consented: false };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.consented && !prevState.consented) {\n      this.timeout = setTimeout(() => {\n        this.timeout = null;\n        const idField = window.document.querySelector(\"#id\");\n        if (idField) {\n          idField.focus();\n        }\n      }, 100);\n    }\n  }\n\n  componentWillMount() {\n    if (!this.props.Consent) {\n      this.playerFromIdParam();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n  }\n\n  handleConsent = () => {\n    this.setState({ consented: true });\n    this.playerFromIdParam();\n  };\n\n  handleNewPlayer = id => {\n    if (!id || !id.trim()) {\n      AlertToaster.show({ message: \"Player Identifier cannot be empty!\" });\n      return;\n    }\n\n    const urlParams = {};\n    const searchParams = new URL(document.location).searchParams;\n    for (var pair of searchParams.entries()) {\n      urlParams[pair[0]] = pair[1];\n    }\n\n    createPlayer.call({ id, urlParams }, (err, _id) => {\n      if (err) {\n        console.error(err);\n        AlertToaster.show({ message: String(err) });\n        return;\n      }\n\n      setPlayerId(_id);\n    });\n  };\n\n  playerFromIdParam() {\n    const { playerIdParam } = Meteor.settings.public;\n\n    if (playerIdParam) {\n      const searchParams = new URL(document.location).searchParams;\n      const id = searchParams.get(playerIdParam);\n      if (id) {\n        const urlParams = {};\n        for (var pair of searchParams.entries()) {\n          urlParams[pair[0]] = pair[1];\n        }\n        this.setState({ attemptingAutoLogin: true });\n        createPlayer.call({ id, urlParams }, (err, _id) => {\n          if (err) {\n            this.setState({ attemptingAutoLogin: false });\n            console.error(err);\n            AlertToaster.show({ message: String(err) });\n            return;\n          }\n\n          setPlayerId(_id);\n        });\n      }\n    }\n  }\n\n  render() {\n    const { Consent, CustomNewPlayer } = this.props;\n    const { consented, attemptingAutoLogin } = this.state;\n    const Form = CustomNewPlayer || NewPlayerForm;\n\n    if (attemptingAutoLogin) {\n      return <Loading />;\n    }\n\n    if (!consented && Consent) {\n      return (\n        <ConsentButtonContext.Provider value={this.handleConsent}>\n          <Consent {...this.props} onConsent={this.handleConsent} />\n        </ConsentButtonContext.Provider>\n      );\n    }\n\n    return <Form {...this.props} handleNewPlayer={this.handleNewPlayer} />;\n  }\n}\n","import React from \"react\";\n\nimport { Button, Classes, FormGroup } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport Centered from \"./Centered.jsx\";\n\nexport default class NewPlayerForm extends React.Component {\n  state = { id: \"\" };\n\n  handleUpdate = event => {\n    const { value, name } = event.currentTarget;\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    const { handleNewPlayer } = this.props;\n    const { id } = this.state;\n    handleNewPlayer(id);\n  };\n\n  render() {\n    const { id } = this.state;\n\n    return (\n      <Centered>\n        <div className=\"new-player\">\n          <form onSubmit={this.handleSubmit}>\n            <h1>Identification</h1>\n\n            <FormGroup\n              label=\"Player ID\"\n              labelFor=\"id\"\n              helperText={\n                <>\n                  Enter your player identification{\" \"}\n                  <span className=\"bp3-text-muted\">\n                    (provided ID, MTurk ID, etc.)\n                  </span>\n                </>\n              }\n            >\n              <input\n                className={Classes.INPUT}\n                dir=\"auto\"\n                type=\"text\"\n                name=\"id\"\n                id=\"id\"\n                value={id}\n                onChange={this.handleUpdate}\n                placeholder=\"e.g. john@example.com\"\n                required\n                autoComplete=\"off\"\n              />\n            </FormGroup>\n\n            <FormGroup>\n              <Button type=\"submit\" text=\"Submit\" icon={IconNames.KEY_ENTER} />\n            </FormGroup>\n          </form>\n        </div>\n      </Centered>\n    );\n  }\n}\n","import { NonIdealState } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default class NoBatch extends React.Component {\n  render() {\n    // Not sure what icon works best:\n    // - SMALL_CROSS\n    // - BAN_CIRCLE\n    // - ERROR\n    // - DISABLE\n    // - WARNING_SIGN\n    return (\n      <NonIdealState\n        icon={IconNames.ISSUE}\n        title=\"No experiments available\"\n        description={\n          <>\n            <p>\n              There are currently no available experiments. Please wait until an\n              experiment becomes available or come back at a later date.\n            </p>\n            {Meteor.isDevelopment ? (\n              <p>\n                Go to{\" \"}\n                <a href=\"/admin\" target=\"_blank\">\n                  Admin\n                </a>{\" \"}\n                to get started.\n              </p>\n            ) : (\n              \"\"\n            )}\n          </>\n        }\n      />\n    );\n  }\n}\n","const showOpenAdmin = Meteor.isDevelopment;\nconst showOpenAltPlayer =\n  Meteor.isDevelopment || Meteor.settings.public.debug_resetSession;\nconst showReset =\n  Meteor.isDevelopment || Meteor.settings.public.debug_newPlayer;\n\nimport {\n  Button,\n  Classes,\n  Dialog,\n  Icon,\n  Intent,\n  NavbarHeading\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport React from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { Link } from \"react-router-dom\";\nimport GameContainer from \"../containers/GameContainer.jsx\";\nimport { removePlayerId } from \"../containers/IdentifiedContainer.jsx\";\nimport { CoreWrapper } from \"./Helpers.jsx\";\nimport Loading from \"./Loading.jsx\";\nimport NewPlayer from \"./NewPlayer.jsx\";\nimport NoBatchOriginal from \"./NoBatch.jsx\";\n\nconst loadDocTitle = document.title;\n\nexport default class Public extends React.Component {\n  state = { isAboutOpen: false };\n\n  handleToggleAbout = () =>\n    this.setState({ isAboutOpen: !this.state.isAboutOpen });\n\n  handleOpenAdmin = event => {\n    event.preventDefault();\n\n    if (!showOpenAdmin) {\n      return;\n    }\n    window.open(\"/admin\", \"_blank\");\n  };\n\n  handleReset = event => {\n    event.preventDefault();\n\n    if (!showOpenAltPlayer) {\n      return;\n    }\n    removePlayerId();\n  };\n\n  handleOpenAltPlayer = event => {\n    event.preventDefault();\n\n    if (!showReset) {\n      return;\n    }\n\n    // check to see if a playerId is required\n    const { playerIdParam, playerIdParamExclusive } = Meteor.settings.public;\n    const playerIdParamRequired = playerIdParam && playerIdParamExclusive;\n\n    const randPlayerIdKey = Math.random()\n      .toString(36)\n      .substring(2, 15);\n\n    // if playerId is required, add that to URL\n    // otherwise, produce URL with just playerIdKey\n    if (playerIdParamRequired) {\n      const randId = Math.random()\n        .toString(36)\n        .substring(2, 15);\n      window.open(\n        `/?playerIdKey=${randPlayerIdKey}&${playerIdParam}=${randId}`,\n        \"_blank\"\n      );\n    } else {\n      window.open(`/?playerIdKey=${randPlayerIdKey}`, \"_blank\");\n    }\n  };\n\n  render() {\n    const {\n      loading,\n      renderPublic,\n      playerIdKey,\n      Header,\n      NewPlayer: CustomNewPlayer,\n      About,\n      NoBatch,\n      ...rest\n    } = this.props;\n    const { player } = rest;\n    // const AboutComp = About || AboutOriginal;\n    const AboutComp = About || null;\n    const NoBatchComp = NoBatch || NoBatchOriginal;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (!renderPublic) {\n      return <NoBatchComp />;\n    }\n\n    const adminProps = {\n      showOpenAltPlayer: showOpenAltPlayer,\n      onOpenAltPlayer: this.handleOpenAltPlayer,\n      showReset: showReset,\n      onReset: this.handleReset,\n      showReset: showReset,\n      about: AboutComp,\n      showAbout: Boolean(AboutComp),\n      onToggleAbout: this.handleToggleAbout\n    };\n\n    let content;\n    if (!player) {\n      content = (\n        <CoreWrapper>\n          <NewPlayer\n            {...rest}\n            {...adminProps}\n            CustomNewPlayer={CustomNewPlayer}\n          />\n        </CoreWrapper>\n      );\n    } else {\n      content = <GameContainer {...rest} {...adminProps} />;\n    }\n\n    let title = loadDocTitle;\n    if (playerIdKey) {\n      title += ` (${playerIdKey})`;\n    }\n\n    return (\n      <div className=\"grid\">\n        <Helmet>\n          <title>{title}</title>\n        </Helmet>\n\n        {Header !== undefined ? (\n          <Header {...adminProps} />\n        ) : (\n          <div className=\"header navbar\">\n            <div className=\"navbarGroup\">\n              <NavbarHeading>\n                <Link\n                  className={[\n                    Classes.BUTTON,\n                    Classes.LARGE,\n                    Classes.MINIMAL,\n                    Classes.BUTTON\n                  ].join(\" \")}\n                  to=\"/\"\n                >\n                  <Icon icon={IconNames.EXCHANGE} />\n                  <span className={Classes.BUTTON_TEXT}>Empirica</span>\n                </Link>\n              </NavbarHeading>\n            </div>\n\n            <div className=\"navbarGroup\">\n              {showOpenAltPlayer ? (\n                <Button\n                  text=\"New Player\"\n                  minimal\n                  icon={IconNames.PERSON}\n                  onClick={this.handleOpenAltPlayer}\n                />\n              ) : (\n                \"\"\n              )}\n              {showReset ? (\n                <Button\n                  text=\"Reset current session\"\n                  minimal\n                  icon={IconNames.REPEAT}\n                  onClick={this.handleReset}\n                />\n              ) : (\n                \"\"\n              )}\n\n              {showOpenAdmin ? (\n                <Button\n                  text=\"Open Admin\"\n                  minimal\n                  icon={IconNames.PLAY}\n                  onClick={this.handleOpenAdmin}\n                />\n              ) : (\n                \"\"\n              )}\n\n              {AboutComp ? (\n                <>\n                  <Button\n                    text=\"About\"\n                    minimal\n                    icon={IconNames.info_sign}\n                    onClick={this.handleToggleAbout}\n                  />\n\n                  <Dialog\n                    icon={IconNames.INBOX}\n                    isOpen={this.state.isAboutOpen}\n                    onClose={this.handleToggleAbout}\n                    title=\"About\"\n                  >\n                    <div className={Classes.DIALOG_BODY}>\n                      <AboutComp />\n                    </div>\n\n                    <div className={Classes.DIALOG_FOOTER}>\n                      <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n                        <Button\n                          text=\"Close\"\n                          intent={Intent.PRIMARY}\n                          onClick={this.handleToggleAbout}\n                        />\n                      </div>\n                    </div>\n                  </Dialog>\n                </>\n              ) : null}\n            </div>\n          </div>\n        )}\n\n        <main>{content}</main>\n      </div>\n    );\n  }\n}\n","// Handles all the timing stuff\nimport { TimeSync } from \"meteor/mizzao:timesync\";\nimport { withTracker } from \"meteor/react-meteor-data\";\nimport moment from \"moment\";\n\n// Handles all the timing stuff\nexport default withTracker(({ stage, player, ...rest }) => {\n  const now = moment(TimeSync.serverTime(null, 100));\n  const startTimeAt = stage && moment(stage.startTimeAt);\n  const started = stage && now.isSameOrAfter(startTimeAt);\n  const endTimeAt =\n    stage && startTimeAt.add(stage.durationInSeconds, \"seconds\");\n  const ended = stage && now.isSameOrAfter(endTimeAt);\n  const timedOut = stage && player && !player.stage.submitted && ended;\n  const roundOver = (stage && player && player.stage.submitted) || timedOut;\n  let remainingSeconds = stage && endTimeAt.diff(now, \"seconds\");\n  if (remainingSeconds && remainingSeconds < 0) {\n    remainingSeconds = 0;\n  }\n  const elapsedSeconds = stage && now.diff(startTimeAt, \"seconds\");\n  return {\n    timedOut,\n    roundOver,\n    stage,\n    player,\n    started,\n    ended,\n    endTimeAt,\n    now,\n    remainingSeconds,\n    elapsedSeconds,\n    ...rest\n  };\n});\n","// toaster.ts\nimport { Position, Toaster, Intent } from \"@blueprintjs/core\";\n\nconst toaster = Toaster.create({\n  position: Position.TOP\n});\n\nexport const AlertToaster = {\n  show({ message }) {\n    toaster.show({ message, iconName: \"warning-sign\", intent: Intent.DANGER });\n  }\n};\n\nexport const SuccessToaster = {\n  show({ message }) {\n    toaster.show({ message, iconName: \"tick-circle\", intent: Intent.SUCCESS });\n  }\n};\n","import React from \"react\";\n\nimport { NonIdealState } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nexport default class WaitingForServer extends React.Component {\n  render() {\n    return (\n      <div className=\"game waiting\">\n        <NonIdealState\n          icon={IconNames.AUTOMATIC_UPDATES}\n          title=\"Waiting for server response...\"\n          description={\n            <>\n              Please wait until all players are ready. If this takes more than 5\n              seconds, please <em>Refresh the page</em>.\n            </>\n          }\n        />\n      </div>\n    );\n  }\n}\n","import { Button, ButtonGroup, Classes, Intent, Tag } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport moment from \"moment\";\nimport React from \"react\";\nimport { assignmentTypes } from \"../../../api/batches/batches\";\nimport {\n  duplicateBatch,\n  setBatchInDebugMode,\n  updateBatch,\n  updateBatchStatus\n} from \"../../../api/batches/methods\";\nimport AdminBatchGamesContainer from \"../../containers/admin/AdminBatchGamesContainer\";\nimport LoadingInline from \"../LoadingInline.jsx\";\nimport { AlertToaster, SuccessToaster } from \"../Toasters.jsx\";\n\nexport default class AdminBatch extends React.Component {\n  state = {\n    newIsOpen: false,\n    detailsVisible: false\n  };\n\n  toggleDetails = () => {\n    this.setState({ detailsVisible: !this.state.detailsVisible });\n  };\n\n  handleArchive = () => {\n    const {\n      archived,\n      batch: { _id }\n    } = this.props;\n    updateBatch.call({ _id, archived: !archived });\n  };\n\n  handleStatusChange = (status, debugMode, event) => {\n    const {\n      batch: { _id }\n    } = this.props;\n    event.preventDefault();\n    if (\n      (Meteor.isDevelopment || Meteor.settings.public.debug_gameDebugMode) &&\n      status === \"running\" &&\n      // mac: metaKey (command), window: ctrlKey (Ctrl)\n      (event.ctrlKey || event.metaKey || debugMode)\n    ) {\n      setBatchInDebugMode.call({ _id });\n    }\n    updateBatchStatus.call({ _id, status });\n  };\n\n  handleDuplicate = event => {\n    const {\n      archived,\n      batch: { _id }\n    } = this.props;\n    event.preventDefault();\n    duplicateBatch.call({ _id }, err => {\n      if (err) {\n        AlertToaster.show({ message: `Failed duplicating Batch: ${err}` });\n      } else {\n        let message = \"Successfully duplicated Batch.\";\n        if (archived) {\n          message += \" See Active Batches!\";\n        }\n        SuccessToaster.show({ message });\n      }\n    });\n  };\n\n  render() {\n    const { loading, batch, treatments, archived } = this.props;\n    const { detailsVisible } = this.state;\n\n    if (loading) {\n      return (\n        <tr>\n          <td colSpan={7} style={{ textAlign: \"center\" }}>\n            <LoadingInline />\n          </td>\n        </tr>\n      );\n    }\n\n    const actions = [];\n\n    if (batch.status === \"init\") {\n      actions.push(\n        <Button\n          text=\"Start\"\n          intent={Intent.SUCCESS}\n          icon={IconNames.PLAY}\n          key=\"start\"\n          onClick={this.handleStatusChange.bind(this, \"running\", false)}\n        />\n      );\n    }\n\n    if (batch.status === \"init\" || batch.status === \"running\") {\n      actions.push(\n        <Button\n          text=\"Cancel\"\n          icon={IconNames.STOP}\n          key=\"cancel\"\n          onClick={this.handleStatusChange.bind(this, \"cancelled\", false)}\n        />\n      );\n    }\n\n    if (\n      batch.status === \"finished\" ||\n      batch.status === \"cancelled\" ||\n      batch.status === \"failed\"\n    ) {\n      actions.push(\n        <Button\n          text={archived ? \"Unarchive\" : \"Archive\"}\n          intent={archived ? Intent.SUCCESS : Intent.DANGER}\n          minimal\n          icon={IconNames.BOX}\n          key=\"archive\"\n          className={Classes.SMALL}\n          onClick={this.handleArchive}\n        />\n      );\n    }\n\n    actions.push(\n      <Button\n        text=\"Duplicate\"\n        icon={IconNames.DUPLICATE}\n        key=\"duplicate\"\n        onClick={this.handleDuplicate}\n      />\n    );\n\n    let config;\n    switch (batch.assignment) {\n      case \"simple\":\n        config = batch.simpleConfig.treatments.map(tt => {\n          const t = treatments.find(t => t._id === tt._id);\n          return (\n            <div key={tt._id}>{t ? t.displayName() : \"Unknown treatment\"}</div>\n          );\n        });\n        break;\n      case \"complete\":\n        config = batch.completeConfig.treatments.map(tt => {\n          const t = treatments.find(t => t._id === tt._id);\n          return (\n            <div key={tt._id}>\n              {t ? t.displayName() : \"Unknown treatment\"}\n              {\" x \"}\n              {tt.count}\n            </div>\n          );\n        });\n        break;\n      default:\n        console.error(`unknown assignment: ${batch.assignment}`);\n        break;\n    }\n\n    let statusIntent;\n    let statusMinimal = false;\n    switch (batch.status) {\n      case \"init\":\n        statusIntent = Intent.WARNING;\n        // Default style\n        break;\n      case \"running\":\n        statusIntent = Intent.SUCCESS;\n        break;\n      case \"finished\":\n        statusIntent = Intent.SUCCESS;\n        statusMinimal = true;\n        break;\n      case \"stopped\":\n      case \"failed\":\n      case \"cancelled\":\n        statusIntent = Intent.DANGER;\n        statusMinimal = true;\n        break;\n      default:\n        statusMinimal = true;\n        break;\n    }\n\n    const detailsVisibleClass = detailsVisible ? \"detailsVisible\" : \"\";\n    const detailsClass = `detailsButton ${detailsVisibleClass}`;\n    return (\n      <>\n        <tr>\n          <td className=\"showDetailsButton\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 125.304 125.304\"\n              onClick={this.toggleDetails}\n              className={detailsClass}\n            >\n              <path fill=\"#010002\" d=\"M62.652 103.895L0 21.409h125.304z\" />\n            </svg>\n          </td>\n          <td>{batch.index}</td>\n          <td>\n            <Tag intent={statusIntent} minimal={statusMinimal}>\n              {batch.status}\n            </Tag>\n          </td>\n          <td className=\"numeric\">{batch.gameCount()}</td>\n          <td title={moment(batch.runningAt).format()}>\n            {batch.runningAt ? moment(batch.runningAt).fromNow() : \"\"}\n          </td>\n          <td>{assignmentTypes[batch.assignment]}</td>\n          <td>{config}</td>\n          <td>\n            <ButtonGroup minimal className={Classes.SMALL}>\n              {actions}\n            </ButtonGroup>\n          </td>\n        </tr>\n\n        {detailsVisible ? (\n          <tr>\n            <AdminBatchGamesContainer\n              batchId={batch._id}\n              batch={batch}\n              treatments={treatments}\n            />\n          </tr>\n        ) : (\n          <tr />\n        )}\n      </>\n    );\n  }\n}\n","import { Icon, Intent, Tag, Button } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport moment from \"moment\";\nimport React from \"react\";\nimport { earlyExitGameLobby } from \"../../../api/game-lobbies/methods\";\nimport { earlyExitGame } from \"../../../api/games/methods\";\n\nexport default class AdminBatchGame extends React.Component {\n  handleStatusChange = (status, event) => {\n    event.preventDefault();\n    const { game, lobby } = this.props;\n    const endReason = \"adminCancelled\";\n\n    if (game !== undefined && game._id) {\n      earlyExitGame.call({\n        gameId: game._id,\n        endReason,\n        status: status\n      });\n      return;\n    }\n\n    earlyExitGameLobby.call({\n      exitReason: endReason,\n      gameLobbyId: lobby._id,\n      status: status\n    });\n  };\n\n  render() {\n    const { batch, lobby, game, rounds, stages, treatment } = this.props;\n\n    let currentRound;\n    let currentStage;\n    if (game) {\n      currentStage = stages.find(s => s._id === game.currentStageId);\n      if (currentStage) {\n        currentRound = rounds.find(r => r._id === currentStage.roundId);\n      }\n    }\n\n    let notReadyPlayers = [];\n    let players = (game ? game : lobby).playerIds;\n    let bots = [];\n\n    if (!game) {\n      notReadyPlayers = lobby.queuedPlayerIds.filter(\n        p => players.indexOf(p) < 0\n      );\n    }\n\n    const playerCountFactor = treatment.factor(\"playerCount\");\n    const playerCount = playerCountFactor ? playerCountFactor.value : 0;\n    const botsFactor = treatment.factor(\"botsCount\");\n    const botsCount = botsFactor && botsFactor.value;\n    if (botsCount) {\n      players = players.slice(0, players.length - botsCount);\n      for (let i = 0; i < botsCount; i++) {\n        bots.push(Random.id());\n      }\n    }\n\n    // _.times(23, () => bots.push(Random.id()));\n\n    let statusMsg;\n    let statusIntent;\n    let statusMinimal = false;\n    let showCancelButton = false;\n    if (game && game.status === \"cancelled\") {\n      statusIntent = Intent.DANGER;\n      statusMinimal = true;\n      statusMsg = \"game cancelled\";\n    } else if (game && game.finishedAt) {\n      statusIntent = Intent.SUCCESS;\n      statusMinimal = true;\n      statusMsg = \"finished\";\n    } else if (lobby.timedOutAt) {\n      statusIntent = Intent.DANGER;\n      statusMinimal = true;\n      statusMsg = \"lobby timeout\";\n    } else if (lobby.status === \"cancelled\") {\n      statusIntent = Intent.DANGER;\n      statusMinimal = true;\n      statusMsg = \"lobby cancelled\";\n    } else if (batch.status === \"cancelled\") {\n      statusIntent = Intent.DANGER;\n      statusMinimal = true;\n      statusMsg = \"batch cancelled\";\n    } else if (batch.status === \"failed\") {\n      statusIntent = Intent.DANGER;\n      statusMinimal = true;\n      statusMsg = \"failed\";\n    } else if (batch.status === \"stopped\") {\n      statusIntent = Intent.DANGER;\n      statusMinimal = true;\n      statusMsg = \"batch stopped\";\n    } else if (game) {\n      statusIntent = Intent.SUCCESS;\n      statusMsg = \"running\";\n      showCancelButton = true;\n    } else {\n      if (players.length === 0) {\n        showCancelButton = true;\n        if (notReadyPlayers.length === 0) {\n          statusMsg = \"empty\";\n          statusMinimal = true;\n        } else {\n          statusMsg = \"pre-lobby\";\n          statusIntent = Intent.WARNING;\n          statusMinimal = true;\n        }\n      } else {\n        showCancelButton = true;\n        statusIntent = Intent.WARNING;\n        statusMsg = \"lobby\";\n      }\n    }\n\n    return (\n      <tr>\n        <td>{lobby.index + 1}</td>\n        <td>\n          <Tag intent={statusIntent} minimal={statusMinimal}>\n            {statusMsg}\n          </Tag>\n        </td>\n        <td>{treatment.displayName()}</td>\n\n        {game && game.createdAt ? (\n          <td title={moment(game.createdAt).format()}>\n            {moment(game.createdAt).fromNow()}\n          </td>\n        ) : (\n          <td />\n        )}\n\n        {game && game.finishedAt ? (\n          <td title={moment(game.finishedAt).format()}>\n            {moment(game.finishedAt).fromNow()}\n          </td>\n        ) : (\n          <td />\n        )}\n\n        {game && game.finishedAt ? (\n          <td title={moment(game.finishedAt).format()}>-</td>\n        ) : (\n          <>\n            <td>\n              {currentRound\n                ? `Round: ${currentRound.index + 1} / ${rounds.length}`\n                : \"\"}\n              {currentStage ? ` > Stage: ${currentStage.displayName}` : \"\"}\n            </td>\n          </>\n        )}\n        <td>{playerCount}</td>\n        <td>\n          {bots.length > 0 ? (\n            <span className=\"player-group\">\n              {bots.length > 10 ? (\n                <>\n                  <span title={`${bots.length} Bots`} key=\"bots\">\n                    <Icon\n                      icon={IconNames.PERSON}\n                      iconSize={16}\n                      style={{ color: \"#D99E0B\" }}\n                    />{\" \"}\n                    Ã— {bots.length}\n                  </span>\n                </>\n              ) : (\n                bots.map(p => (\n                  <span title=\"Bot\" key={p}>\n                    <Icon\n                      icon={IconNames.PERSON}\n                      iconSize={16}\n                      style={{ color: \"#D99E0B\" }}\n                    />\n                  </span>\n                ))\n              )}\n            </span>\n          ) : (\n            \"\"\n          )}\n\n          {notReadyPlayers.length > 0 ? (\n            <span className=\"player-group\">\n              {notReadyPlayers.length > 10 ? (\n                <>\n                  <span\n                    title={`${notReadyPlayers.length} Players in Intro Steps`}\n                    key=\"notReadyPlayers\"\n                  >\n                    <Icon\n                      icon={IconNames.PERSON}\n                      iconSize={16}\n                      style={{ color: \"#A7B6C2\" }}\n                    />\n                  </span>{\" \"}\n                  Ã— {notReadyPlayers.length}\n                </>\n              ) : (\n                notReadyPlayers.map(p => (\n                  <span title=\"Player in Intro Steps\" key={p}>\n                    <Icon\n                      icon={IconNames.PERSON}\n                      iconSize={16}\n                      style={{ color: \"#A7B6C2\" }}\n                    />\n                  </span>\n                ))\n              )}\n            </span>\n          ) : (\n            \"\"\n          )}\n\n          {players.length > 0 ? (\n            <span className=\"player-group\">\n              {players.length > 10 ? (\n                <>\n                  <span title={`${players.length} Players`} key=\"players\">\n                    <Icon icon={IconNames.PERSON} iconSize={16} />\n                  </span>{\" \"}\n                  Ã— {players.length}\n                </>\n              ) : (\n                players.map(p => (\n                  <span title=\"Player\" key={p}>\n                    <Icon icon={IconNames.PERSON} iconSize={16} />\n                  </span>\n                ))\n              )}\n            </span>\n          ) : (\n            \"\"\n          )}\n        </td>\n        <td>\n          {showCancelButton && (\n            <Button\n              text=\"Cancel\"\n              icon={IconNames.STOP}\n              key=\"cancel\"\n              onClick={this.handleStatusChange.bind(this, \"cancelled\")}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n","import { HTMLTable } from \"@blueprintjs/core\";\nimport React from \"react\";\nimport AdminBatchGameContainer from \"../../containers/admin/AdminBatchGameContainer.jsx\";\nimport LoadingInline from \"../LoadingInline.jsx\";\n\nexport default class AdminBatchGames extends React.Component {\n  render() {\n    const { loading, batch, games, gameLobbies, treatments } = this.props;\n\n    if (loading) {\n      return (\n        <>\n          <td colSpan={2} />\n          <td colSpan={5} style={{ textAlign: \"center\" }}>\n            <LoadingInline />\n          </td>\n        </>\n      );\n    }\n\n    return (\n      <>\n        <td colSpan={2} />\n        <td colSpan={6}>\n          <HTMLTable\n            condensed\n            className=\"bp3-html-table-bordered batch-games-table\"\n          >\n            <thead>\n              <tr>\n                <th>#</th>\n                <th>Status</th>\n                <th>Treatment</th>\n                <th>Start Time</th>\n                <th>Finish Time</th>\n                <th>Current State</th>\n                <th>Player Count</th>\n                <th>Players</th>\n                <th />\n              </tr>\n            </thead>\n\n            <tbody>\n              {gameLobbies.map(lobby => (\n                <AdminBatchGameContainer\n                  key={lobby._id}\n                  batch={batch}\n                  lobby={lobby}\n                  game={games.find(g => g._id === lobby.gameId)}\n                  treatment={treatments.find(t => t._id === lobby.treatmentId)}\n                />\n              ))}\n            </tbody>\n          </HTMLTable>\n        </td>\n      </>\n    );\n  }\n}\n","import { Button, Callout, HTMLTable } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  duplicateBatch,\n  setBatchInDebugMode,\n  updateBatchStatus\n} from \"../../../api/batches/methods\";\nimport Loading from \"../Loading.jsx\";\nimport AdminBatch from \"./AdminBatch\";\nimport { AdminPageHeader } from \"./AdminHeading.jsx\";\nimport AdminNewBatch from \"./AdminNewBatch.jsx\";\n\nexport default class AdminBatches extends React.Component {\n  state = {\n    newIsOpen: false\n  };\n\n  handleStatusChange = (_id, status, debugMode, event) => {\n    event.preventDefault();\n    if (\n      (Meteor.isDevelopment || Meteor.settings.public.debug_gameDebugMode) &&\n      status === \"running\" &&\n      // mac: metaKey (command), window: ctrlKey (Ctrl)\n      (event.ctrlKey || event.metaKey || debugMode)\n    ) {\n      setBatchInDebugMode.call({ _id });\n    }\n    updateBatchStatus.call({ _id, status });\n  };\n\n  handleDuplicate = (_id, event) => {\n    event.preventDefault();\n    duplicateBatch.call({ _id });\n  };\n\n  render() {\n    const {\n      loading,\n      batches,\n      treatments,\n      factors,\n      lobbyConfigs,\n      archived\n    } = this.props;\n\n    const { newIsOpen } = this.state;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    return (\n      <div className=\"batches\">\n        {archived ? (\n          <Link to=\"/admin\" className=\"archived-button bp3-button bp3-minimal\">\n            Back to Active Batches\n          </Link>\n        ) : (\n          <Link\n            to=\"/admin/batches/archived\"\n            className=\"archived-button bp3-button bp3-minimal\"\n          >\n            View Archived Batches\n          </Link>\n        )}\n\n        <AdminPageHeader icon={IconNames.LAYERS}>\n          {archived ? \"Archived Batches\" : \"Batches\"}\n\n          {!archived ? (\n            <Button\n              text=\"New Batch\"\n              onClick={() => this.setState({ newIsOpen: true })}\n            />\n          ) : (\n            \"\"\n          )}\n        </AdminPageHeader>\n\n        {batches.length === 0 ? (\n          <Callout>\n            {archived\n              ? \"No archived batches.\"\n              : \"No batches yet, create one above.\"}\n          </Callout>\n        ) : (\n          <HTMLTable className=\"double-stripped\">\n            <thead>\n              <tr>\n                <th />\n                <th>#</th>\n                <th>Status</th>\n                <th>Game Count</th>\n                <th>Started At</th>\n                <th>Assignment</th>\n                <th>Configuration</th>\n                <th>{/* Actions */}</th>\n              </tr>\n            </thead>\n\n            <tbody>\n              {batches.map(batch => (\n                <AdminBatch\n                  key={batch._id}\n                  batch={batch}\n                  treatments={treatments}\n                  archived={archived}\n                />\n              ))}\n            </tbody>\n          </HTMLTable>\n        )}\n\n        {!archived ? (\n          <AdminNewBatch\n            treatments={treatments}\n            factors={factors}\n            lobbyConfigs={lobbyConfigs}\n            isOpen={newIsOpen}\n            onClose={() => this.setState({ newIsOpen: false })}\n          />\n        ) : (\n          \"\"\n        )}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport {\n  Button,\n  FormGroup,\n  HTMLSelect,\n  Intent,\n  Checkbox\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { AdminPageHeader } from \"./AdminHeading.jsx\";\n\nexport default class AdminExport extends React.Component {\n  state = { format: \"CSV\", exporting: false, includePii: false };\n\n  handleChange = event => {\n    const { name, value, type } = event.currentTarget;\n    if (type === \"checkbox\") {\n      this.setState({ [name]: event.currentTarget.checked });\n      return;\n    }\n\n    this.setState({ [name]: value });\n  };\n\n  handleExport = () => {\n    const { includePii } = this.state;\n    document.location = `/admin/export.${this.state.format.toLowerCase()}?include_pii=${includePii}`;\n  };\n\n  render() {\n    const { format, exporting, includePii } = this.state;\n\n    return (\n      <div className=\"export\">\n        <AdminPageHeader icon={IconNames.EXPORT}>Export</AdminPageHeader>\n\n        <p>\n          The export function dumps all the app data as multiple CSV / JSON /\n          JSON Line files zipped, one for each data type. You can reassociate\n          the data pieces through IDs.\n        </p>\n\n        <FormGroup>\n          <HTMLSelect\n            id=\"format\"\n            name=\"format\"\n            value={format}\n            options={[\"CSV\", \"JSON\", \"JSONL\"]}\n            onChange={this.handleChange}\n          />\n          <Checkbox\n            checked={includePii}\n            label=\"Add Personal Identity Information (includes the player ID, URL parameters, and IP address)\"\n            onChange={this.handleChange}\n            name=\"includePii\"\n          />\n        </FormGroup>\n        <FormGroup>\n          <Button\n            text=\"Export All\"\n            loading={exporting}\n            intent={Intent.PRIMARY}\n            onClick={this.handleExport}\n          />\n        </FormGroup>\n        {format === \"CSV\" && <p>Each file is a CSV file</p>}\n        {format === \"JSON\" && <p>Each file is a single large JSON object</p>}\n        {format === \"JSONL\" && (\n          <p>\n            Each file contains{\" \"}\n            <a target=\"blank\" href=\"http://jsonlines.org\">\n              JSON Lines\n            </a>\n            , where each line is a object.\n          </p>\n        )}\n      </div>\n    );\n  }\n}\n","import { EditableText, Button } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\nimport React from \"react\";\nimport { AlertToaster } from \"../Toasters.jsx\";\n\nimport { updateFactor } from \"../../../api/factors/methods.js\";\n\nexport default class AdminFactor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.initialName = props.factor.name;\n    this.state = {\n      name: props.factor.name\n    };\n  }\n\n  componentWillUpdate(props) {\n    if (props.factor.name !== this.props.factor.name) {\n      this.initialName = props.factor.name;\n      this.setState({ name: props.factor.name });\n    }\n  }\n\n  handleNameChange = name => {\n    this.setState({ name });\n  };\n\n  handleNameConfirm = () => {\n    const { _id } = this.props.factor;\n    const { name } = this.state;\n    if (!name || name.trim() === \"\") {\n      this.setState({ name: this.initialName });\n      return;\n    }\n    updateFactor.call({ _id, name }, err => {\n      if (err) {\n        AlertToaster.show({ message: String(err) });\n        this.handleNameChange(this.initialName);\n        return;\n      }\n      this.initialName = name;\n    });\n  };\n\n  render() {\n    const { factor, archived } = this.props;\n    const { name } = this.state;\n    return (\n      <tr key={factor._id}>\n        <td>\n          <EditableText\n            onChange={this.handleNameChange}\n            onConfirm={this.handleNameConfirm}\n            value={name}\n          />\n        </td>\n        <td>{String(factor.value)}</td>\n        <td>\n          <Button\n            text={archived ? `Unarchive ${t.name}` : \"\"}\n            intent={archived ? Intent.SUCCESS : null}\n            icon={IconNames.BOX}\n            onClick={() =>\n              updateFactor.call({ _id: factor._id, name, archived: !archived })\n            }\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport {\n  Button,\n  ButtonGroup,\n  Card,\n  Classes,\n  Elevation,\n  HTMLTable,\n  Icon,\n  Position,\n  Tooltip,\n  Intent\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { FactorTypes } from \"../../../api/factor-types/factor-types.js\";\nimport { updateFactorType } from \"../../../api/factor-types/methods.js\";\n\nimport AdminFactor from \"./AdminFactor.jsx\";\nimport AdminNewFactor from \"./AdminNewFactor.jsx\";\nimport AdminNewFactorType from \"./AdminNewFactorType.jsx\";\nimport Loading from \"../Loading.jsx\";\nimport { AdminPageHeader } from \"./AdminHeading.jsx\";\n\nexport default class AdminFactors extends React.Component {\n  state = {};\n\n  handleArchive = _id => {\n    const { archived } = this.props;\n    updateFactorType.call({ _id, archived: !archived });\n  };\n\n  render() {\n    const { loading, archived, factors, factorTypes } = this.props;\n    if (loading) {\n      return <Loading />;\n    }\n\n    factorTypes.map(t => {\n      t.factors = factors.filter(f => f.factorTypeId === t._id);\n    });\n\n    return (\n      <div className=\"factors\">\n        <AdminPageHeader icon={IconNames.PROPERTY}>\n          {archived ? \"Archived Factors\" : \"Factors\"}\n        </AdminPageHeader>\n\n        <div className=\"factors-list\">\n          {archived && factorTypes.length === 0 ? (\n            <p>No archived Factors</p>\n          ) : null}\n          {factorTypes.map(t => {\n            const hasNewForm = t.type !== \"Boolean\";\n\n            const requiredType = FactorTypes.requiredTypes.includes(t.name);\n\n            return (\n              <Card className=\"factor\" key={t._id} elevation={Elevation.TWO}>\n                <div className=\"factor-actions\">\n                  <ButtonGroup>\n                    {requiredType ? null : (\n                      <Tooltip\n                        content={\n                          archived ? (\n                            \"\"\n                          ) : (\n                            <>\n                              Archive <code>{t.name}</code>\n                            </>\n                          )\n                        }\n                        position={Position.TOP}\n                      >\n                        <Button\n                          text={archived ? `Unarchive ${t.name}` : \"\"}\n                          intent={archived ? Intent.SUCCESS : null}\n                          icon={IconNames.BOX}\n                          onClick={this.handleArchive.bind(this, t._id)}\n                        />\n                      </Tooltip>\n                    )}\n\n                    {archived || !hasNewForm ? (\n                      \"\"\n                    ) : (\n                      <Tooltip\n                        content={\n                          <>\n                            New <code>{t.name}</code> Factor Value\n                          </>\n                        }\n                        position={Position.TOP}\n                      >\n                        <Button\n                          icon={IconNames.PLUS}\n                          onClick={() =>\n                            this.setState({ [`newOpen${t._id}`]: true })\n                          }\n                        />\n                      </Tooltip>\n                    )}\n                  </ButtonGroup>\n\n                  {archived || !hasNewForm ? (\n                    \"\"\n                  ) : (\n                    <AdminNewFactor\n                      type={t}\n                      onClose={() =>\n                        this.setState({ [`newOpen${t._id}`]: false })\n                      }\n                      isOpen={this.state[`newOpen${t._id}`]}\n                    />\n                  )}\n                </div>\n\n                <h4 className={Classes.MONOSPACE_TEXT}>{t.name}</h4>\n\n                {t.description ? (\n                  <p className={Classes.TEXT_DISABLED}>{t.description}</p>\n                ) : (\n                  \"\"\n                )}\n\n                {archived ? null : t.factors.length > 0 ? (\n                  <HTMLTable striped condensed>\n                    <thead>\n                      <tr>\n                        <th>Name</th>\n                        <th>Value</th>\n                        <th />\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {t.factors.map(factor => (\n                        <AdminFactor\n                          key={factor._id}\n                          factor={factor}\n                          archived={archived}\n                        />\n                      ))}\n                    </tbody>\n                  </HTMLTable>\n                ) : (\n                  <p className={Classes.TEXT_MUTED}>\n                    No <code>{t.name}</code> factors yet.\n                  </p>\n                )}\n              </Card>\n            );\n          })}\n        </div>\n\n        {archived ? (\n          <p>\n            <br />\n            <Link to=\"/admin/factors\">Back to Active Factors</Link>\n          </p>\n        ) : (\n          <>\n            <br />\n\n            <Button\n              text=\"New Factor\"\n              onClick={() => this.setState({ newFactorIsOpen: true })}\n            />\n\n            <AdminNewFactorType\n              factors={factors}\n              factorTypes={factorTypes}\n              onClose={() => this.setState({ newFactorIsOpen: false })}\n              isOpen={this.state.newFactorIsOpen}\n            />\n\n            <p>\n              <br />\n              <Link to=\"/admin/factors/archived\">View Archived Factors</Link>\n            </p>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport { Icon, NonIdealState } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { AdminPageHeader } from \"./AdminHeading.jsx\";\n\nexport default class AdminGames extends React.Component {\n  render() {\n    return (\n      <div className=\"games\">\n        <AdminPageHeader icon={IconNames.FLOWS}>Games</AdminPageHeader>\n\n        <NonIdealState icon={IconNames.BUILD} title=\"Under construction\" />\n      </div>\n    );\n  }\n}\n","// This is only to be able to centralize the style of admin headings.\nimport React from \"react\";\n\nimport { Icon } from \"@blueprintjs/core\";\n\nimport { H2 } from \"../Heading.jsx\";\n\nexport const AdminPageHeader = props => (\n  <H2 className=\"admin-heading\" iconSize={Icon.SIZE_LARGE} {...props} />\n);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { Button, Classes, EditableText, Intent } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { updateLobbyConfig } from \"../../../api/lobby-configs/methods\";\n\nimport { AlertToaster } from \"../Toasters.jsx\";\n\nexport default class AdminLobbyConfig extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.lobbyConfig.name || \"\"\n    };\n  }\n\n  componentWillUpdate(props) {\n    if (props.lobbyConfig.name !== this.props.lobbyConfig.name) {\n      this.setState({ name: props.lobbyConfig.name || \"\" });\n    }\n  }\n\n  handleNameChange = name => {\n    this.setState({ name: name || \"\" });\n  };\n\n  handleNameConfirm = () => {\n    const { _id, name: prevName } = this.props.lobbyConfig;\n    const { name: nameRaw } = this.state;\n    const name = nameRaw.trim();\n    if (name === prevName) {\n      this.handleNameChange(prevName);\n      return;\n    }\n\n    updateLobbyConfig.call({ _id, name }, err => {\n      if (err) {\n        AlertToaster.show({ message: String(err) });\n        this.handleNameChange(prevName);\n        return;\n      }\n    });\n  };\n\n  handleArchive = () => {\n    const {\n      archived,\n      lobbyConfig: { _id }\n    } = this.props;\n    updateLobbyConfig.call({ _id, archived: !archived });\n  };\n\n  render() {\n    const { lobbyConfig, archived } = this.props;\n    const { name } = this.state;\n\n    const archiveIntent = archived ? Intent.SUCCESS : Intent.DANGER;\n    return (\n      <tr>\n        <td>\n          <EditableText\n            onChange={this.handleNameChange}\n            onConfirm={this.handleNameConfirm}\n            value={name}\n          />\n        </td>\n        <td>{lobbyConfig.timeoutType}</td>\n        <td>{lobbyConfig.timeoutInSeconds}s</td>\n        <td>\n          {lobbyConfig.timeoutType === \"lobby\"\n            ? lobbyConfig.timeoutStrategy\n            : \"-\"}\n        </td>\n        <td>\n          {lobbyConfig.timeoutType === \"individual\"\n            ? lobbyConfig.extendCount\n            : \"-\"}\n        </td>\n        <td>\n          <Button\n            text={archived ? \"Unarchive\" : \"Archive\"}\n            className={Classes.SMALL}\n            minimal\n            icon={IconNames.BOX}\n            intent={archiveIntent}\n            onClick={this.handleArchive}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { Button, HTMLTable, Icon } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport AdminNewLobbyConfig from \"./AdminNewLobbyConfig.jsx\";\nimport AdminLobbyConfig from \"./AdminLobbyConfig.jsx\";\nimport Loading from \"../Loading.jsx\";\nimport { AdminPageHeader } from \"./AdminHeading.jsx\";\n\nexport default class AdminLobbyConfigs extends React.Component {\n  state = { newLobbyIsOpen: false };\n\n  render() {\n    const { loading, lobbyConfigs, archived } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    return (\n      <div className=\"lobbies\">\n        <AdminPageHeader icon={IconNames.TIME}>\n          {archived ? \"Archived Lobby Configurations\" : \"Lobby Configurations\"}\n        </AdminPageHeader>\n\n        {lobbyConfigs.length === 0 ? (\n          <p>\n            {archived\n              ? \"No archived lobby configurations.\"\n              : \"No lobby configurations yet, create some bellow.\"}\n          </p>\n        ) : (\n          <HTMLTable striped>\n            <thead>\n              <tr>\n                <th>Name</th>\n                <th>\n                  <em>Type</em>\n                </th>\n                <th>\n                  <em>Timeout</em>\n                </th>\n                <th>\n                  <em>Timeout Strategy</em>\n                </th>\n                <th>\n                  <em>Extend Count</em>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {_.map(lobbyConfigs, lobbyConfig => (\n                <AdminLobbyConfig\n                  key={lobbyConfig._id}\n                  lobbyConfig={lobbyConfig}\n                  archived={archived}\n                />\n              ))}\n            </tbody>\n          </HTMLTable>\n        )}\n\n        {archived ? (\n          <p>\n            <br />\n            <Link to=\"/admin/lobby-configurations\">\n              Back to Active Lobby Configurations\n            </Link>\n          </p>\n        ) : (\n          <>\n            <br />\n\n            <Button\n              text=\"New Lobby Configuration\"\n              onClick={() => this.setState({ newLobbyIsOpen: true })}\n            />\n\n            <AdminNewLobbyConfig\n              onClose={() => this.setState({ newLobbyIsOpen: false })}\n              isOpen={this.state.newLobbyIsOpen}\n            />\n\n            <p>\n              <br />\n              <Link to=\"/admin/lobby-configurations/archived\">\n                View Archived Lobby Configurations\n              </Link>\n            </p>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport {\n  Button,\n  Classes,\n  Dialog,\n  FormGroup,\n  HTMLSelect,\n  HTMLTable,\n  Intent,\n  NumericInput\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport {\n  assignmentTypes,\n  maxGamesCount\n} from \"../../../api/batches/batches.js\";\nimport { createBatch } from \"../../../api/batches/methods.js\";\n\nimport { AlertToaster } from \"../Toasters.jsx\";\n\nexport default class AdminNewBatch extends React.Component {\n  state = {\n    assignment: \"simple\",\n    simpleTreatments: [],\n    completeTreatments: [],\n    simpleGamesCount: 1,\n    gamesCount: 1\n  };\n\n  gamesCountCalc(assignment, completeTreatments, simpleGamesCount) {\n    return assignment === \"complete\"\n      ? _.inject(completeTreatments, (sum, t) => (t.count || 0) + sum, 0)\n      : simpleGamesCount;\n  }\n\n  handleAssignmentChange = event => {\n    const { completeTreatments, simpleGamesCount } = this.state;\n    const assignment = event.currentTarget.value;\n    this.setState({\n      assignment,\n      gamesCount: this.gamesCountCalc(\n        assignment,\n        completeTreatments,\n        simpleGamesCount\n      )\n    });\n  };\n\n  handleGamesCountChange = simpleGamesCount => {\n    this.setState({\n      simpleGamesCount,\n      gamesCount: simpleGamesCount\n    });\n  };\n\n  handleAddTreatment = event => {\n    event.preventDefault();\n\n    const lobbyConfigs = this.validLobbyConfigs();\n    const { assignment, simpleGamesCount } = this.state;\n\n    const key = `${assignment}Treatments`;\n    const _id = event.currentTarget.value;\n\n    if (!_id) {\n      return;\n    }\n\n    const params = {};\n    const existing = this.state[key].find(tt => tt._id === _id);\n    const treatment = existing || {\n      _id,\n      count: 1,\n      lobbyConfigId: !_.isEmpty(lobbyConfigs) && lobbyConfigs[0]._id\n    };\n\n    if (!existing) {\n      this.state[key].push(treatment);\n    } else {\n      existing.count++;\n    }\n    params[key] = this.state[key];\n    if (assignment === \"complete\") {\n      params.gamesCount = this.state.gamesCount + 1;\n    }\n    this.setState(params);\n  };\n\n  handleTreatmentCountChange = (id, count) => {\n    const { assignment, completeTreatments, simpleGamesCount } = this.state;\n\n    const key = `${assignment}Treatments`;\n    const t = this.state[key].find(tt => tt._id === id);\n    t.count = count;\n\n    const params = { [key]: this.state[key] };\n    if (assignment === \"complete\") {\n      params.gamesCount = this.gamesCountCalc(\n        assignment,\n        this.state[key],\n        simpleGamesCount\n      );\n    }\n\n    this.setState(params);\n  };\n\n  handleLobbyConfigChange = (id, event) => {\n    const {\n      currentTarget: { value: lobbyConfigId }\n    } = event;\n    const { assignment, completeTreatments } = this.state;\n\n    const key = `${assignment}Treatments`;\n    const t = this.state[key].find(tt => tt._id === id);\n    t.lobbyConfigId = lobbyConfigId;\n\n    this.setState({ [key]: this.state[key] });\n  };\n\n  handleRemoveTreatment = event => {\n    event.preventDefault();\n\n    const { assignment, simpleGamesCount, gamesCount } = this.state;\n    const key = `${assignment}Treatments`;\n\n    const id = event.currentTarget.dataset.id;\n    const treatment = this.state[key].find(t => t._id === id);\n    const val = _.reject(this.state[key], t => t._id === id);\n    const params = { [key]: val };\n\n    if (assignment === \"complete\") {\n      params.gamesCount = gamesCount - treatment.count;\n    }\n\n    this.setState(params);\n  };\n\n  handleNewBatch = event => {\n    event.preventDefault();\n    const {\n      assignment,\n      simpleGamesCount,\n      simpleTreatments,\n      completeTreatments\n    } = this.state;\n    const params = { assignment };\n\n    switch (assignment) {\n      case \"simple\":\n        const treatments = simpleTreatments.map(t =>\n          _.pick(t, \"_id\", \"lobbyConfigId\")\n        );\n        params.simpleConfig = {\n          treatments,\n          count: simpleGamesCount\n        };\n        break;\n      case \"complete\":\n        params.completeConfig = {\n          treatments: completeTreatments\n        };\n        break;\n      default:\n        AlertToaster.show({ message: \"unknown assignement type?!\" });\n        return;\n    }\n\n    createBatch.call(params, err => {\n      if (err) {\n        console.error(JSON.stringify(err));\n        AlertToaster.show({ message: String(err) });\n        return;\n      }\n\n      this.setState({\n        assignment: \"simple\",\n        simpleTreatments: [],\n        completeTreatments: [],\n        simpleGamesCount: 1,\n        gamesCount: 1\n      });\n      this.props.onClose();\n    });\n  };\n\n  validTreatments() {\n    const { treatments } = this.props;\n\n    return treatments.filter(t => !t.archivedAt);\n  }\n\n  validLobbyConfigs() {\n    const { lobbyConfigs } = this.props;\n\n    return lobbyConfigs.filter(l => !l.archivedAt);\n  }\n\n  renderRequired() {\n    const issues = [];\n    const treatments = this.validTreatments();\n    const lobbyConfigs = this.validLobbyConfigs();\n\n    if (_.isEmpty(treatments)) {\n      issues.push(<Link to=\"/admin/treatments\">Create a Treatment</Link>);\n    }\n\n    if (_.isEmpty(lobbyConfigs)) {\n      issues.push(\n        <Link to=\"/admin/lobby-configurations\">\n          Create a Lobby Configuration\n        </Link>\n      );\n    }\n\n    return (\n      <div className={Classes.DIALOG_BODY}>\n        You must first:\n        <ul>\n          {issues.map((issue, i) => (\n            <li key={i}>{issue}</li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n\n  renderContent() {\n    const treatments = this.validTreatments();\n    const lobbyConfigs = this.validLobbyConfigs();\n\n    const {\n      gamesCount,\n      assignment,\n      simpleTreatments,\n      completeTreatments\n    } = this.state;\n\n    const isComplete = assignment === \"complete\";\n    const currentTreatments = isComplete\n      ? completeTreatments\n      : simpleTreatments;\n\n    return (\n      <form className=\"new-batch\" onSubmit={this.handleNewBatch}>\n        <div className={Classes.DIALOG_BODY}>\n          <FormGroup label=\"Assignment Method\" labelFor=\"assignment\">\n            <HTMLSelect\n              name=\"assignment\"\n              id=\"assignment\"\n              onChange={this.handleAssignmentChange}\n              value={assignment}\n            >\n              {_.map(assignmentTypes, (name, key) => (\n                <option key={key} value={key}>\n                  {name}\n                </option>\n              ))}\n            </HTMLSelect>\n          </FormGroup>\n\n          <FormGroup label=\"Treatments\" labelFor=\"treatment\">\n            {currentTreatments.length > 0 ? (\n              <HTMLTable striped bordered>\n                <thead>\n                  <tr>\n                    <th>Treatment</th>\n                    <th>Lobby Configuration</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {_.map(currentTreatments, t => {\n                    const id = `gamesCount${t._id}`;\n                    const treatment = treatments.find(tt => tt._id === t._id);\n                    return (\n                      <tr key={id}>\n                        <td>{treatment.displayName()} </td>\n\n                        <td>\n                          <HTMLSelect\n                            name=\"lobbyConfigId\"\n                            id=\"lobbyConfigId\"\n                            onChange={this.handleLobbyConfigChange.bind(\n                              this,\n                              t._id\n                            )}\n                            value={t.lobbyConfigId}\n                            style={{ width: 250 }}\n                          >\n                            {_.map(lobbyConfigs, l => (\n                              <option key={l._id} value={l._id}>\n                                {l.displayName()}\n                              </option>\n                            ))}\n                          </HTMLSelect>\n                        </td>\n\n                        {isComplete ? (\n                          <td>\n                            <NumericInput\n                              name={id}\n                              id={id}\n                              min=\"1\"\n                              max={maxGamesCount}\n                              stepSize=\"1\"\n                              onValueChange={this.handleTreatmentCountChange.bind(\n                                this,\n                                t._id\n                              )}\n                              value={t.count}\n                              style={{ width: 100 }}\n                            />\n                          </td>\n                        ) : null}\n                        <td>\n                          <Button\n                            text=\"Remove\"\n                            intent={Intent.DANGER}\n                            onClick={this.handleRemoveTreatment}\n                            data-id={t._id}\n                          />\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </HTMLTable>\n            ) : (\n              \"\"\n            )}\n\n            {currentTreatments.length === 0 ? (\n              <p className=\"bp3-text-muted\">No treatments yet, add one:</p>\n            ) : (\n              \"\"\n            )}\n\n            <br />\n\n            <HTMLSelect\n              name=\"treatment\"\n              id=\"treatment\"\n              onChange={this.handleAddTreatment}\n              value={\"\"}\n              style={{ width: 250 }}\n            >\n              <option value=\"\">Add a new treatment...</option>\n              {_.map(treatments, tr => (\n                <option key={tr._id} value={tr._id}>\n                  {tr.displayName()}\n                </option>\n              ))}\n            </HTMLSelect>\n          </FormGroup>\n\n          <FormGroup\n            label=\"Game Count\"\n            labelFor=\"gamesCount\"\n            helperText={isComplete ? null : \"The total number of games to run\"}\n          >\n            {isComplete ? (\n              gamesCount\n            ) : (\n              <NumericInput\n                name=\"gamesCount\"\n                id=\"gamesCount\"\n                min=\"1\"\n                max={maxGamesCount}\n                stepSize=\"1\"\n                onValueChange={this.handleGamesCountChange}\n                value={gamesCount}\n              />\n            )}\n          </FormGroup>\n        </div>\n        <div className={Classes.DIALOG_FOOTER}>\n          <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n            <Button type=\"submit\" text=\"Create Batch\" intent={Intent.PRIMARY} />\n          </div>\n        </div>\n      </form>\n    );\n  }\n\n  render() {\n    const { isOpen, onClose } = this.props;\n    const treatments = this.validTreatments();\n    const lobbyConfigs = this.validLobbyConfigs();\n\n    const content =\n      _.isEmpty(treatments) || _.isEmpty(lobbyConfigs)\n        ? this.renderRequired()\n        : this.renderContent();\n\n    return (\n      <Dialog\n        icon={IconNames.LAYERS}\n        isOpen={isOpen}\n        onClose={onClose}\n        title=\"New Batch\"\n        style={{ width: 700 }}\n      >\n        {content}\n      </Dialog>\n    );\n  }\n}\n","import React from \"react\";\n\nimport {\n  Classes,\n  Button,\n  Dialog,\n  FormGroup,\n  Intent,\n  NumericInput\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { Factors } from \"../../../api/factors/factors.js\";\nimport { AlertToaster } from \"../Toasters.jsx\";\nimport { createFactor } from \"../../../api/factors/methods.js\";\n\nexport default class AdminNewFactor extends React.Component {\n  state = { value: \"\", name: \"\", loading: false };\n\n  constructor(props) {\n    super(props);\n    this.valueInputRef = React.createRef();\n  }\n\n  componentDidMount() {\n    if (this.props.isOpen) {\n      this.focus();\n    }\n  }\n\n  componentDidUpdate(prevProp) {\n    if (this.props.isOpen && !prevProp.isOpen) {\n      this.focus();\n    }\n  }\n\n  focus() {\n    setTimeout(() => {\n      const node = this.valueInputRef.current;\n      if (node) {\n        node.focus();\n      }\n    }, 100);\n  }\n\n  handleIntUpdate = value => {\n    this.setState({ value });\n  };\n\n  handleUpdate = event => {\n    const name = event.currentTarget.name;\n    const value = event.currentTarget.value;\n    this.setState({ [name]: value });\n  };\n\n  handleNewFactor = event => {\n    event.preventDefault();\n\n    const { name, value, loading } = this.state;\n    if (loading) {\n      return;\n    }\n    this.setState({ loading: true });\n\n    const {\n      type: { _id: factorTypeId, type },\n      onClose\n    } = this.props;\n\n    const params = Factors.schema.clean(\n      { factorTypeId, name, value },\n      { autoConvert: false }\n    );\n\n    if (type === \"Number\") {\n      params.value = parseFloat(params.value);\n    }\n\n    createFactor.call(params, err => {\n      if (err) {\n        AlertToaster.show({\n          message: err.reason || err.message || err.toString()\n        });\n        this.setState({ loading: false });\n        return;\n      }\n      onClose();\n      this.setState({ loading: false, name: \"\", value: undefined });\n    });\n  };\n\n  render() {\n    const { isOpen, onClose, type } = this.props;\n    const { name, value, loading } = this.state;\n\n    let input;\n    switch (type.type) {\n      case \"Number\":\n        input = (\n          <input\n            className={Classes.INPUT}\n            dir=\"auto\"\n            type=\"number\"\n            name=\"value\"\n            id=\"value\"\n            step=\"any\"\n            min={type.min || -1000000000000}\n            max={type.max || 1000000000000}\n            value={value}\n            onChange={this.handleUpdate}\n            required\n            ref={this.valueInputRef}\n          />\n        );\n        break;\n      case \"Integer\":\n        input = (\n          <NumericInput\n            name=\"value\"\n            id=\"value\"\n            min={type.min || -1000000000000}\n            max={type.max || 1000000000000}\n            value={value}\n            required\n            onValueChange={this.handleIntUpdate}\n            inputRef={this.valueInputRef}\n          />\n        );\n        break;\n      case \"String\":\n        input = (\n          <input\n            className={Classes.INPUT}\n            dir=\"auto\"\n            type=\"text\"\n            name=\"value\"\n            id=\"value\"\n            autoComplete=\"off\"\n            value={value}\n            onChange={this.handleUpdate}\n            // pattern={type.regEx && type.regEx.source}\n            required\n            ref={this.valueInputRef}\n          />\n        );\n        break;\n      default:\n        console.error(\"New factor unsupported type:\", type.type);\n        break;\n    }\n\n    let properties = [];\n    if (!_.isUndefined(type.min)) {\n      properties.push(`Min: ${type.min}`);\n    }\n    if (!_.isUndefined(type.max)) {\n      properties.push(`Max: ${type.max}`);\n    }\n    // if (!_.isUndefined(type.regEx)) {\n    //   properties.push(`Pattern: ${type.regEx.source}`);\n    // }\n\n    return (\n      <Dialog\n        icon={IconNames.PROPERTY}\n        isOpen={isOpen}\n        onClose={onClose}\n        title={`New ${type.name} Factor Value`}\n      >\n        <form className=\"new-factor\" onSubmit={this.handleNewFactor}>\n          <div className={Classes.DIALOG_BODY}>\n            <FormGroup\n              label=\"Name\"\n              labelFor=\"name\"\n              helperText=\"Only characters, numbers and underscore (_). No spaces.\"\n            >\n              <input\n                className={Classes.INPUT}\n                dir=\"auto\"\n                type=\"text\"\n                name=\"name\"\n                id=\"name\"\n                autoComplete=\"off\"\n                value={name}\n                pattern={/^[a-zA-Z0-9_]+$/.source}\n                onChange={this.handleUpdate}\n                // required\n              />\n            </FormGroup>\n\n            <FormGroup\n              label=\"Value\"\n              labelFor=\"name\"\n              helperText={properties.length > 0 ? properties.join(\" - \") : \"\"}\n            >\n              {input}\n            </FormGroup>\n          </div>\n          <div className={Classes.DIALOG_FOOTER}>\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n              <Button\n                loading={loading}\n                type=\"submit\"\n                text=\"Create Factor Value\"\n                intent={Intent.PRIMARY}\n              />\n            </div>\n          </div>\n        </form>\n      </Dialog>\n    );\n  }\n}\n","import React from \"react\";\n\nimport {\n  Classes,\n  Button,\n  Dialog,\n  FormGroup,\n  HTMLSelect,\n  Intent,\n  NumericInput,\n  Switch,\n  TagInput,\n  TextArea\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { FactorTypes } from \"../../../api/factor-types/factor-types.js\";\nimport { createFactorType } from \"../../../api/factor-types/methods.js\";\nimport { AlertToaster } from \"../Toasters.jsx\";\nimport HelpTooltip from \"../HelpTooltip.jsx\";\n\nexport default class AdminNewFactorType extends React.Component {\n  state = { type: \"String\", name: \"\", initialValues: [], required: false };\n  constructor(props) {\n    super(props);\n    this.firstInputRef = React.createRef();\n  }\n\n  componentDidUpdate(prevProp) {\n    if (this.props.isOpen && !prevProp.isOpen) {\n      setTimeout(() => {\n        const node = this.firstInputRef.current;\n        if (node) {\n          node.focus();\n        }\n      }, 100);\n    }\n  }\n\n  handleNumberUpdate = (name, value, valueAsString) => {\n    this.setState({ [name]: valueAsString });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.currentTarget;\n    this.setState({ [name]: value });\n  };\n\n  handleChangeCheckbox = event => {\n    const { name, checked } = event.currentTarget;\n    this.setState({ [name]: checked });\n  };\n\n  handleNewFactorType = event => {\n    event.preventDefault();\n    if (this.stopsubmit) {\n      return;\n    }\n    let {\n      name,\n      description,\n      type,\n      min,\n      max,\n      initialValues,\n      required\n    } = this.state;\n    const { onClose } = this.props;\n\n    const params = {\n      name,\n      description,\n      type,\n      min,\n      max,\n      required\n    };\n\n    params.initialValues = initialValues.filter(\n      v => !Factors.valueValidation(params, v)\n    );\n\n    if (params.min !== undefined) {\n      params.min = parseFloat(params.min);\n    }\n\n    if (params.max !== undefined) {\n      params.max = parseFloat(params.max);\n    }\n\n    createFactorType.call(params, err => {\n      if (err) {\n        AlertToaster.show({\n          message: err.reason || err.message || err.toString()\n        });\n        return;\n      }\n      onClose();\n      this.setState({\n        name: \"\",\n        description: \"\",\n        type: \"String\",\n        min: undefined,\n        max: undefined,\n        initialValues: [],\n        required: false\n      });\n    });\n  };\n\n  render() {\n    const { isOpen, onClose } = this.props;\n    const {\n      name,\n      description,\n      type,\n      min,\n      max,\n      initialValues,\n      required\n    } = this.state;\n\n    const extraInputs = [];\n    switch (type) {\n      case \"Number\":\n      case \"Integer\":\n        extraInputs.push(\n          <FormGroup\n            key=\"min\"\n            label=\"Min\"\n            labelFor=\"min\"\n            helperText=\"Minimum accepted value\"\n          >\n            <NumericInput\n              value={min}\n              onValueChange={this.handleNumberUpdate.bind(this, \"min\")}\n            />\n          </FormGroup>\n        );\n\n        extraInputs.push(\n          <FormGroup\n            key=\"max\"\n            label=\"Max\"\n            labelFor=\"max\"\n            helperText=\"Maximum accepted value.\"\n          >\n            <NumericInput\n              value={max}\n              onValueChange={this.handleNumberUpdate.bind(this, \"max\")}\n            />\n          </FormGroup>\n        );\n        break;\n      case \"String\":\n        extraInputs.push(\n          <FormGroup\n            key=\"min\"\n            label=\"Min\"\n            labelFor=\"min\"\n            helperText=\"Minimum number of characters.\"\n          >\n            <NumericInput\n              min={1}\n              max={1000000000000}\n              value={min}\n              onValueChange={this.handleNumberUpdate.bind(this, \"min\")}\n            />\n          </FormGroup>\n        );\n\n        extraInputs.push(\n          <FormGroup\n            key=\"max\"\n            label=\"Max\"\n            labelFor=\"max\"\n            helperText=\"Maximum number of characters.\"\n          >\n            <NumericInput\n              min={1}\n              max={1000000000000}\n              value={max}\n              onValueChange={this.handleNumberUpdate.bind(this, \"max\")}\n            />\n          </FormGroup>\n        );\n\n        break;\n      case \"Boolean\":\n        break;\n      default:\n        console.error(\"New factor unsupported type:\", type.stringType);\n        break;\n    }\n\n    return (\n      <Dialog\n        icon={IconNames.PROPERTY}\n        isOpen={isOpen}\n        onClose={onClose}\n        title=\"New Factor\"\n      >\n        <form\n          className=\"new-factor-type\"\n          //\n          onSubmit={this.handleNewFactorType}\n        >\n          <div className={Classes.DIALOG_BODY}>\n            <FormGroup\n              label=\"Type\"\n              labelFor=\"type\"\n              labelInfo={\n                <HelpTooltip\n                  content={\n                    <div>\n                      There are 4 types:\n                      <ul>\n                        <li>\n                          <strong>String:</strong> either any string value,\n                          with. the possibility to set a min and max number of\n                          characters, or a fixed set of values (allowed values).\n                        </li>\n                        <li>\n                          <strong>Integer:</strong> An integer value, with\n                          optional min and/or max values.\n                        </li>\n                        <li>\n                          <strong>Number:</strong> A Number works like Integer\n                          and adds support for decimal numbers.\n                        </li>\n                        <li>\n                          <strong>Boolean:</strong> A Boolean will support only\n                          true or false values.\n                        </li>\n                      </ul>\n                    </div>\n                  }\n                />\n              }\n            >\n              <HTMLSelect\n                name=\"type\"\n                id=\"type\"\n                onChange={this.handleChange}\n                value={type}\n                options={FactorTypes.types}\n              />\n            </FormGroup>\n\n            <Switch\n              label=\"Required\"\n              name=\"required\"\n              checked={required}\n              onChange={this.handleChangeCheckbox}\n            />\n\n            <FormGroup\n              label=\"Name\"\n              labelFor=\"name\"\n              helperText={\n                <>\n                  Format: <code>camelCase</code>. Only letters and numbers, with\n                  leading lowercase letters.\n                </>\n              }\n              labelInfo=\"(required)\"\n            >\n              <input\n                className={Classes.INPUT}\n                dir=\"auto\"\n                type=\"text\"\n                name=\"name\"\n                id=\"name\"\n                autoComplete=\"off\"\n                value={name}\n                pattern={/^[a-zA-Z0-9_]+$/.source}\n                onChange={this.handleChange}\n                required\n                ref={this.firstInputRef}\n              />\n            </FormGroup>\n\n            <FormGroup\n              label=\"Description\"\n              labelFor=\"description\"\n              labelInfo=\"(required)\"\n              // helperText={<>Format: <code>camelCase</code>. Only letters and numbers, with leading lowercase letters.<>}\n            >\n              <TextArea\n                required\n                fill\n                id=\"description\"\n                name=\"description\"\n                onChange={this.handleChange}\n                value={description}\n              />\n            </FormGroup>\n\n            {extraInputs}\n\n            {/* {type === \"Boolean\" ? null : (\n              <FormGroup\n                key=\"initialValues\"\n                label=\"Initial Values\"\n                labelFor=\"initialValues\"\n                helperText=\"List of initial values to create with the new Factor.\"\n              >\n                <TagInput\n                  inputProps={{\n                    onFocus: () => {\n                      this.stopsubmit = true;\n                    },\n                    onBlur: () => {\n                      this.stopsubmit = false;\n                    }\n                  }}\n                  addOnBlur\n                  onChange={value => this.setState({ initialValues: value })}\n                  values={initialValues}\n                />\n              </FormGroup>\n            )} */}\n          </div>\n          <div className={Classes.DIALOG_FOOTER}>\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n              <Button\n                type=\"submit\"\n                text=\"Create Factor\"\n                intent={Intent.PRIMARY}\n                // onClick={this.handleNewFactorType}\n              />\n            </div>\n          </div>\n        </form>\n      </Dialog>\n    );\n  }\n}\n","import React from \"react\";\nimport inflection from \"inflection\";\n\nimport {\n  Classes,\n  Button,\n  Dialog,\n  FormGroup,\n  HTMLSelect,\n  Intent,\n  NumericInput\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { AlertToaster } from \"../Toasters.jsx\";\nimport { LobbyConfigs } from \"../../../api/lobby-configs/lobby-configs.js\";\nimport { createLobbyConfig } from \"../../../api/lobby-configs/methods.js\";\nimport HelpTooltip from \"../HelpTooltip.jsx\";\n\nexport default class AdminNewLobbyConfig extends React.Component {\n  state = {\n    name: \"\",\n    timeoutInSeconds: LobbyConfigs.defaultTimeoutInSeconds,\n    timeoutType: LobbyConfigs.timeoutTypes[0],\n    timeoutStrategy: LobbyConfigs.timeoutStrategies[0],\n    extendCount: 0\n  };\n\n  handleChange = ({ currentTarget: { value, name } }) => {\n    this.setState({ [name]: value.trim() });\n  };\n\n  handleIntChange = (name, value) => {\n    this.setState({ [name]: value });\n  };\n\n  handleNewLobbyConfig = event => {\n    const { onClose } = this.props;\n    const {\n      name,\n      timeoutInSeconds,\n      timeoutType,\n      timeoutStrategy,\n      extendCount\n    } = this.state;\n    event.preventDefault();\n\n    const params = { timeoutInSeconds, timeoutType };\n    if (name !== \"\") {\n      params.name = name;\n    }\n    if (timeoutType === \"lobby\") {\n      params.timeoutStrategy = timeoutStrategy;\n    } else if (timeoutType === \"individual\") {\n      params.extendCount = extendCount;\n    }\n\n    createLobbyConfig.call(params, err => {\n      if (err) {\n        AlertToaster.show({ message: String(err.message) });\n        return;\n      }\n      onClose();\n      this.setState({\n        name: \"\"\n      });\n    });\n  };\n\n  render() {\n    const { isOpen, onClose } = this.props;\n    const {\n      name,\n      timeoutType,\n      timeoutStrategy,\n      timeoutInSeconds,\n      extendCount\n    } = this.state;\n\n    return (\n      <Dialog\n        icon={IconNames.TIME}\n        isOpen={isOpen}\n        onClose={onClose}\n        title=\"New Lobby Configuration\"\n      >\n        <form className=\"new-treatment\" onSubmit={this.handleNewLobbyConfig}>\n          <div className={Classes.DIALOG_BODY}>\n            <FormGroup label=\"Name\" labelInfo=\"(optional)\" labelFor=\"name\">\n              <input\n                className={Classes.INPUT}\n                type=\"text\"\n                dir=\"auto\"\n                name=\"name\"\n                id=\"name\"\n                autoComplete=\"off\"\n                value={name}\n                onChange={this.handleChange}\n                pattern={/^[a-zA-Z0-9_]+$/.source}\n              />\n            </FormGroup>\n\n            <FormGroup\n              label=\"Timeout Type\"\n              labelFor=\"timeoutType\"\n              labelInfo={\n                <HelpTooltip\n                  content={\n                    <div>\n                      There are 2 timeout types:\n                      <ul>\n                        <li>\n                          <strong>Lobby:</strong> the timeout start when the\n                          first player reaches the lobby and runs out for all\n                          the players whether they have even reached the lobby\n                          or not.\n                        </li>\n                        <li>\n                          <strong>Individual:</strong> the timeout is started\n                          for each player as they reach the room. Some players\n                          might time out before all players are in the lobby,\n                          they might continue waiting for another timeout\n                          period. They might also leave the game and a new\n                          player can replace them. The lobby itself never times\n                          out.\n                        </li>\n                      </ul>\n                    </div>\n                  }\n                />\n              }\n            >\n              <HTMLSelect\n                name=\"timeoutType\"\n                id=\"timeoutType\"\n                onChange={this.handleChange}\n                value={timeoutType}\n              >\n                {_.map(LobbyConfigs.timeoutTypes, key => (\n                  <option key={key} value={key}>\n                    {inflection.titleize(key)}\n                  </option>\n                ))}\n              </HTMLSelect>\n            </FormGroup>\n\n            <FormGroup\n              required\n              label=\"Timeout Duration in Seconds\"\n              labelFor=\"timeoutInSeconds\"\n            >\n              <NumericInput\n                name=\"timeoutInSeconds\"\n                id=\"timeoutInSeconds\"\n                min=\"1\"\n                max={LobbyConfigs.maxTimeoutInSeconds}\n                stepSize=\"1\"\n                majorStepSize=\"10\"\n                onValueChange={this.handleIntChange.bind(\n                  this,\n                  \"timeoutInSeconds\"\n                )}\n                value={timeoutInSeconds}\n                required\n              />\n            </FormGroup>\n\n            {timeoutType === \"individual\" ? (\n              <FormGroup\n                label=\"Extend Count\"\n                labelFor=\"extendCount\"\n                labelInfo={\n                  <HelpTooltip\n                    content={\n                      <div>\n                        Number of times to allow the user to extend their wait\n                        time by the initial timeout time. If set to 0, they are\n                        never asked to retry.\n                      </div>\n                    }\n                  />\n                }\n              >\n                <NumericInput\n                  name=\"extendCount\"\n                  id=\"extendCount\"\n                  min=\"0\"\n                  max={1000000000}\n                  stepSize=\"1\"\n                  majorStepSize=\"10\"\n                  onValueChange={this.handleIntChange.bind(this, \"extendCount\")}\n                  value={extendCount}\n                  required\n                />\n              </FormGroup>\n            ) : (\n              \"\"\n            )}\n\n            {timeoutType === \"lobby\" ? (\n              <FormGroup\n                label=\"Timeout Strategy\"\n                labelFor=\"timeoutStrategy\"\n                labelInfo={\n                  <HelpTooltip\n                    content={\n                      <div>\n                        The Timeout Strategy determines what to do in case\n                        people are waiting in the lobby for longer than the\n                        timeout duration. Available strategies:\n                        <ul>\n                          <li>\n                            <strong>Ignore:</strong> start the game anyway\n                          </li>\n                          <li>\n                            <strong>Fail:</strong> take the player to the exit\n                            survey\n                          </li>\n                          <li>\n                            <strong>Bots:</strong> fill the missing players\n                            slots with bots from timeoutBots.\n                          </li>\n                        </ul>\n                      </div>\n                    }\n                  />\n                }\n              >\n                <HTMLSelect\n                  name=\"timeoutStrategy\"\n                  id=\"timeoutStrategy\"\n                  onChange={this.handleChange}\n                  value={timeoutStrategy}\n                >\n                  {_.map(LobbyConfigs.timeoutStrategies, key => (\n                    <option key={key} value={key}>\n                      {inflection.titleize(key)}\n                    </option>\n                  ))}\n                </HTMLSelect>\n              </FormGroup>\n            ) : (\n              \"\"\n            )}\n          </div>\n\n          <div className={Classes.DIALOG_FOOTER}>\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n              <Button\n                type=\"submit\"\n                text=\"Create Lobby Configuration\"\n                intent={Intent.PRIMARY}\n              />\n            </div>\n          </div>\n        </form>\n      </Dialog>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport {\n  Callout,\n  Classes,\n  Button,\n  Dialog,\n  FormGroup,\n  Intent,\n  RadioGroup,\n  Radio\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { AlertToaster } from \"../Toasters.jsx\";\nimport { createTreatment } from \"../../../api/treatments/methods.js\";\n\nexport default class AdminNewTreatment extends React.Component {\n  state = { selected: {}, name: \"\" };\n\n  handleNameChange = () => {\n    const name = this.nameField.value;\n    this.setState({ name });\n  };\n\n  handleFactorChange = (type, event) => {\n    const factorId = event.currentTarget.value;\n    const selected = {\n      ...this.state.selected,\n      [type]: factorId\n    };\n    this.setState({ selected });\n  };\n\n  handleNewTreatment = event => {\n    const { onClose } = this.props;\n    const { name, selected } = this.state;\n    event.preventDefault();\n\n    const keys = _.compact(_.keys(selected));\n    const factorIds = _.compact(_.values(selected));\n\n    if (keys.length !== factorIds.length) {\n      const missing = keys.join(\", \");\n      const msg = `A value for each factor must be selected. (missing: ${missing})`;\n      AlertToaster.show({ message: msg });\n      return;\n    }\n\n    const params = { name, factorIds };\n    createTreatment.call(params, err => {\n      if (err) {\n        if (err.details) {\n          try {\n            const details = JSON.parse(err.details);\n            const out = details[0].details\n              .map(er => {\n                switch (er.type) {\n                  case \"required\":\n                    return `${er.name} is required.`;\n                  default:\n                    console.error(\"unknown error type\", er);\n                }\n              })\n              .join(\" \");\n            AlertToaster.show({ message: out });\n          } catch (e) {\n            console.error(JSON.stringify(err));\n            AlertToaster.show({ message: String(err.message) });\n          }\n        } else {\n          AlertToaster.show({ message: String(err.message) });\n        }\n        return;\n      }\n      onClose();\n      this.setState({\n        name: \"\",\n        selected: {}\n      });\n    });\n  };\n\n  render() {\n    const { isOpen, factors, factorTypes, onClose } = this.props;\n    const { name, selected } = this.state;\n\n    const types = factorTypes.filter(t => !t.archivedAt);\n\n    return (\n      <Dialog\n        className=\"admin\"\n        icon={IconNames.PROPERTIES}\n        isOpen={isOpen}\n        onClose={onClose}\n        title=\"New Treatment\"\n      >\n        <form className=\"new-treatment\" onSubmit={this.handleNewTreatment}>\n          <div className={Classes.DIALOG_BODY}>\n            <FormGroup label=\"Name\" labelInfo=\"(optional)\" labelFor=\"name\">\n              <input\n                className={Classes.INPUT}\n                type=\"text\"\n                dir=\"auto\"\n                name=\"name\"\n                id=\"name\"\n                autoComplete=\"off\"\n                value={name}\n                onChange={this.handleNameChange}\n                ref={e => (this.nameField = e)}\n                // pattern={/^[a-zA-Z0-9_]+$/.source}\n              />\n            </FormGroup>\n\n            {_.map(types, type => {\n              const conds = _.filter(\n                factors,\n                factor => factor.factorTypeId === type._id\n              );\n              const requiredClass = type.required ? \"required\" : \"\";\n              if (conds.length === 0) {\n                return (\n                  <FormGroup\n                    label={type.name}\n                    labelFor=\"name\"\n                    className={requiredClass}\n                    key={type._id}\n                  >\n                    <Callout\n                      icon={\n                        type.required\n                          ? IconNames.WARNING_SIGN\n                          : IconNames.INFO_SIGN\n                      }\n                      intent={type.required ? Intent.DANGER : null}\n                    >\n                      There are no factor values for the\n                      {type.required ? <strong> required </strong> : \" \"}\n                      {type.name} factor type yet.{\" \"}\n                      <Link to=\"/admin/factors\">Add factor values</Link>.\n                    </Callout>\n                  </FormGroup>\n                );\n              }\n              return (\n                <RadioGroup\n                  key={type._id}\n                  label={type.name}\n                  onChange={this.handleFactorChange.bind(this, type._id)}\n                  selectedValue={selected[type._id]}\n                  inline={true}\n                  className={requiredClass}\n                >\n                  {_.map(conds, cond => (\n                    <Radio\n                      key={cond._id}\n                      label={cond.label()}\n                      value={cond._id}\n                    />\n                  ))}\n                </RadioGroup>\n              );\n            })}\n          </div>\n          <div className={Classes.DIALOG_FOOTER}>\n            <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n              <Button\n                type=\"submit\"\n                text=\"Create Treatment\"\n                intent={Intent.PRIMARY}\n              />\n            </div>\n          </div>\n        </form>\n      </Dialog>\n    );\n  }\n}\n","import React from \"react\";\nimport moment from \"moment\";\nimport { Link } from \"react-router-dom\";\n\nimport {\n  Button,\n  FormGroup,\n  HTMLSelect,\n  Intent,\n  NonIdealState,\n  Tag,\n  HTMLTable,\n  Classes\n} from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { AdminPageHeader } from \"./AdminHeading.jsx\";\nimport { AlertToaster, SuccessToaster } from \"../Toasters.jsx\";\nimport {\n  retireGameFullPlayers,\n  retireSinglePlayer\n} from \"../../../api/players/methods\";\nimport { exitStatuses } from \"../../../api/players/players.js\";\n\nexport default class AdminPlayers extends React.Component {\n  state = {\n    retiredReason: exitStatuses[0],\n    players: [],\n    searchParam: { id: \"\", createdAt: \"\", status: \"\", exitStatus: \"\" }\n  };\n\n  componentDidMount() {\n    const { players } = this.props;\n    this.setState({\n      players: players\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    const { players } = this.props;\n\n    if (prevProps.players.length !== players.length) {\n      this.setState({\n        players: players\n      });\n    }\n  }\n\n  handleChange = event => {\n    const retiredReason = event.currentTarget.value;\n    this.setState({\n      retiredReason\n    });\n  };\n\n  handleRetirePlayers = event => {\n    event.preventDefault();\n    const { retiredReason } = this.state;\n    retireGameFullPlayers.call({ retiredReason }, (err, playersAffected) => {\n      if (err) {\n        AlertToaster.show({ message: `Failed to retire players: ${err}` });\n      } else {\n        SuccessToaster.show({ message: `${playersAffected} players affected` });\n      }\n    });\n  };\n\n  handleRetireSinglePlayer = (event, playerId) => {\n    event.preventDefault();\n    retireSinglePlayer.call({ playerId }, (err, _) => {\n      if (err) {\n        AlertToaster.show({ message: `Failed to retire player: ${err}` });\n      } else {\n        SuccessToaster.show({\n          message: `Succeed to retire player`\n        });\n      }\n    });\n  };\n\n  handleColumnHeaderChange = (event, key) => {\n    const value = event.currentTarget.value;\n\n    this.setState(\n      {\n        searchParam: { ...this.state.searchParam, [key]: value }\n      },\n      this.filterPlayers\n    );\n  };\n\n  filterPlayers = () => {\n    const {\n      searchParam: { createdAt, id, status, exitStatus }\n    } = this.state;\n    const { players } = this.props;\n\n    this.setState({\n      players: players\n        .filter(p => {\n          // Filter id\n          if (!id) {\n            return true;\n          }\n\n          return p.id.includes(id);\n        })\n        .filter(p => {\n          // Filter status\n          if (!status) {\n            return true;\n          }\n\n          switch (status) {\n            case \"online\":\n              return p.online && p.idle === false;\n\n            case \"offline\":\n              return !p.online;\n\n            case \"idle\":\n              return p.idle;\n\n            default:\n              return true;\n          }\n        })\n        .filter(p => {\n          // Filter createdAt\n          if (!createdAt) {\n            return true;\n          }\n\n          const fromNow = moment(p.createdAt).fromNow();\n          return fromNow.includes(createdAt);\n        })\n        .filter(p => {\n          // Filter exitStatus\n          if (!exitStatus) {\n            return true;\n          }\n\n          return p.exitStatus ? p.exitStatus.includes(exitStatus) : false;\n        })\n    });\n  };\n\n  render() {\n    const { retired } = this.props;\n    const { retiredReason, players, searchParam } = this.state;\n\n    return (\n      <div className=\"players\">\n        <AdminPageHeader icon={IconNames.PERSON}>\n          {retired ? \"Retired Players\" : \"Players\"}\n        </AdminPageHeader>\n\n        {this.props.players.length === 0 ? (\n          <p>{retired ? \"No retired players.\" : \"No players yet.\"}</p>\n        ) : (\n          <HTMLTable striped>\n            <thead>\n              <tr>\n                <th>#</th>\n                <th>\n                  <input\n                    className={Classes.INPUT}\n                    value={searchParam.id}\n                    type=\"text\"\n                    placeholder=\"ID\"\n                    onChange={e => this.handleColumnHeaderChange(e, \"id\")}\n                  />\n                </th>\n                <th>\n                  <input\n                    className={Classes.INPUT}\n                    value={searchParam.status}\n                    type=\"text\"\n                    placeholder=\"Status\"\n                    onChange={e => this.handleColumnHeaderChange(e, \"status\")}\n                  />\n                </th>\n                <th>\n                  <input\n                    className={Classes.INPUT}\n                    value={searchParam.createdAt}\n                    type=\"text\"\n                    placeholder=\"First Registered\"\n                    onChange={e =>\n                      this.handleColumnHeaderChange(e, \"createdAt\")\n                    }\n                  />\n                </th>\n                <th>\n                  <input\n                    className={Classes.INPUT}\n                    value={searchParam.exitStatus}\n                    type=\"text\"\n                    placeholder=\"Exit Status\"\n                    onChange={e =>\n                      this.handleColumnHeaderChange(e, \"exitStatus\")\n                    }\n                  />\n                </th>\n                <th />\n              </tr>\n            </thead>\n            <tbody>\n              {_.map(players, player => (\n                <tr key={player._id}>\n                  <td>{player.index}</td>\n                  <td>{player.id}</td>\n                  <td>\n                    <Tag\n                      intent={\n                        player.online\n                          ? player.idle\n                            ? Intent.WARNING\n                            : Intent.SUCCESS\n                          : Intent.DANGER\n                      }\n                    >\n                      {player.online\n                        ? player.idle\n                          ? \"idle\"\n                          : \"online\"\n                        : \"offline\"}\n                    </Tag>\n                  </td>\n                  <td title={moment(player.createdAt).format()}>\n                    {moment(player.createdAt).fromNow()}\n                  </td>\n                  <td>{player.exitStatus}</td>\n                  <td>\n                    {!player.retireAt && (\n                      <Button\n                        text={\"Retire\"}\n                        className={Classes.SMALL}\n                        minimal\n                        icon={IconNames.LOG_OUT}\n                        intent={Intent.DANGER}\n                        onClick={e =>\n                          this.handleRetireSinglePlayer(e, player._id)\n                        }\n                      />\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </HTMLTable>\n        )}\n\n        {retired ? (\n          <p>\n            <br />\n            <Link to=\"/admin/players\">Back to Active Players</Link>\n          </p>\n        ) : (\n          <>\n            <br />\n\n            <p>\n              <br />\n              <Link to=\"/admin/players/retired\">View Retired Players</Link>\n            </p>\n\n            <br />\n\n            <br />\n\n            <h4>Retire Players</h4>\n\n            <FormGroup label=\"Exit Status\" labelFor=\"retire\">\n              <HTMLSelect\n                name=\"retire\"\n                id=\"retire\"\n                onChange={this.handleChange}\n                value={retiredReason}\n              >\n                {_.map(exitStatuses, name => (\n                  <option key={name} value={name}>\n                    {name}\n                  </option>\n                ))}\n              </HTMLSelect>\n              <br />\n              <br />\n              <Button\n                intent={Intent.PRIMARY}\n                onClick={this.handleRetirePlayers}\n              >\n                Retire Players with exitStatus <strong>{retiredReason}</strong>\n              </Button>\n            </FormGroup>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport { Button, Classes, EditableText, Intent } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { AlertToaster } from \"../Toasters.jsx\";\nimport { updateTreatment } from \"../../../api/treatments/methods.js\";\n\nexport default class AdminTreatment extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.treatment.name || \"\"\n    };\n  }\n\n  componentWillUpdate(props) {\n    if (props.treatment.name !== this.props.treatment.name) {\n      this.setState({ name: props.treatment.name });\n    }\n  }\n\n  handleNameChange = name => {\n    this.setState({ name: name || \"\" });\n  };\n\n  handleNameConfirm = () => {\n    const { _id, name: prevName } = this.props.treatment;\n    const { name: nameRaw } = this.state;\n    const name = nameRaw.trim();\n    if (name === prevName) {\n      this.handleNameChange(prevName);\n      return;\n    }\n\n    updateTreatment.call({ _id, name }, err => {\n      if (err) {\n        AlertToaster.show({ message: String(err) });\n        this.handleNameChange(prevName);\n        return;\n      }\n    });\n  };\n\n  handleArchive = () => {\n    const {\n      archived,\n      treatment: { _id }\n    } = this.props;\n    updateTreatment.call({ _id, archived: !archived });\n  };\n\n  render() {\n    const { treatment, factorTypes, archived } = this.props;\n    const { name } = this.state;\n    const conds = treatment.factors();\n\n    const archiveIntent = archived ? Intent.SUCCESS : Intent.DANGER;\n    return (\n      <tr>\n        <td>\n          <EditableText\n            onChange={this.handleNameChange}\n            onConfirm={this.handleNameConfirm}\n            value={name}\n          />\n        </td>\n\n        {factorTypes.map(type => {\n          const cond = conds.find(c => c.factorTypeId === type._id);\n          return <td key={type._id}>{cond ? cond.label() : \"-\"}</td>;\n        })}\n\n        <td>\n          <Button\n            text={archived ? \"Unarchive\" : \"Archive\"}\n            intent={archiveIntent}\n            minimal\n            icon={IconNames.BOX}\n            className={Classes.SMALL}\n            onClick={this.handleArchive}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { Button, HTMLTable, Icon } from \"@blueprintjs/core\";\nimport { IconNames } from \"@blueprintjs/icons\";\n\nimport { AdminPageHeader } from \"./AdminHeading.jsx\";\nimport AdminNewTreatment from \"./AdminNewTreatment.jsx\";\nimport AdminTreatment from \"./AdminTreatment.jsx\";\nimport Loading from \"../Loading.jsx\";\n\nexport default class AdminTreatments extends React.Component {\n  state = { newTreatmentIsOpen: false };\n\n  render() {\n    const { loading, treatments, factors, factorTypes, archived } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    return (\n      <div className=\"treatments\">\n        <AdminPageHeader icon={IconNames.PROPERTIES}>\n          {archived ? \"Archived Treatments\" : \"Treatments\"}\n        </AdminPageHeader>\n\n        {treatments.length === 0 ? (\n          <p>\n            {archived\n              ? \"No archived treatments.\"\n              : \"No treatments yet, create some bellow.\"}\n          </p>\n        ) : (\n          <HTMLTable striped>\n            <thead>\n              <tr>\n                <th>Name</th>\n                {factorTypes.map(type => (\n                  <th key={type._id}>\n                    <em label={type.description}>{type.name}</em>\n                  </th>\n                ))}\n                <th />\n              </tr>\n            </thead>\n            <tbody>\n              {_.map(treatments, treatment => (\n                <AdminTreatment\n                  key={treatment._id}\n                  treatment={treatment}\n                  factorTypes={factorTypes}\n                  archived={archived}\n                />\n              ))}\n            </tbody>\n          </HTMLTable>\n        )}\n\n        {archived ? (\n          <p>\n            <br />\n            <Link to=\"/admin/treatments\">Back to Active Treatments</Link>\n          </p>\n        ) : (\n          <>\n            <br />\n\n            <Button\n              text=\"New Treatment\"\n              onClick={() => this.setState({ newTreatmentIsOpen: true })}\n            />\n\n            <AdminNewTreatment\n              factors={factors}\n              factorTypes={factorTypes}\n              onClose={() => this.setState({ newTreatmentIsOpen: false })}\n              isOpen={this.state.newTreatmentIsOpen}\n            />\n\n            <p>\n              <br />\n              <Link to=\"/admin/treatments/archived\">\n                View Archived Treatments\n              </Link>\n            </p>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n","import { Meteor } from \"meteor/meteor\";\nimport { withTracker } from \"meteor/react-meteor-data\";\n\nexport default (Comp, props) =>\n  withTracker(rest => ({\n    ...rest,\n    ...props,\n    user: Meteor.user(),\n    loggingIn: Meteor.loggingIn(),\n    loading: Meteor.loggingIn(),\n    connected: Meteor.status().connected\n  }))(Comp);\n","// gameContainer.jsx\n\nimport { TimeSync } from \"meteor/mizzao:timesync\";\nimport { withTracker } from \"meteor/react-meteor-data\";\nimport moment from \"moment\";\nimport { PlayerRounds } from \"../../api/player-rounds/player-rounds\";\nimport {\n  augmentGameStageRound,\n  augmentPlayer,\n  augmentPlayerLobby,\n  augmentPlayerStageRound,\n  augmentGameLobby\n} from \"../../api/player-stages/augment\";\nimport { PlayerStages } from \"../../api/player-stages/player-stages\";\nimport { Players } from \"../../api/players/players\";\nimport { Rounds } from \"../../api/rounds/rounds\";\nimport { Stages } from \"../../api/stages/stages\";\nimport { Treatments } from \"../../api/treatments/treatments.js\";\nimport Game from \"../components/Game.jsx\";\n\nconst loadingObj = { loading: true };\n\n// Handles all the timing stuff\nconst withTimer = withTracker(({ game, stage, player, ...rest }) => {\n  // We no longer need timers if the game ended, skip the timing stuff.\n  if (game && game.finishedAt) {\n    return { game, stage, player };\n  }\n\n  // TimeSync.serverTime() is a reactive source that will trigger this\n  // withTracker function every 1s.\n  const now = moment(TimeSync.serverTime(null, 100));\n\n  const startTimeAt = stage && stage.startTimeAt && moment(stage.startTimeAt);\n  const started = startTimeAt && now.isSameOrAfter(startTimeAt);\n  const endTimeAt =\n    startTimeAt && startTimeAt.add(stage.durationInSeconds, \"seconds\");\n  const ended = endTimeAt && now.isSameOrAfter(endTimeAt);\n  const timedOut = stage && !player.stage.submitted && ended;\n  const roundOver = (stage && player.stage.submitted) || timedOut;\n\n  return {\n    game,\n    stage,\n    player,\n    timedOut,\n    roundOver,\n    started,\n    ended,\n    endTimeAt,\n    ...rest\n  };\n})(Game);\n\n// Handles all the info below game\nconst withGameInfo = withTracker(\n  ({ game, gameLobby, player, treatment, ...rest }) => {\n    if (!game) {\n      return {\n        gameLobby,\n        player,\n        treatment\n      };\n    }\n\n    const gameId = game._id;\n    treatment = Treatments.findOne(game.treatmentId);\n    if (!treatment) {\n      return loadingObj;\n    }\n\n    game.treatment = treatment.factorsObject();\n    game.players = Players.find({ gameId }).fetch();\n    game.rounds = Rounds.find({ gameId }, { sort: { index: 1 } }).fetch();\n    game.rounds.forEach(round => {\n      round.stages = Stages.find(\n        { roundId: round._id },\n        { sort: { index: 1 } }\n      ).fetch();\n    });\n\n    const stage = Stages.findOne(game.currentStageId);\n    if (!stage) {\n      return loadingObj;\n    }\n    const round = game.rounds.find(r => r._id === stage.roundId);\n\n    // We're having streaming updates from the backend that put us in an\n    // uncertain state until everything is loaded correctly.\n    const playerIds = game.players.map(p => p._id);\n    const playerStagesCount = PlayerStages.find({\n      stageId: stage._id,\n      playerId: { $in: playerIds }\n    }).count();\n    const playerRoundsCount = PlayerRounds.find({\n      roundId: round._id,\n      playerId: { $in: playerIds }\n    }).count();\n\n    if (\n      playerIds.length !== playerStagesCount ||\n      playerIds.length !== playerRoundsCount\n    ) {\n      return loadingObj;\n    }\n\n    augmentGameStageRound(game, stage, round);\n    const applyAugment = player => {\n      player.stage = { _id: stage._id };\n      player.round = { _id: round._id };\n      augmentPlayerStageRound(player, player.stage, player.round, game);\n    };\n    applyAugment(player);\n    game.players.forEach(applyAugment);\n\n    const params = {\n      ...rest,\n      game,\n      round,\n      stage,\n      player,\n      treatment,\n      playerStagesCount,\n      playerRoundsCount\n    };\n\n    return params;\n  }\n)(withTimer);\n\n// Loads top level Players, Game, Round and Stage data\nexport default withTracker(({ player, gameLobby, game, ...rest }) => {\n  // If no game, we're at lobby level\n  if (!game) {\n    if (!gameLobby) {\n      throw new Error(\"game not found\");\n    }\n    const treatment = Treatments.findOne(gameLobby.treatmentId);\n    if (!treatment) {\n      return loadingObj;\n    }\n\n    gameLobby.treatment = treatment.factorsObject();\n    gameLobby.queuedCount = gameLobby.queuedPlayerIds.length;\n    gameLobby.readyCount = gameLobby.playerIds.length;\n    gameLobby.players = Players.find({\n      _id: { $in: gameLobby.playerIds }\n    }).fetch();\n\n    gameLobby.players.forEach(p => augmentPlayerLobby(p, {}, {}, gameLobby));\n\n    augmentGameLobby(gameLobby);\n    augmentPlayerLobby(player, {}, {}, gameLobby);\n\n    return {\n      ...rest,\n      gameLobby,\n      player,\n      treatment\n    };\n  }\n\n  return {\n    ...rest,\n    game,\n    player\n  };\n})(withGameInfo);\n","import { TimeSync } from \"meteor/mizzao:timesync\";\nimport { withTracker } from \"meteor/react-meteor-data\";\nimport React from \"react\";\nimport moment from \"moment\";\n\nimport { LobbyConfigs } from \"../../api/lobby-configs/lobby-configs.js\";\n\nexport default class GameLobbyContainer extends React.Component {\n  render() {\n    return <div>{this.props.children}</div>;\n  }\n}\n\nreturn withTracker(({ gameLobby, player, ...rest }) => {\n  const lobbyConfig = LobbyConfigs.findOne(gameLobby.lobbyConfigId);\n\n  // TimeSync.serverTime() is a reactive source that will trigger this\n  // withTracker function every 1s.\n  const now = moment(TimeSync.serverTime(null, 100));\n\n  const startObj = lobbyConfig.timeoutType === \"lobby\" ? gameLobby : player;\n  const startTimeAt = moment(startObj.timeoutStartedAt);\n  const endTimeAt = startTimeAt.add(lobbyConfig.timeoutInSeconds, \"seconds\");\n  const timedOut = now.isSameOrAfter(endTimeAt);\n  const remainingSeconds = endTimeAt.diff(now, \"seconds\");\n  if (remainingSeconds && remainingSeconds < 0) {\n    remainingSeconds = 0;\n  }\n  const elapsedSeconds = now.diff(startTimeAt, \"seconds\");\n\n  return {\n    lobbyConfig,\n    gameLobby,\n    player,\n    timedOut,\n    remainingSeconds,\n    elapsedSeconds,\n    // endTimeAt,\n    ...rest\n  };\n})(GameLobbyContainer);\n","import { withTracker } from \"meteor/react-meteor-data\";\nimport React from \"react\";\n\nimport { Players } from \"../../api/players/players.js\";\nimport { playerWasRetired } from \"../../api/players/methods.js\";\n\nconst defaultPlayerIdKey = \"d4900a09cf1f41a494d4fc32a626dfef\";\n\nconst urlParams = new URLSearchParams(window.location.search);\nlet playerIdKeyOverride = urlParams.get(\"playerIdKey\");\nif (playerIdKeyOverride) {\n  playerIdKeyOverride += \"-\" + defaultPlayerIdKey;\n}\n\nconst playerIdKey = playerIdKeyOverride || defaultPlayerIdKey;\nconst playerIdDep = new Tracker.Dependency();\n\nexport const getPlayerId = () => {\n  playerIdDep.depend();\n  return localStorage.getItem(playerIdKey);\n};\n\nexport const setPlayerId = playerId => {\n  if (!playerId) {\n    // Avoid storing falsey value\n    return;\n  }\n  const existing = localStorage.getItem(playerIdKey);\n  if (existing === playerId) {\n    return;\n  }\n  localStorage.setItem(playerIdKey, playerId);\n  playerIdDep.changed();\n};\n\nexport const removePlayerId = () => {\n  localStorage.removeItem(playerIdKey);\n  playerIdDep.changed();\n};\n\nexport default (Component, props) => {\n  class IdentifiedContainerInner extends React.Component {\n    componentDidMount() {\n      const { playerId: _id } = this.props;\n      if (_id) {\n        playerWasRetired.call({ _id }, (err, wasRetired) => {\n          if (!err && wasRetired) {\n            removePlayerId();\n          }\n        });\n      }\n    }\n\n    render() {\n      return <Component {...this.props} {...props} />;\n    }\n  }\n\n  const HasPlayers = new Mongo.Collection(\"hasPlayers\");\n  let hasPlayers = false;\n  return withTracker(rest => {\n    const playerId = getPlayerId();\n\n    const loading = !Meteor.subscribe(\"playerInfo\", { playerId }).ready();\n    const player = Players.findOne();\n\n    // We load a flag telling us if the players were cleared, if so remove the\n    // playerId from the local store.\n    const hasPlayersObj = HasPlayers.findOne();\n    if (hasPlayersObj) {\n      if (hasPlayersObj.hasPlayers === false && hasPlayers === true) {\n        console.info(`clearing player: (${playerId})`);\n        removePlayerId();\n      }\n      hasPlayers = hasPlayersObj.hasPlayers;\n    }\n\n    return {\n      ...rest,\n      loading,\n      playerId,\n      player,\n      connected: Meteor.status().connected,\n      playerIdKey: (playerIdKeyOverride || \"\").slice(0, 5)\n    };\n  })(IdentifiedContainerInner);\n};\n","import { withTracker } from \"meteor/react-meteor-data\";\nimport { Batches } from \"../../api/batches/batches.js\";\nimport { GameLobbies } from \"../../api/game-lobbies/game-lobbies.js\";\nimport { Games } from \"../../api/games/games.js\";\nimport { PlayerRounds } from \"../../api/player-rounds/player-rounds.js\";\nimport { PlayerStages } from \"../../api/player-stages/player-stages.js\";\nimport { Rounds } from \"../../api/rounds/rounds.js\";\nimport { Stages } from \"../../api/stages/stages.js\";\nimport { Players } from \"../../api/players/players.js\";\nimport { ActivityMonitor } from \"../../lib/monitor.js\";\nimport Public from \"../components/Public\";\n\nconst withStageDependencies = withTracker(({ loading, game, ...rest }) => {\n  const gameId = game && game._id;\n  const stageId = game && game.currentStageId;\n\n  const sub = Meteor.subscribe(\"gameCurrentRoundStage\", {\n    gameId,\n    stageId\n  });\n\n  const playerStage = PlayerStages.findOne({ gameId, stageId });\n  const playerRound =\n    playerStage &&\n    PlayerRounds.findOne({ gameId, roundId: playerStage.roundId });\n\n  const stage = Stages.findOne({ gameId, _id: stageId });\n  const stages =\n    stage && Stages.find({ gameId, roundId: stage.roundId }).fetch();\n  const round = stage && Rounds.findOne({ gameId, _id: stage.roundId });\n\n  return {\n    loading: loading || !sub.ready(),\n    game,\n    playerStage,\n    playerRound,\n    stage,\n    stages,\n    round,\n    ...rest\n  };\n})(Public);\n\nconst withGameDependencies = withTracker(\n  ({ loading, game, gameLobby, ...rest }) => {\n    if (loading) {\n      return { loading: true };\n    }\n\n    const gameId = game && game._id;\n    const gameLobbyId = gameLobby && gameLobby._id;\n    const sub = Meteor.subscribe(\"gameDependencies\", { gameId });\n    const subGameLobby = Meteor.subscribe(\"gameLobbyDependencies\", {\n      gameLobbyId\n    });\n    const treatmentId =\n      (game && game.treatmentId) || (gameLobby && gameLobby.treatmentId);\n    const subTreatment = Meteor.subscribe(\"treatment\", treatmentId);\n\n    return {\n      loading: !sub.ready() || !subTreatment.ready() || !subGameLobby.ready(),\n      game,\n      gameLobby,\n      ...rest\n    };\n  }\n)(withStageDependencies);\n\nexport default withTracker(({ loading, player, playerId, ...rest }) => {\n  ActivityMonitor.start();\n\n  if (loading) {\n    return { loading: true };\n  }\n\n  const subBatches = Meteor.subscribe(\"runningBatches\", { playerId });\n  const subLobby = Meteor.subscribe(\"gameLobby\", { playerId });\n  const subGame = Meteor.subscribe(\"game\", { playerId });\n  loading = !subBatches.ready() || !subLobby.ready() || !subGame.ready();\n\n  // Are there non-full batches left\n  const batchAvailable = Batches.find({ full: false }).count() > 0;\n\n  // Current user's assigned game and lobby\n  const gameLobby = GameLobbies.findOne({\n    $or: [{ playerIds: playerId }, { queuedPlayerIds: playerId }]\n  });\n  const game = Games.findOne({ playerIds: playerId });\n\n  if (player && !game && !gameLobby) {\n    return { loading: true };\n  }\n\n  // Check if playerId parameter is required, make sure it's present.\n  const { playerIdParam, playerIdParamExclusive } = Meteor.settings.public;\n  const playerIdParamRequired = playerIdParam && playerIdParamExclusive;\n  const urlParams = new window.URL(document.location).searchParams;\n  const playerIdParamPresent = urlParams.get(playerIdParam);\n  const playerIdParamOk = playerIdParamRequired ? playerIdParamPresent : true;\n\n  // Only open if a batch is available and the playerIdParam configuration is\n  // fulfilled, or a game lobby, or a game assigned.\n  const renderPublic = (batchAvailable && playerIdParamOk) || gameLobby || game;\n\n  return {\n    batchAvailable,\n    renderPublic,\n    loading,\n    player,\n    gameLobby,\n    game,\n    ...rest\n  };\n})(withGameDependencies);\n","import { withTracker } from \"meteor/react-meteor-data\";\nimport { Rounds } from \"../../../api/rounds/rounds\";\nimport { Stages } from \"../../../api/stages/stages\";\nimport AdminBatchGame from \"../../components/admin/AdminBatchGame\";\n\nexport default withTracker(props => {\n  const { game } = props;\n\n  if (!game) {\n    return props;\n  }\n\n  const { _id: gameId } = game;\n  const gameLoading = !Meteor.subscribe(\"admin-batch-game\", {\n    gameId\n  }).ready();\n\n  const rounds = Rounds.find({ gameId }).fetch();\n  const stages = Stages.find({ gameId }).fetch();\n\n  return {\n    loading: gameLoading,\n    rounds,\n    stages,\n    ...props\n  };\n})(AdminBatchGame);\n","import { withTracker } from \"meteor/react-meteor-data\";\nimport { GameLobbies } from \"../../../api/game-lobbies/game-lobbies\";\nimport { Games } from \"../../../api/games/games\";\nimport AdminBatchGames from \"../../components/admin/AdminBatchGames\";\n\nexport default withTracker(props => {\n  const { batchId } = props;\n  const batchLoading = !Meteor.subscribe(\"admin-batch\", {\n    batchId\n  }).ready();\n\n  return {\n    loading: batchLoading,\n    games: Games.find({ batchId }).fetch(),\n    gameLobbies: GameLobbies.find({ batchId }).fetch(),\n    ...props\n  };\n})(AdminBatchGames);\n","import { withTracker } from \"meteor/react-meteor-data\";\n\nimport { Batches } from \"../../../api/batches/batches\";\nimport { Factors } from \"../../../api/factors/factors.js\";\nimport { FactorTypes } from \"../../../api/factor-types/factor-types.js\";\nimport { LobbyConfigs } from \"../../../api/lobby-configs/lobby-configs.js\";\nimport { Treatments } from \"../../../api/treatments/treatments\";\nimport AdminBatches from \"../../components/admin/AdminBatches\";\n\nexport default withTracker(props => {\n  const { archived } = props;\n  const batchesLoading = !Meteor.subscribe(\"admin-batches\", {\n    archived\n  }).ready();\n  const treatmentsLoading = !Meteor.subscribe(\"admin-treatments\", {}).ready();\n  const factorsLoading = !Meteor.subscribe(\"admin-factors\").ready();\n  const factorTypesLoading = !Meteor.subscribe(\"admin-factor-types\").ready();\n  const lobbyConfigsLoading = !Meteor.subscribe(\n    \"admin-lobby-configs\",\n    {}\n  ).ready();\n\n  const batches = Batches.find(\n    {\n      archivedAt: { $exists: Boolean(archived) }\n    },\n    { sort: { index: 1 } }\n  ).fetch();\n  const sortedBatches = [];\n\n  if (batches.length > 0) {\n    const runningBatches = [];\n    const initBatches = [];\n\n    batches.forEach(b => {\n      switch (b.status) {\n        case \"running\":\n        case \"finished\":\n          runningBatches.push(b);\n          break;\n        case \"init\":\n          initBatches.push(b);\n          break;\n\n        default:\n          sortedBatches.push(b);\n          break;\n      }\n    });\n\n    if (runningBatches.length > 0) {\n      sortedBatches.push(\n        ...runningBatches.sort((a, b) => a.runningAt - b.runningAt)\n      );\n    }\n\n    if (initBatches.length > 0) {\n      sortedBatches.push(...initBatches);\n    }\n  }\n\n  return {\n    loading:\n      batchesLoading ||\n      treatmentsLoading ||\n      factorsLoading ||\n      lobbyConfigsLoading ||\n      factorTypesLoading,\n    batches: sortedBatches,\n    treatments: Treatments.find().fetch(),\n    factors: Factors.find().fetch(),\n    factorTypes: FactorTypes.find().fetch(),\n    lobbyConfigs: LobbyConfigs.find().fetch(),\n    ...props\n  };\n})(AdminBatches);\n","import { withTracker } from \"meteor/react-meteor-data\";\n\nimport { Factors } from \"../../../api/factors/factors.js\";\nimport { FactorTypes } from \"../../../api/factor-types/factor-types.js\";\nimport { Treatments } from \"../../../api/treatments/treatments\";\nimport AdminFactors from \"../../components/admin/AdminFactors.jsx\";\n\nexport default withTracker(props => {\n  const { archived } = props;\n  const treatmentsLoading = !Meteor.subscribe(\"admin-treatments\", {}).ready();\n  const factorsLoading = !Meteor.subscribe(\"admin-factors\").ready();\n  const typesLoading = !Meteor.subscribe(\"admin-factor-types\").ready();\n\n  return {\n    loading: treatmentsLoading || factorsLoading || typesLoading,\n    treatments: Treatments.find().fetch(),\n    factors: Factors.find(\n      { archivedAt: { $exists: Boolean(archived) } },\n      { sort: { value: 1 } }\n    ).fetch(),\n    factorTypes: FactorTypes.find({\n      archivedAt: { $exists: Boolean(archived) }\n    }).fetch(),\n    archived\n  };\n})(AdminFactors);\n","import { withTracker } from \"meteor/react-meteor-data\";\n\nimport { LobbyConfigs } from \"../../../api/lobby-configs/lobby-configs.js\";\nimport AdminLobbyConfigs from \"../../components/admin/AdminLobbyConfigs.jsx\";\n\nexport default withTracker(props => {\n  const { archived } = props;\n  const loading = !Meteor.subscribe(\"admin-lobby-configs\", {\n    archived\n  }).ready();\n\n  return {\n    loading,\n    lobbyConfigs: LobbyConfigs.find({\n      archivedAt: { $exists: Boolean(archived) }\n    }).fetch(),\n    ...props\n  };\n})(AdminLobbyConfigs);\n","import { withTracker } from \"meteor/react-meteor-data\";\n\nimport { Players } from \"../../../api/players/players.js\";\nimport AdminPlayers from \"../../components/admin/AdminPlayers.jsx\";\n\nexport default withTracker(props => {\n  const { retired } = props;\n  const loading = !Meteor.subscribe(\"admin-players\", {\n    retired\n  }).ready();\n\n  return {\n    loading,\n    retired,\n    players: Players.find(\n      {\n        retiredAt: { $exists: Boolean(retired) }\n      },\n      { sort: { index: 1 } }\n    ).fetch(),\n    ...props\n  };\n})(AdminPlayers);\n","import { withTracker } from \"meteor/react-meteor-data\";\n\nimport { FactorTypes } from \"../../../api/factor-types/factor-types.js\";\nimport { Factors } from \"../../../api/factors/factors.js\";\nimport { Treatments } from \"../../../api/treatments/treatments\";\nimport AdminTreatments from \"../../components/admin/AdminTreatments\";\n\nexport default withTracker(props => {\n  const { archived } = props;\n  const treatmentsLoading = !Meteor.subscribe(\"admin-treatments\", {\n    archived\n  }).ready();\n  const factorsLoading = !Meteor.subscribe(\"admin-factors\").ready();\n  const typesLoading = !Meteor.subscribe(\"admin-factor-types\").ready();\n\n  return {\n    loading: treatmentsLoading || factorsLoading,\n    typesLoading,\n    treatments: Treatments.find().fetch({\n      archivedAt: { $exists: Boolean(archived) }\n    }),\n    factors: Factors.find(\n      { archivedAt: { $exists: Boolean(archived) } },\n      { sort: { value: 1 } }\n    ).fetch(),\n    factorTypes: FactorTypes.find().fetch(),\n    ...props\n  };\n})(AdminTreatments);\n"]}